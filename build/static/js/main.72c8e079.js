/*! For license information please see main.72c8e079.js.LICENSE.txt */
!function(){"use strict";var e={463:function(e,t,n){var r=n(791),i=n(296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,u={};function s(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(u[e]=t,e=0;e<t.length;e++)o.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function v(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function k(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!f.call(p,e)||!f.call(d,e)&&(h.test(e)?p[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,b=Symbol.for("react.element"),x=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),T=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),R=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var D=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var M,F=Object.assign;function U(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var V=!1;function j(e,t){if(!e||V)return"";V=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,u=a.length-1;1<=o&&0<=u&&i[o]!==a[u];)u--;for(;1<=o&&0<=u;o--,u--)if(i[o]!==a[u]){if(1!==o||1!==u)do{if(o--,0>--u||i[o]!==a[u]){var s="\n"+i[o].replace(" at new "," at ");return e.displayName&&s.includes("<anonymous>")&&(s=s.replace("<anonymous>",e.displayName)),s}}while(1<=o&&0<=u);break}}}finally{V=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function z(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=j(e.type,!1);case 11:return e=j(e.type.render,!1);case 1:return e=j(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case _:return"Fragment";case x:return"Portal";case E:return"Profiler";case I:return"StrictMode";case N:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case S:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case P:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case R:t=e._payload,e=e._init;try{return B(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function K(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function G(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function H(e){e._valueTracker||(e._valueTracker=function(e){var t=G(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function W(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=G(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function $(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=K(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&k(e,"checked",t,!1)}function J(e,t){X(e,t);var n=K(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,K(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+K(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:K(n)}}function ae(e,t){var n=K(t.value),r=K(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ue(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function se(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ue(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,fe=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var ye=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ke(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function be(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var xe=null,_e=null,Ie=null;function Ee(e){if(e=ki(e)){if("function"!==typeof xe)throw Error(a(280));var t=e.stateNode;t&&(t=bi(t),xe(e.stateNode,e.type,t))}}function Se(e){_e?Ie?Ie.push(e):Ie=[e]:_e=e}function Te(){if(_e){var e=_e,t=Ie;if(Ie=_e=null,Ee(e),t)for(e=0;e<t.length;e++)Ee(t[e])}}function Ce(e,t){return e(t)}function Ne(){}var Ae=!1;function Pe(e,t,n){if(Ae)return e(t,n);Ae=!0;try{return Ce(e,t,n)}finally{Ae=!1,(null!==_e||null!==Ie)&&(Ne(),Te())}}function Re(e,t){var n=e.stateNode;if(null===n)return null;var r=bi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var De=!1;if(l)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){De=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(le){De=!1}function Le(e,t,n,r,i,a,o,u,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Me=!1,Fe=null,Ue=!1,Ve=null,je={onError:function(e){Me=!0,Fe=e}};function ze(e,t,n,r,i,a,o,u,s){Me=!1,Fe=null,Le.apply(je,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ke(e){if(Be(e)!==e)throw Error(a(188))}function Ge(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Ke(i),e;if(o===r)return Ke(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var u=!1,s=i.child;s;){if(s===n){u=!0,n=i,r=o;break}if(s===r){u=!0,r=i,n=o;break}s=s.sibling}if(!u){for(s=o.child;s;){if(s===n){u=!0,n=o,r=i;break}if(s===r){u=!0,r=o,n=i;break}s=s.sibling}if(!u)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?He(e):null}function He(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=He(e);if(null!==t)return t;e=e.sibling}return null}var We=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,$e=i.unstable_requestPaint,Xe=i.unstable_now,Je=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ut(e)/st|0)|0},ut=Math.log,st=Math.LN2;var ct=64,lt=4194304;function ft(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var u=o&~i;0!==u?r=ft(u):0!==(a&=o)&&(r=ft(a))}else 0!==(o=n&~i)?r=ft(o):0!==a&&(r=ft(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function gt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var kt=0;function wt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var bt,xt,_t,It,Et,St=!1,Tt=[],Ct=null,Nt=null,At=null,Pt=new Map,Rt=new Map,Dt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":Nt=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":Pt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rt.delete(t.pointerId)}}function Mt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=ki(t))&&xt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=gi(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void Et(e.priority,(function(){_t(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ki(n))&&xt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);we=r,n.target.dispatchEvent(r),we=null,t.shift()}return!0}function Vt(e,t,n){Ut(e)&&n.delete(t)}function jt(){St=!1,null!==Ct&&Ut(Ct)&&(Ct=null),null!==Nt&&Ut(Nt)&&(Nt=null),null!==At&&Ut(At)&&(At=null),Pt.forEach(Vt),Rt.forEach(Vt)}function zt(e,t){e.blockedOn===t&&(e.blockedOn=null,St||(St=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,jt)))}function Bt(e){function t(t){return zt(t,e)}if(0<Tt.length){zt(Tt[0],e);for(var n=1;n<Tt.length;n++){var r=Tt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&zt(Ct,e),null!==Nt&&zt(Nt,e),null!==At&&zt(At,e),Pt.forEach(t),Rt.forEach(t),n=0;n<Dt.length;n++)(r=Dt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Dt.length&&null===(n=Dt[0]).blockedOn;)Ft(n),null===n.blockedOn&&Dt.shift()}var qt=w.ReactCurrentBatchConfig,Kt=!0;function Gt(e,t,n,r){var i=kt,a=qt.transition;qt.transition=null;try{kt=1,Wt(e,t,n,r)}finally{kt=i,qt.transition=a}}function Ht(e,t,n,r){var i=kt,a=qt.transition;qt.transition=null;try{kt=4,Wt(e,t,n,r)}finally{kt=i,qt.transition=a}}function Wt(e,t,n,r){if(Kt){var i=Yt(e,t,n,r);if(null===i)Kr(e,t,r,Qt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ct=Mt(Ct,e,t,n,r,i),!0;case"dragenter":return Nt=Mt(Nt,e,t,n,r,i),!0;case"mouseover":return At=Mt(At,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Pt.set(a,Mt(Pt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Rt.set(a,Mt(Rt.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Ot.indexOf(e)){for(;null!==i;){var a=ki(i);if(null!==a&&bt(a),null===(a=Yt(e,t,n,r))&&Kr(e,t,r,Qt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Kr(e,t,r,null,n)}}var Qt=null;function Yt(e,t,n,r){if(Qt=null,null!==(e=gi(e=be(r))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function $t(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Xt=null,Jt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Jt,r=n.length,i="value"in Xt?Xt.value:Xt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,un,sn,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=an(cn),fn=F({},cn,{view:0,detail:0}),hn=an(fn),dn=F({},fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:En,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sn&&(sn&&"mousemove"===e.type?(on=e.screenX-sn.screenX,un=e.screenY-sn.screenY):un=on=0,sn=e),on)},movementY:function(e){return"movementY"in e?e.movementY:un}}),pn=an(dn),vn=an(F({},dn,{dataTransfer:0})),mn=an(F({},fn,{relatedTarget:0})),yn=an(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),gn=F({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kn=an(gn),wn=an(F({},cn,{data:0})),bn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_n={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function In(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=_n[e])&&!!t[e]}function En(){return In}var Sn=F({},fn,{key:function(e){if(e.key){var t=bn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?xn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:En,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tn=an(Sn),Cn=an(F({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Nn=an(F({},fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:En})),An=an(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pn=F({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rn=an(Pn),Dn=[9,13,27,32],On=l&&"CompositionEvent"in window,Ln=null;l&&"documentMode"in document&&(Ln=document.documentMode);var Mn=l&&"TextEvent"in window&&!Ln,Fn=l&&(!On||Ln&&8<Ln&&11>=Ln),Un=String.fromCharCode(32),Vn=!1;function jn(e,t){switch(e){case"keyup":return-1!==Dn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Gn(e,t,n,r){Se(r),0<(t=Hr(t,"onChange")).length&&(n=new ln("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Hn=null,Wn=null;function Qn(e){Ur(e,0)}function Yn(e){if(W(wi(e)))return e}function $n(e,t){if("change"===e)return t}var Xn=!1;if(l){var Jn;if(l){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Jn=Zn}else Jn=!1;Xn=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){Hn&&(Hn.detachEvent("onpropertychange",nr),Wn=Hn=null)}function nr(e){if("value"===e.propertyName&&Yn(Wn)){var t=[];Gn(t,Wn,e,be(e)),Pe(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Wn=n,(Hn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Wn)}function ar(e,t){if("click"===e)return Yn(t)}function or(e,t){if("input"===e||"change"===e)return Yn(t)}var ur="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function sr(e,t){if(ur(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!f.call(t,i)||!ur(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function fr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?fr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&fr(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=lr(n,a);var o=lr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vr=l&&"documentMode"in document&&11>=document.documentMode,mr=null,yr=null,gr=null,kr=!1;function wr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;kr||null==mr||mr!==Q(r)||("selectionStart"in(r=mr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},gr&&sr(gr,r)||(gr=r,0<(r=Hr(yr,"onSelect")).length&&(t=new ln("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function br(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var xr={animationend:br("Animation","AnimationEnd"),animationiteration:br("Animation","AnimationIteration"),animationstart:br("Animation","AnimationStart"),transitionend:br("Transition","TransitionEnd")},_r={},Ir={};function Er(e){if(_r[e])return _r[e];if(!xr[e])return e;var t,n=xr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ir)return _r[e]=n[t];return e}l&&(Ir=document.createElement("div").style,"AnimationEvent"in window||(delete xr.animationend.animation,delete xr.animationiteration.animation,delete xr.animationstart.animation),"TransitionEvent"in window||delete xr.transitionend.transition);var Sr=Er("animationend"),Tr=Er("animationiteration"),Cr=Er("animationstart"),Nr=Er("transitionend"),Ar=new Map,Pr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rr(e,t){Ar.set(e,t),s(t,[e])}for(var Dr=0;Dr<Pr.length;Dr++){var Or=Pr[Dr];Rr(Or.toLowerCase(),"on"+(Or[0].toUpperCase()+Or.slice(1)))}Rr(Sr,"onAnimationEnd"),Rr(Tr,"onAnimationIteration"),Rr(Cr,"onAnimationStart"),Rr("dblclick","onDoubleClick"),Rr("focusin","onFocus"),Rr("focusout","onBlur"),Rr(Nr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,u,s,c){if(ze.apply(this,arguments),Me){if(!Me)throw Error(a(198));var l=Fe;Me=!1,Fe=null,Ue||(Ue=!0,Ve=l)}}(r,t,void 0,e),e.currentTarget=null}function Ur(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var u=r[o],s=u.instance,c=u.currentTarget;if(u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,c),a=s}else for(o=0;o<r.length;o++){if(s=(u=r[o]).instance,c=u.currentTarget,u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,c),a=s}}}if(Ue)throw e=Ve,Ue=!1,Ve=null,e}function Vr(e,t){var n=t[vi];void 0===n&&(n=t[vi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function jr(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var zr="_reactListening"+Math.random().toString(36).slice(2);function Br(e){if(!e[zr]){e[zr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||jr(t,!1,e),jr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zr]||(t[zr]=!0,jr("selectionchange",!1,t))}}function qr(e,t,n,r){switch($t(t)){case 1:var i=Gt;break;case 4:i=Ht;break;default:i=Wt}n=i.bind(null,t,n,e),i=void 0,!De||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Kr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var u=r.stateNode.containerInfo;if(u===i||8===u.nodeType&&u.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var s=o.tag;if((3===s||4===s)&&((s=o.stateNode.containerInfo)===i||8===s.nodeType&&s.parentNode===i))return;o=o.return}for(;null!==u;){if(null===(o=gi(u)))return;if(5===(s=o.tag)||6===s){r=a=o;continue e}u=u.parentNode}}r=r.return}Pe((function(){var r=a,i=be(n),o=[];e:{var u=Ar.get(e);if(void 0!==u){var s=ln,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":s=Tn;break;case"focusin":c="focus",s=mn;break;case"focusout":c="blur",s=mn;break;case"beforeblur":case"afterblur":s=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=Nn;break;case Sr:case Tr:case Cr:s=yn;break;case Nr:s=An;break;case"scroll":s=hn;break;case"wheel":s=Rn;break;case"copy":case"cut":case"paste":s=kn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=Cn}var l=0!==(4&t),f=!l&&"scroll"===e,h=l?null!==u?u+"Capture":null:u;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==h&&(null!=(v=Re(p,h))&&l.push(Gr(p,v,d)))),f)break;p=p.return}0<l.length&&(u=new s(u,c,null,n,i),o.push({event:u,listeners:l}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(u="mouseover"===e||"pointerover"===e)||n===we||!(c=n.relatedTarget||n.fromElement)||!gi(c)&&!c[pi])&&(s||u)&&(u=i.window===i?i:(u=i.ownerDocument)?u.defaultView||u.parentWindow:window,s?(s=r,null!==(c=(c=n.relatedTarget||n.toElement)?gi(c):null)&&(c!==(f=Be(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(s=null,c=r),s!==c)){if(l=pn,v="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=Cn,v="onPointerLeave",h="onPointerEnter",p="pointer"),f=null==s?u:wi(s),d=null==c?u:wi(c),(u=new l(v,p+"leave",s,n,i)).target=f,u.relatedTarget=d,v=null,gi(i)===r&&((l=new l(h,p+"enter",c,n,i)).target=d,l.relatedTarget=f,v=l),f=v,s&&c)e:{for(h=c,p=0,d=l=s;d;d=Wr(d))p++;for(d=0,v=h;v;v=Wr(v))d++;for(;0<p-d;)l=Wr(l),p--;for(;0<d-p;)h=Wr(h),d--;for(;p--;){if(l===h||null!==h&&l===h.alternate)break e;l=Wr(l),h=Wr(h)}l=null}else l=null;null!==s&&Qr(o,u,s,l,!1),null!==c&&null!==f&&Qr(o,f,c,l,!0)}if("select"===(s=(u=r?wi(r):window).nodeName&&u.nodeName.toLowerCase())||"input"===s&&"file"===u.type)var m=$n;else if(Kn(u))if(Xn)m=or;else{m=ir;var y=rr}else(s=u.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===u.type||"radio"===u.type)&&(m=ar);switch(m&&(m=m(e,r))?Gn(o,m,n,i):(y&&y(e,u,r),"focusout"===e&&(y=u._wrapperState)&&y.controlled&&"number"===u.type&&ee(u,"number",u.value)),y=r?wi(r):window,e){case"focusin":(Kn(y)||"true"===y.contentEditable)&&(mr=y,yr=r,gr=null);break;case"focusout":gr=yr=mr=null;break;case"mousedown":kr=!0;break;case"contextmenu":case"mouseup":case"dragend":kr=!1,wr(o,n,i);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":wr(o,n,i)}var g;if(On)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Bn?jn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(Fn&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==k?"onCompositionEnd"===k&&Bn&&(g=en()):(Jt="value"in(Xt=i)?Xt.value:Xt.textContent,Bn=!0)),0<(y=Hr(r,k)).length&&(k=new wn(k,e,null,n,i),o.push({event:k,listeners:y}),g?k.data=g:null!==(g=zn(n))&&(k.data=g))),(g=Mn?function(e,t){switch(e){case"compositionend":return zn(t);case"keypress":return 32!==t.which?null:(Vn=!0,Un);case"textInput":return(e=t.data)===Un&&Vn?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!On&&jn(e,t)?(e=en(),Zt=Jt=Xt=null,Bn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Hr(r,"onBeforeInput")).length&&(i=new wn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}Ur(o,t)}))}function Gr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Hr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Re(e,n))&&r.unshift(Gr(e,a,i)),null!=(a=Re(e,t))&&r.push(Gr(e,a,i))),e=e.return}return r}function Wr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var u=n,s=u.alternate,c=u.stateNode;if(null!==s&&s===r)break;5===u.tag&&null!==c&&(u=c,i?null!=(s=Re(n,a))&&o.unshift(Gr(n,s,u)):i||null!=(s=Re(n,a))&&o.push(Gr(n,s,u))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Yr=/\r\n?/g,$r=/\u0000|\uFFFD/g;function Xr(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace($r,"")}function Jr(e,t,n){if(t=Xr(t),Xr(e)!==t&&n)throw Error(a(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(ui)}:ri;function ui(e){setTimeout((function(){throw e}))}function si(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Bt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Bt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function li(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var fi=Math.random().toString(36).slice(2),hi="__reactFiber$"+fi,di="__reactProps$"+fi,pi="__reactContainer$"+fi,vi="__reactEvents$"+fi,mi="__reactListeners$"+fi,yi="__reactHandles$"+fi;function gi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=li(e);null!==e;){if(n=e[hi])return n;e=li(e)}return t}n=(e=n).parentNode}return null}function ki(e){return!(e=e[hi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function wi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function bi(e){return e[di]||null}var xi=[],_i=-1;function Ii(e){return{current:e}}function Ei(e){0>_i||(e.current=xi[_i],xi[_i]=null,_i--)}function Si(e,t){_i++,xi[_i]=e.current,e.current=t}var Ti={},Ci=Ii(Ti),Ni=Ii(!1),Ai=Ti;function Pi(e,t){var n=e.type.contextTypes;if(!n)return Ti;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Ri(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Di(){Ei(Ni),Ei(Ci)}function Oi(e,t,n){if(Ci.current!==Ti)throw Error(a(168));Si(Ci,t),Si(Ni,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,q(e)||"Unknown",i));return F({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ti,Ai=Ci.current,Si(Ci,e),Si(Ni,Ni.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Li(e,t,Ai),r.__reactInternalMemoizedMergedChildContext=e,Ei(Ni),Ei(Ci),Si(Ci,e)):Ei(Ni),Si(Ni,n)}var Ui=null,Vi=!1,ji=!1;function zi(e){null===Ui?Ui=[e]:Ui.push(e)}function Bi(){if(!ji&&null!==Ui){ji=!0;var e=0,t=kt;try{var n=Ui;for(kt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ui=null,Vi=!1}catch(i){throw null!==Ui&&(Ui=Ui.slice(e+1)),We(Ze,Bi),i}finally{kt=t,ji=!1}}return null}var qi=[],Ki=0,Gi=null,Hi=0,Wi=[],Qi=0,Yi=null,$i=1,Xi="";function Ji(e,t){qi[Ki++]=Hi,qi[Ki++]=Gi,Gi=e,Hi=t}function Zi(e,t,n){Wi[Qi++]=$i,Wi[Qi++]=Xi,Wi[Qi++]=Yi,Yi=e;var r=$i;e=Xi;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,$i=1<<32-ot(t)+i|n<<i|r,Xi=a+e}else $i=1<<a|n<<i|r,Xi=e}function ea(e){null!==e.return&&(Ji(e,1),Zi(e,1,0))}function ta(e){for(;e===Gi;)Gi=qi[--Ki],qi[Ki]=null,Hi=qi[--Ki],qi[Ki]=null;for(;e===Yi;)Yi=Wi[--Qi],Wi[Qi]=null,Xi=Wi[--Qi],Wi[Qi]=null,$i=Wi[--Qi],Wi[Qi]=null}var na=null,ra=null,ia=!1,aa=null;function oa(e,t){var n=Rc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ua(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yi?{id:$i,overflow:Xi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Rc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function sa(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ca(e){if(ia){var t=ra;if(t){var n=t;if(!ua(e,t)){if(sa(e))throw Error(a(418));t=ci(n.nextSibling);var r=na;t&&ua(e,t)?oa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(sa(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function la(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function fa(e){if(e!==na)return!1;if(!ia)return la(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ra)){if(sa(e))throw ha(),Error(a(418));for(;t;)oa(e,t),t=ci(t.nextSibling)}if(la(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?ci(e.stateNode.nextSibling):null;return!0}function ha(){for(var e=ra;e;)e=ci(e.nextSibling)}function da(){ra=na=null,ia=!1}function pa(e){null===aa?aa=[e]:aa.push(e)}var va=w.ReactCurrentBatchConfig;function ma(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ya=Ii(null),ga=null,ka=null,wa=null;function ba(){wa=ka=ga=null}function xa(e){var t=ya.current;Ei(ya),e._currentValue=t}function _a(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ia(e,t){ga=e,wa=ka=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(wu=!0),e.firstContext=null)}function Ea(e){var t=e._currentValue;if(wa!==e)if(e={context:e,memoizedValue:t,next:null},null===ka){if(null===ga)throw Error(a(308));ka=e,ga.dependencies={lanes:0,firstContext:e}}else ka=ka.next=e;return t}var Sa=null;function Ta(e){null===Sa?Sa=[e]:Sa.push(e)}function Ca(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ta(t)):(n.next=i.next,i.next=n),t.interleaved=n,Na(e,r)}function Na(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Aa=!1;function Pa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ra(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Da(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Oa(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Ns)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Na(e,n)}return null===(i=r.interleaved)?(t.next=t,Ta(r)):(t.next=i.next,i.next=t),r.interleaved=t,Na(e,n)}function La(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}function Ma(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Fa(e,t,n,r){var i=e.updateQueue;Aa=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,u=i.shared.pending;if(null!==u){i.shared.pending=null;var s=u,c=s.next;s.next=null,null===o?a=c:o.next=c,o=s;var l=e.alternate;null!==l&&((u=(l=l.updateQueue).lastBaseUpdate)!==o&&(null===u?l.firstBaseUpdate=c:u.next=c,l.lastBaseUpdate=s))}if(null!==a){var f=i.baseState;for(o=0,l=c=s=null,u=a;;){var h=u.lane,d=u.eventTime;if((r&h)===h){null!==l&&(l=l.next={eventTime:d,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var p=e,v=u;switch(h=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){f=p.call(d,f,h);break e}f=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=v.payload)?p.call(d,f,h):p)||void 0===h)break e;f=F({},f,h);break e;case 2:Aa=!0}}null!==u.callback&&0!==u.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[u]:h.push(u))}else d={eventTime:d,lane:h,tag:u.tag,payload:u.payload,callback:u.callback,next:null},null===l?(c=l=d,s=f):l=l.next=d,o|=h;if(null===(u=u.next)){if(null===(u=i.shared.pending))break;u=(h=u).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===l&&(s=f),i.baseState=s,i.firstBaseUpdate=c,i.lastBaseUpdate=l,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Fs|=o,e.lanes=o,e.memoizedState=f}}function Ua(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var Va=(new r.Component).refs;function ja(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var za={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),a=Da(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Oa(e,a,i))&&(rc(t,e,i,r),La(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),a=Da(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Oa(e,a,i))&&(rc(t,e,i,r),La(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tc(),r=nc(e),i=Da(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Oa(e,i,r))&&(rc(t,e,r,n),La(t,e,r))}};function Ba(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!sr(n,r)||!sr(i,a))}function qa(e,t,n){var r=!1,i=Ti,a=t.contextType;return"object"===typeof a&&null!==a?a=Ea(a):(i=Ri(t)?Ai:Ci.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Pi(e,i):Ti),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=za,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Ka(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&za.enqueueReplaceState(t,t.state,null)}function Ga(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Va,Pa(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Ea(a):(a=Ri(t)?Ai:Ci.current,i.context=Pi(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(ja(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&za.enqueueReplaceState(i,i.state,null),Fa(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Ha(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===Va&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Wa(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qa(e){return(0,e._init)(e._payload)}function Ya(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Oc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function u(t){return e&&null===t.alternate&&(t.flags|=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Uc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===_?f(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===R&&Qa(a)===t.type)?((r=i(t,n.props)).ref=Ha(e,t,n),r.return=e,r):((r=Lc(n.type,n.key,n.props,null,e.mode,r)).ref=Ha(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Vc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Mc(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Uc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case b:return(n=Lc(t.type,t.key,t.props,null,e.mode,n)).ref=Ha(e,null,t),n.return=e,n;case x:return(t=Vc(t,e.mode,n)).return=e,t;case R:return h(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Mc(t,e.mode,n,null)).return=e,t;Wa(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case b:return n.key===i?c(e,t,n,r):null;case x:return n.key===i?l(e,t,n,r):null;case R:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:f(e,t,n,r,null);Wa(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case b:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case x:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case R:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return f(t,e=e.get(n)||null,r,i,null);Wa(t,r)}return null}function v(i,a,u,s){for(var c=null,l=null,f=a,v=a=0,m=null;null!==f&&v<u.length;v++){f.index>v?(m=f,f=null):m=f.sibling;var y=d(i,f,u[v],s);if(null===y){null===f&&(f=m);break}e&&f&&null===y.alternate&&t(i,f),a=o(y,a,v),null===l?c=y:l.sibling=y,l=y,f=m}if(v===u.length)return n(i,f),ia&&Ji(i,v),c;if(null===f){for(;v<u.length;v++)null!==(f=h(i,u[v],s))&&(a=o(f,a,v),null===l?c=f:l.sibling=f,l=f);return ia&&Ji(i,v),c}for(f=r(i,f);v<u.length;v++)null!==(m=p(f,i,v,u[v],s))&&(e&&null!==m.alternate&&f.delete(null===m.key?v:m.key),a=o(m,a,v),null===l?c=m:l.sibling=m,l=m);return e&&f.forEach((function(e){return t(i,e)})),ia&&Ji(i,v),c}function m(i,u,s,c){var l=L(s);if("function"!==typeof l)throw Error(a(150));if(null==(s=l.call(s)))throw Error(a(151));for(var f=l=null,v=u,m=u=0,y=null,g=s.next();null!==v&&!g.done;m++,g=s.next()){v.index>m?(y=v,v=null):y=v.sibling;var k=d(i,v,g.value,c);if(null===k){null===v&&(v=y);break}e&&v&&null===k.alternate&&t(i,v),u=o(k,u,m),null===f?l=k:f.sibling=k,f=k,v=y}if(g.done)return n(i,v),ia&&Ji(i,m),l;if(null===v){for(;!g.done;m++,g=s.next())null!==(g=h(i,g.value,c))&&(u=o(g,u,m),null===f?l=g:f.sibling=g,f=g);return ia&&Ji(i,m),l}for(v=r(i,v);!g.done;m++,g=s.next())null!==(g=p(v,i,m,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?m:g.key),u=o(g,u,m),null===f?l=g:f.sibling=g,f=g);return e&&v.forEach((function(e){return t(i,e)})),ia&&Ji(i,m),l}return function e(r,a,o,s){if("object"===typeof o&&null!==o&&o.type===_&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case b:e:{for(var c=o.key,l=a;null!==l;){if(l.key===c){if((c=o.type)===_){if(7===l.tag){n(r,l.sibling),(a=i(l,o.props.children)).return=r,r=a;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===R&&Qa(c)===l.type){n(r,l.sibling),(a=i(l,o.props)).ref=Ha(r,l,o),a.return=r,r=a;break e}n(r,l);break}t(r,l),l=l.sibling}o.type===_?((a=Mc(o.props.children,r.mode,s,o.key)).return=r,r=a):((s=Lc(o.type,o.key,o.props,null,r.mode,s)).ref=Ha(r,a,o),s.return=r,r=s)}return u(r);case x:e:{for(l=o.key;null!==a;){if(a.key===l){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Vc(o,r.mode,s)).return=r,r=a}return u(r);case R:return e(r,a,(l=o._init)(o._payload),s)}if(te(o))return v(r,a,o,s);if(L(o))return m(r,a,o,s);Wa(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=Uc(o,r.mode,s)).return=r,r=a),u(r)):n(r,a)}}var $a=Ya(!0),Xa=Ya(!1),Ja={},Za=Ii(Ja),eo=Ii(Ja),to=Ii(Ja);function no(e){if(e===Ja)throw Error(a(174));return e}function ro(e,t){switch(Si(to,t),Si(eo,e),Si(Za,Ja),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:se(null,"");break;default:t=se(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ei(Za),Si(Za,t)}function io(){Ei(Za),Ei(eo),Ei(to)}function ao(e){no(to.current);var t=no(Za.current),n=se(t,e.type);t!==n&&(Si(eo,e),Si(Za,n))}function oo(e){eo.current===e&&(Ei(Za),Ei(eo))}var uo=Ii(0);function so(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var co=[];function lo(){for(var e=0;e<co.length;e++)co[e]._workInProgressVersionPrimary=null;co.length=0}var fo=w.ReactCurrentDispatcher,ho=w.ReactCurrentBatchConfig,po=0,vo=null,mo=null,yo=null,go=!1,ko=!1,wo=0,bo=0;function xo(){throw Error(a(321))}function _o(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ur(e[n],t[n]))return!1;return!0}function Io(e,t,n,r,i,o){if(po=o,vo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,fo.current=null===e||null===e.memoizedState?uu:su,e=n(r,i),ko){o=0;do{if(ko=!1,wo=0,25<=o)throw Error(a(301));o+=1,yo=mo=null,t.updateQueue=null,fo.current=cu,e=n(r,i)}while(ko)}if(fo.current=ou,t=null!==mo&&null!==mo.next,po=0,yo=mo=vo=null,go=!1,t)throw Error(a(300));return e}function Eo(){var e=0!==wo;return wo=0,e}function So(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===yo?vo.memoizedState=yo=e:yo=yo.next=e,yo}function To(){if(null===mo){var e=vo.alternate;e=null!==e?e.memoizedState:null}else e=mo.next;var t=null===yo?vo.memoizedState:yo.next;if(null!==t)yo=t,mo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(mo=e).memoizedState,baseState:mo.baseState,baseQueue:mo.baseQueue,queue:mo.queue,next:null},null===yo?vo.memoizedState=yo=e:yo=yo.next=e}return yo}function Co(e,t){return"function"===typeof t?t(e):t}function No(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=mo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var u=i.next;i.next=o.next,o.next=u}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var s=u=null,c=null,l=o;do{var f=l.lane;if((po&f)===f)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var h={lane:f,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(s=c=h,u=r):c=c.next=h,vo.lanes|=f,Fs|=f}l=l.next}while(null!==l&&l!==o);null===c?u=r:c.next=s,ur(r,t.memoizedState)||(wu=!0),t.memoizedState=r,t.baseState=u,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,vo.lanes|=o,Fs|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ao(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var u=i=i.next;do{o=e(o,u.action),u=u.next}while(u!==i);ur(o,t.memoizedState)||(wu=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Po(){}function Ro(e,t){var n=vo,r=To(),i=t(),o=!ur(r.memoizedState,i);if(o&&(r.memoizedState=i,wu=!0),r=r.queue,Ko(Lo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==yo&&1&yo.memoizedState.tag){if(n.flags|=2048,Vo(9,Oo.bind(null,n,r,i,t),void 0,null),null===As)throw Error(a(349));0!==(30&po)||Do(n,t,i)}return i}function Do(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Oo(e,t,n,r){t.value=n,t.getSnapshot=r,Mo(t)&&Fo(e)}function Lo(e,t,n){return n((function(){Mo(t)&&Fo(e)}))}function Mo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ur(e,n)}catch(r){return!0}}function Fo(e){var t=Na(e,1);null!==t&&rc(t,e,1,-1)}function Uo(e){var t=So();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Co,lastRenderedState:e},t.queue=e,e=e.dispatch=nu.bind(null,vo,e),[t.memoizedState,e]}function Vo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function jo(){return To().memoizedState}function zo(e,t,n,r){var i=So();vo.flags|=e,i.memoizedState=Vo(1|t,n,void 0,void 0===r?null:r)}function Bo(e,t,n,r){var i=To();r=void 0===r?null:r;var a=void 0;if(null!==mo){var o=mo.memoizedState;if(a=o.destroy,null!==r&&_o(r,o.deps))return void(i.memoizedState=Vo(t,n,a,r))}vo.flags|=e,i.memoizedState=Vo(1|t,n,a,r)}function qo(e,t){return zo(8390656,8,e,t)}function Ko(e,t){return Bo(2048,8,e,t)}function Go(e,t){return Bo(4,2,e,t)}function Ho(e,t){return Bo(4,4,e,t)}function Wo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Qo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Bo(4,4,Wo.bind(null,t,e),n)}function Yo(){}function $o(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&_o(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Xo(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&_o(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Jo(e,t,n){return 0===(21&po)?(e.baseState&&(e.baseState=!1,wu=!0),e.memoizedState=n):(ur(n,t)||(n=vt(),vo.lanes|=n,Fs|=n,e.baseState=!0),t)}function Zo(e,t){var n=kt;kt=0!==n&&4>n?n:4,e(!0);var r=ho.transition;ho.transition={};try{e(!1),t()}finally{kt=n,ho.transition=r}}function eu(){return To().memoizedState}function tu(e,t,n){var r=nc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ru(e))iu(t,n);else if(null!==(n=Ca(e,t,n,r))){rc(n,e,r,tc()),au(n,t,r)}}function nu(e,t,n){var r=nc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ru(e))iu(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,u=a(o,n);if(i.hasEagerState=!0,i.eagerState=u,ur(u,o)){var s=t.interleaved;return null===s?(i.next=i,Ta(t)):(i.next=s.next,s.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Ca(e,t,i,r))&&(rc(n,e,r,i=tc()),au(n,t,r))}}function ru(e){var t=e.alternate;return e===vo||null!==t&&t===vo}function iu(e,t){ko=go=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function au(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}var ou={readContext:Ea,useCallback:xo,useContext:xo,useEffect:xo,useImperativeHandle:xo,useInsertionEffect:xo,useLayoutEffect:xo,useMemo:xo,useReducer:xo,useRef:xo,useState:xo,useDebugValue:xo,useDeferredValue:xo,useTransition:xo,useMutableSource:xo,useSyncExternalStore:xo,useId:xo,unstable_isNewReconciler:!1},uu={readContext:Ea,useCallback:function(e,t){return So().memoizedState=[e,void 0===t?null:t],e},useContext:Ea,useEffect:qo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,zo(4194308,4,Wo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return zo(4194308,4,e,t)},useInsertionEffect:function(e,t){return zo(4,2,e,t)},useMemo:function(e,t){var n=So();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=So();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=tu.bind(null,vo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},So().memoizedState=e},useState:Uo,useDebugValue:Yo,useDeferredValue:function(e){return So().memoizedState=e},useTransition:function(){var e=Uo(!1),t=e[0];return e=Zo.bind(null,e[1]),So().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=vo,i=So();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===As)throw Error(a(349));0!==(30&po)||Do(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,qo(Lo.bind(null,r,o,e),[e]),r.flags|=2048,Vo(9,Oo.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=So(),t=As.identifierPrefix;if(ia){var n=Xi;t=":"+t+"R"+(n=($i&~(1<<32-ot($i)-1)).toString(32)+n),0<(n=wo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=bo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},su={readContext:Ea,useCallback:$o,useContext:Ea,useEffect:Ko,useImperativeHandle:Qo,useInsertionEffect:Go,useLayoutEffect:Ho,useMemo:Xo,useReducer:No,useRef:jo,useState:function(){return No(Co)},useDebugValue:Yo,useDeferredValue:function(e){return Jo(To(),mo.memoizedState,e)},useTransition:function(){return[No(Co)[0],To().memoizedState]},useMutableSource:Po,useSyncExternalStore:Ro,useId:eu,unstable_isNewReconciler:!1},cu={readContext:Ea,useCallback:$o,useContext:Ea,useEffect:Ko,useImperativeHandle:Qo,useInsertionEffect:Go,useLayoutEffect:Ho,useMemo:Xo,useReducer:Ao,useRef:jo,useState:function(){return Ao(Co)},useDebugValue:Yo,useDeferredValue:function(e){var t=To();return null===mo?t.memoizedState=e:Jo(t,mo.memoizedState,e)},useTransition:function(){return[Ao(Co)[0],To().memoizedState]},useMutableSource:Po,useSyncExternalStore:Ro,useId:eu,unstable_isNewReconciler:!1};function lu(e,t){try{var n="",r=t;do{n+=z(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function fu(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function hu(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var du="function"===typeof WeakMap?WeakMap:Map;function pu(e,t,n){(n=Da(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Gs||(Gs=!0,Hs=r),hu(0,t)},n}function vu(e,t,n){(n=Da(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){hu(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){hu(0,t),"function"!==typeof r&&(null===Ws?Ws=new Set([this]):Ws.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function mu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new du;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Sc.bind(null,e,t,n),t.then(e,e))}function yu(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function gu(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Da(-1,1)).tag=2,Oa(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ku=w.ReactCurrentOwner,wu=!1;function bu(e,t,n,r){t.child=null===e?Xa(t,null,n,r):$a(t,e.child,n,r)}function xu(e,t,n,r,i){n=n.render;var a=t.ref;return Ia(t,i),r=Io(e,t,n,r,a,i),n=Eo(),null===e||wu?(ia&&n&&ea(t),t.flags|=1,bu(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Gu(e,t,i))}function _u(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Dc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Lc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Iu(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:sr)(o,r)&&e.ref===t.ref)return Gu(e,t,i)}return t.flags|=1,(e=Oc(a,r)).ref=t.ref,e.return=t,t.child=e}function Iu(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(sr(a,r)&&e.ref===t.ref){if(wu=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Gu(e,t,i);0!==(131072&e.flags)&&(wu=!0)}}return Tu(e,t,n,r,i)}function Eu(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Si(Os,Ds),Ds|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Si(Os,Ds),Ds|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Si(Os,Ds),Ds|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Si(Os,Ds),Ds|=r;return bu(e,t,i,n),t.child}function Su(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Tu(e,t,n,r,i){var a=Ri(n)?Ai:Ci.current;return a=Pi(t,a),Ia(t,i),n=Io(e,t,n,r,a,i),r=Eo(),null===e||wu?(ia&&r&&ea(t),t.flags|=1,bu(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Gu(e,t,i))}function Cu(e,t,n,r,i){if(Ri(n)){var a=!0;Mi(t)}else a=!1;if(Ia(t,i),null===t.stateNode)Ku(e,t),qa(t,n,r),Ga(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,u=t.memoizedProps;o.props=u;var s=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ea(c):c=Pi(t,c=Ri(n)?Ai:Ci.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&Ka(t,o,r,c),Aa=!1;var h=t.memoizedState;o.state=h,Fa(t,r,o,i),s=t.memoizedState,u!==r||h!==s||Ni.current||Aa?("function"===typeof l&&(ja(t,n,l,r),s=t.memoizedState),(u=Aa||Ba(t,n,u,r,h,s,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=c,r=u):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Ra(e,t),u=t.memoizedProps,c=t.type===t.elementType?u:ma(t.type,u),o.props=c,f=t.pendingProps,h=o.context,"object"===typeof(s=n.contextType)&&null!==s?s=Ea(s):s=Pi(t,s=Ri(n)?Ai:Ci.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==f||h!==s)&&Ka(t,o,r,s),Aa=!1,h=t.memoizedState,o.state=h,Fa(t,r,o,i);var p=t.memoizedState;u!==f||h!==p||Ni.current||Aa?("function"===typeof d&&(ja(t,n,d,r),p=t.memoizedState),(c=Aa||Ba(t,n,c,r,h,p,s)||!1)?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,s),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,s)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=s,r=c):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Nu(e,t,n,r,a,i)}function Nu(e,t,n,r,i,a){Su(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Fi(t,n,!1),Gu(e,t,a);r=t.stateNode,ku.current=t;var u=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=$a(t,e.child,null,a),t.child=$a(t,null,u,a)):bu(e,t,u,a),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Au(e){var t=e.stateNode;t.pendingContext?Oi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Oi(0,t.context,!1),ro(e,t.containerInfo)}function Pu(e,t,n,r,i){return da(),pa(i),t.flags|=256,bu(e,t,n,r),t.child}var Ru,Du,Ou,Lu,Mu={dehydrated:null,treeContext:null,retryLane:0};function Fu(e){return{baseLanes:e,cachePool:null,transitions:null}}function Uu(e,t,n){var r,i=t.pendingProps,o=uo.current,u=!1,s=0!==(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(u=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Si(uo,1&o),null===e)return ca(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(s=i.children,e=i.fallback,u?(i=t.mode,u=t.child,s={mode:"hidden",children:s},0===(1&i)&&null!==u?(u.childLanes=0,u.pendingProps=s):u=Fc(s,i,0,null),e=Mc(e,i,n,null),u.return=t,e.return=t,u.sibling=e,t.child=u,t.child.memoizedState=Fu(n),t.memoizedState=Mu,e):Vu(t,s));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,u){if(n)return 256&t.flags?(t.flags&=-257,ju(e,t,u,r=fu(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Fc({mode:"visible",children:r.children},i,0,null),(o=Mc(o,i,u,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&$a(t,e.child,null,u),t.child.memoizedState=Fu(u),t.memoizedState=Mu,o);if(0===(1&t.mode))return ju(e,t,u,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var s=r.dgst;return r=s,ju(e,t,u,r=fu(o=Error(a(419)),r,void 0))}if(s=0!==(u&e.childLanes),wu||s){if(null!==(r=As)){switch(u&-u){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|u))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Na(e,i),rc(r,e,i,-1))}return mc(),ju(e,t,u,r=fu(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Cc.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ra=ci(i.nextSibling),na=t,ia=!0,aa=null,null!==e&&(Wi[Qi++]=$i,Wi[Qi++]=Xi,Wi[Qi++]=Yi,$i=e.id,Xi=e.overflow,Yi=t),t=Vu(t,r.children),t.flags|=4096,t)}(e,t,s,i,r,o,n);if(u){u=i.fallback,s=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&s)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Oc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?u=Oc(r,u):(u=Mc(u,s,n,null)).flags|=2,u.return=t,i.return=t,i.sibling=u,t.child=i,i=u,u=t.child,s=null===(s=e.child.memoizedState)?Fu(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},u.memoizedState=s,u.childLanes=e.childLanes&~n,t.memoizedState=Mu,i}return e=(u=e.child).sibling,i=Oc(u,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Vu(e,t){return(t=Fc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function ju(e,t,n,r){return null!==r&&pa(r),$a(t,e.child,null,n),(e=Vu(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function zu(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),_a(e.return,t,n)}function Bu(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function qu(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(bu(e,t,r.children,n),0!==(2&(r=uo.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&zu(e,n,t);else if(19===e.tag)zu(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Si(uo,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===so(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Bu(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===so(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Bu(t,!0,n,null,a);break;case"together":Bu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ku(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Gu(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Fs|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Oc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Oc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Hu(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Wu(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Qu(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wu(t),null;case 1:case 17:return Ri(t.type)&&Di(),Wu(t),null;case 3:return r=t.stateNode,io(),Ei(Ni),Ei(Ci),lo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(fa(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(uc(aa),aa=null))),Du(e,t),Wu(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Ou(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Wu(t),null}if(e=no(Za.current),fa(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[hi]=t,r[di]=o,e=0!==(1&t.mode),n){case"dialog":Vr("cancel",r),Vr("close",r);break;case"iframe":case"object":case"embed":Vr("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)Vr(Lr[i],r);break;case"source":Vr("error",r);break;case"img":case"image":case"link":Vr("error",r),Vr("load",r);break;case"details":Vr("toggle",r);break;case"input":$(r,o),Vr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Vr("invalid",r);break;case"textarea":ie(r,o),Vr("invalid",r)}for(var s in ge(n,o),i=null,o)if(o.hasOwnProperty(s)){var c=o[s];"children"===s?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",""+c]):u.hasOwnProperty(s)&&null!=c&&"onScroll"===s&&Vr("scroll",r)}switch(n){case"input":H(r),Z(r,o,!0);break;case"textarea":H(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{s=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ue(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),"select"===n&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[hi]=t,e[di]=r,Ru(e,t,!1,!1),t.stateNode=e;e:{switch(s=ke(n,r),n){case"dialog":Vr("cancel",e),Vr("close",e),i=r;break;case"iframe":case"object":case"embed":Vr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)Vr(Lr[i],e);i=r;break;case"source":Vr("error",e),i=r;break;case"img":case"image":case"link":Vr("error",e),Vr("load",e),i=r;break;case"details":Vr("toggle",e),i=r;break;case"input":$(e,r),i=Y(e,r),Vr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),Vr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Vr("invalid",e)}for(o in ge(n,i),c=i)if(c.hasOwnProperty(o)){var l=c[o];"style"===o?me(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&fe(e,l):"children"===o?"string"===typeof l?("textarea"!==n||""!==l)&&he(e,l):"number"===typeof l&&he(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(u.hasOwnProperty(o)?null!=l&&"onScroll"===o&&Vr("scroll",e):null!=l&&k(e,o,l,s))}switch(n){case"input":H(e),Z(e,r,!1);break;case"textarea":H(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+K(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Wu(t),null;case 6:if(e&&null!=t.stateNode)Lu(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=no(to.current),no(Za.current),fa(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(o=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Jr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return Wu(t),null;case 13:if(Ei(uo),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))ha(),da(),t.flags|=98560,o=!1;else if(o=fa(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[hi]=t}else da(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Wu(t),o=!1}else null!==aa&&(uc(aa),aa=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&uo.current)?0===Ls&&(Ls=3):mc())),null!==t.updateQueue&&(t.flags|=4),Wu(t),null);case 4:return io(),Du(e,t),null===e&&Br(t.stateNode.containerInfo),Wu(t),null;case 10:return xa(t.type._context),Wu(t),null;case 19:if(Ei(uo),null===(o=t.memoizedState))return Wu(t),null;if(r=0!==(128&t.flags),null===(s=o.rendering))if(r)Hu(o,!1);else{if(0!==Ls||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=so(e))){for(t.flags|=128,Hu(o,!1),null!==(r=s.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(s=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Si(uo,1&uo.current|2),t.child}e=e.sibling}null!==o.tail&&Xe()>qs&&(t.flags|=128,r=!0,Hu(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=so(s))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Hu(o,!0),null===o.tail&&"hidden"===o.tailMode&&!s.alternate&&!ia)return Wu(t),null}else 2*Xe()-o.renderingStartTime>qs&&1073741824!==n&&(t.flags|=128,r=!0,Hu(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(null!==(n=o.last)?n.sibling=s:t.child=s,o.last=s)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Xe(),t.sibling=null,n=uo.current,Si(uo,r?1&n|2:1&n),t):(Wu(t),null);case 22:case 23:return hc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ds)&&(Wu(t),6&t.subtreeFlags&&(t.flags|=8192)):Wu(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Yu(e,t){switch(ta(t),t.tag){case 1:return Ri(t.type)&&Di(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Ei(Ni),Ei(Ci),lo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Ei(uo),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));da()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ei(uo),null;case 4:return io(),null;case 10:return xa(t.type._context),null;case 22:case 23:return hc(),null;default:return null}}Ru=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Du=function(){},Ou=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no(Za.current);var a,o=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(l in ge(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var s=i[l];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(u.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var c=r[l];if(s=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&c!==s&&(null!=c||null!=s))if("style"===l)if(s){for(a in s)!s.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&s[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,s=s?s.__html:void 0,null!=c&&s!==c&&(o=o||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(u.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&Vr("scroll",e),o||s===c||(o=[])):(o=o||[]).push(l,c))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}},Lu=function(e,t,n,r){n!==r&&(t.flags|=4)};var $u=!1,Xu=!1,Ju="function"===typeof WeakSet?WeakSet:Set,Zu=null;function es(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Ec(e,t,r)}else n.current=null}function ts(e,t,n){try{n()}catch(r){Ec(e,t,r)}}var ns=!1;function rs(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&ts(t,n,a)}i=i.next}while(i!==r)}}function is(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function as(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function os(e){var t=e.alternate;null!==t&&(e.alternate=null,os(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[di],delete t[vi],delete t[mi],delete t[yi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function us(e){return 5===e.tag||3===e.tag||4===e.tag}function ss(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||us(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cs(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(cs(e,t,n),e=e.sibling;null!==e;)cs(e,t,n),e=e.sibling}function ls(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ls(e,t,n),e=e.sibling;null!==e;)ls(e,t,n),e=e.sibling}var fs=null,hs=!1;function ds(e,t,n){for(n=n.child;null!==n;)ps(e,t,n),n=n.sibling}function ps(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(u){}switch(n.tag){case 5:Xu||es(n,t);case 6:var r=fs,i=hs;fs=null,ds(e,t,n),hs=i,null!==(fs=r)&&(hs?(e=fs,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):fs.removeChild(n.stateNode));break;case 18:null!==fs&&(hs?(e=fs,n=n.stateNode,8===e.nodeType?si(e.parentNode,n):1===e.nodeType&&si(e,n),Bt(e)):si(fs,n.stateNode));break;case 4:r=fs,i=hs,fs=n.stateNode.containerInfo,hs=!0,ds(e,t,n),fs=r,hs=i;break;case 0:case 11:case 14:case 15:if(!Xu&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&ts(n,t,o),i=i.next}while(i!==r)}ds(e,t,n);break;case 1:if(!Xu&&(es(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){Ec(n,t,u)}ds(e,t,n);break;case 21:ds(e,t,n);break;case 22:1&n.mode?(Xu=(r=Xu)||null!==n.memoizedState,ds(e,t,n),Xu=r):ds(e,t,n);break;default:ds(e,t,n)}}function vs(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Ju),t.forEach((function(t){var r=Nc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function ms(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,u=t,s=u;e:for(;null!==s;){switch(s.tag){case 5:fs=s.stateNode,hs=!1;break e;case 3:case 4:fs=s.stateNode.containerInfo,hs=!0;break e}s=s.return}if(null===fs)throw Error(a(160));ps(o,u,i),fs=null,hs=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(l){Ec(i,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ys(t,e),t=t.sibling}function ys(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ms(t,e),gs(e),4&r){try{rs(3,e,e.return),is(3,e)}catch(m){Ec(e,e.return,m)}try{rs(5,e,e.return)}catch(m){Ec(e,e.return,m)}}break;case 1:ms(t,e),gs(e),512&r&&null!==n&&es(n,n.return);break;case 5:if(ms(t,e),gs(e),512&r&&null!==n&&es(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(m){Ec(e,e.return,m)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,u=null!==n?n.memoizedProps:o,s=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===s&&"radio"===o.type&&null!=o.name&&X(i,o),ke(s,u);var l=ke(s,o);for(u=0;u<c.length;u+=2){var f=c[u],h=c[u+1];"style"===f?me(i,h):"dangerouslySetInnerHTML"===f?fe(i,h):"children"===f?he(i,h):k(i,f,h,l)}switch(s){case"input":J(i,o);break;case"textarea":ae(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):d!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[di]=o}catch(m){Ec(e,e.return,m)}}break;case 6:if(ms(t,e),gs(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(m){Ec(e,e.return,m)}}break;case 3:if(ms(t,e),gs(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(m){Ec(e,e.return,m)}break;case 4:default:ms(t,e),gs(e);break;case 13:ms(t,e),gs(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(Bs=Xe())),4&r&&vs(e);break;case 22:if(f=null!==n&&null!==n.memoizedState,1&e.mode?(Xu=(l=Xu)||f,ms(t,e),Xu=l):ms(t,e),gs(e),8192&r){if(l=null!==e.memoizedState,(e.stateNode.isHidden=l)&&!f&&0!==(1&e.mode))for(Zu=e,f=e.child;null!==f;){for(h=Zu=f;null!==Zu;){switch(p=(d=Zu).child,d.tag){case 0:case 11:case 14:case 15:rs(4,d,d.return);break;case 1:es(d,d.return);var v=d.stateNode;if("function"===typeof v.componentWillUnmount){r=d,n=d.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(m){Ec(r,n,m)}}break;case 5:es(d,d.return);break;case 22:if(null!==d.memoizedState){xs(h);continue}}null!==p?(p.return=d,Zu=p):xs(h)}f=f.sibling}e:for(f=null,h=e;;){if(5===h.tag){if(null===f){f=h;try{i=h.stateNode,l?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(s=h.stateNode,u=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,s.style.display=ve("display",u))}catch(m){Ec(e,e.return,m)}}}else if(6===h.tag){if(null===f)try{h.stateNode.nodeValue=l?"":h.memoizedProps}catch(m){Ec(e,e.return,m)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;f===h&&(f=null),h=h.return}f===h&&(f=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ms(t,e),gs(e),4&r&&vs(e);case 21:}}function gs(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(us(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),ls(e,ss(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;cs(e,ss(e),o);break;default:throw Error(a(161))}}catch(u){Ec(e,e.return,u)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function ks(e,t,n){Zu=e,ws(e,t,n)}function ws(e,t,n){for(var r=0!==(1&e.mode);null!==Zu;){var i=Zu,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||$u;if(!o){var u=i.alternate,s=null!==u&&null!==u.memoizedState||Xu;u=$u;var c=Xu;if($u=o,(Xu=s)&&!c)for(Zu=i;null!==Zu;)s=(o=Zu).child,22===o.tag&&null!==o.memoizedState?_s(i):null!==s?(s.return=o,Zu=s):_s(i);for(;null!==a;)Zu=a,ws(a,t,n),a=a.sibling;Zu=i,$u=u,Xu=c}bs(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Zu=a):bs(e)}}function bs(e){for(;null!==Zu;){var t=Zu;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Xu||is(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Xu)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ma(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Ua(t,o,r);break;case 3:var u=t.updateQueue;if(null!==u){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Ua(t,u,n)}break;case 5:var s=t.stateNode;if(null===n&&4&t.flags){n=s;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var f=l.memoizedState;if(null!==f){var h=f.dehydrated;null!==h&&Bt(h)}}}break;default:throw Error(a(163))}Xu||512&t.flags&&as(t)}catch(d){Ec(t,t.return,d)}}if(t===e){Zu=null;break}if(null!==(n=t.sibling)){n.return=t.return,Zu=n;break}Zu=t.return}}function xs(e){for(;null!==Zu;){var t=Zu;if(t===e){Zu=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Zu=n;break}Zu=t.return}}function _s(e){for(;null!==Zu;){var t=Zu;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{is(4,t)}catch(s){Ec(t,n,s)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(s){Ec(t,i,s)}}var a=t.return;try{as(t)}catch(s){Ec(t,a,s)}break;case 5:var o=t.return;try{as(t)}catch(s){Ec(t,o,s)}}}catch(s){Ec(t,t.return,s)}if(t===e){Zu=null;break}var u=t.sibling;if(null!==u){u.return=t.return,Zu=u;break}Zu=t.return}}var Is,Es=Math.ceil,Ss=w.ReactCurrentDispatcher,Ts=w.ReactCurrentOwner,Cs=w.ReactCurrentBatchConfig,Ns=0,As=null,Ps=null,Rs=0,Ds=0,Os=Ii(0),Ls=0,Ms=null,Fs=0,Us=0,Vs=0,js=null,zs=null,Bs=0,qs=1/0,Ks=null,Gs=!1,Hs=null,Ws=null,Qs=!1,Ys=null,$s=0,Xs=0,Js=null,Zs=-1,ec=0;function tc(){return 0!==(6&Ns)?Xe():-1!==Zs?Zs:Zs=Xe()}function nc(e){return 0===(1&e.mode)?1:0!==(2&Ns)&&0!==Rs?Rs&-Rs:null!==va.transition?(0===ec&&(ec=vt()),ec):0!==(e=kt)?e:e=void 0===(e=window.event)?16:$t(e.type)}function rc(e,t,n,r){if(50<Xs)throw Xs=0,Js=null,Error(a(185));yt(e,n,r),0!==(2&Ns)&&e===As||(e===As&&(0===(2&Ns)&&(Us|=n),4===Ls&&sc(e,Rs)),ic(e,r),1===n&&0===Ns&&0===(1&t.mode)&&(qs=Xe()+500,Vi&&Bi()))}function ic(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),u=1<<o,s=i[o];-1===s?0!==(u&n)&&0===(u&r)||(i[o]=dt(u,t)):s<=t&&(e.expiredLanes|=u),a&=~u}}(e,t);var r=ht(e,e===As?Rs:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){Vi=!0,zi(e)}(cc.bind(null,e)):zi(cc.bind(null,e)),oi((function(){0===(6&Ns)&&Bi()})),n=null;else{switch(wt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Ac(n,ac.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ac(e,t){if(Zs=-1,ec=0,0!==(6&Ns))throw Error(a(327));var n=e.callbackNode;if(_c()&&e.callbackNode!==n)return null;var r=ht(e,e===As?Rs:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=yc(e,r);else{t=r;var i=Ns;Ns|=2;var o=vc();for(As===e&&Rs===t||(Ks=null,qs=Xe()+500,dc(e,t));;)try{kc();break}catch(s){pc(e,s)}ba(),Ss.current=o,Ns=i,null!==Ps?t=0:(As=null,Rs=0,t=Ls)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=oc(e,i))),1===t)throw n=Ms,dc(e,0),sc(e,r),ic(e,Xe()),n;if(6===t)sc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!ur(a(),i))return!1}catch(u){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=yc(e,r))&&(0!==(o=pt(e))&&(r=o,t=oc(e,o))),1===t))throw n=Ms,dc(e,0),sc(e,r),ic(e,Xe()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:xc(e,zs,Ks);break;case 3:if(sc(e,r),(130023424&r)===r&&10<(t=Bs+500-Xe())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){tc(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(xc.bind(null,e,zs,Ks),t);break}xc(e,zs,Ks);break;case 4:if(sc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var u=31-ot(r);o=1<<u,(u=t[u])>i&&(i=u),r&=~o}if(r=i,10<(r=(120>(r=Xe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Es(r/1960))-r)){e.timeoutHandle=ri(xc.bind(null,e,zs,Ks),r);break}xc(e,zs,Ks);break;default:throw Error(a(329))}}}return ic(e,Xe()),e.callbackNode===n?ac.bind(null,e):null}function oc(e,t){var n=js;return e.current.memoizedState.isDehydrated&&(dc(e,t).flags|=256),2!==(e=yc(e,t))&&(t=zs,zs=n,null!==t&&uc(t)),e}function uc(e){null===zs?zs=e:zs.push.apply(zs,e)}function sc(e,t){for(t&=~Vs,t&=~Us,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function cc(e){if(0!==(6&Ns))throw Error(a(327));_c();var t=ht(e,0);if(0===(1&t))return ic(e,Xe()),null;var n=yc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=oc(e,r))}if(1===n)throw n=Ms,dc(e,0),sc(e,t),ic(e,Xe()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,xc(e,zs,Ks),ic(e,Xe()),null}function lc(e,t){var n=Ns;Ns|=1;try{return e(t)}finally{0===(Ns=n)&&(qs=Xe()+500,Vi&&Bi())}}function fc(e){null!==Ys&&0===Ys.tag&&0===(6&Ns)&&_c();var t=Ns;Ns|=1;var n=Cs.transition,r=kt;try{if(Cs.transition=null,kt=1,e)return e()}finally{kt=r,Cs.transition=n,0===(6&(Ns=t))&&Bi()}}function hc(){Ds=Os.current,Ei(Os)}function dc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Ps)for(n=Ps.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Di();break;case 3:io(),Ei(Ni),Ei(Ci),lo();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Ei(uo);break;case 10:xa(r.type._context);break;case 22:case 23:hc()}n=n.return}if(As=e,Ps=e=Oc(e.current,null),Rs=Ds=t,Ls=0,Ms=null,Vs=Us=Fs=0,zs=js=null,null!==Sa){for(t=0;t<Sa.length;t++)if(null!==(r=(n=Sa[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}Sa=null}return e}function pc(e,t){for(;;){var n=Ps;try{if(ba(),fo.current=ou,go){for(var r=vo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}go=!1}if(po=0,yo=mo=vo=null,ko=!1,wo=0,Ts.current=null,null===n||null===n.return){Ls=1,Ms=t,Ps=null;break}e:{var o=e,u=n.return,s=n,c=t;if(t=Rs,s.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,f=s,h=f.tag;if(0===(1&f.mode)&&(0===h||11===h||15===h)){var d=f.alternate;d?(f.updateQueue=d.updateQueue,f.memoizedState=d.memoizedState,f.lanes=d.lanes):(f.updateQueue=null,f.memoizedState=null)}var p=yu(u);if(null!==p){p.flags&=-257,gu(p,u,s,0,t),1&p.mode&&mu(o,l,t),c=l;var v=(t=p).updateQueue;if(null===v){var m=new Set;m.add(c),t.updateQueue=m}else v.add(c);break e}if(0===(1&t)){mu(o,l,t),mc();break e}c=Error(a(426))}else if(ia&&1&s.mode){var y=yu(u);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),gu(y,u,s,0,t),pa(lu(c,s));break e}}o=c=lu(c,s),4!==Ls&&(Ls=2),null===js?js=[o]:js.push(o),o=u;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,pu(0,c,t));break e;case 1:s=c;var g=o.type,k=o.stateNode;if(0===(128&o.flags)&&("function"===typeof g.getDerivedStateFromError||null!==k&&"function"===typeof k.componentDidCatch&&(null===Ws||!Ws.has(k)))){o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,vu(o,s,t));break e}}o=o.return}while(null!==o)}bc(n)}catch(w){t=w,Ps===n&&null!==n&&(Ps=n=n.return);continue}break}}function vc(){var e=Ss.current;return Ss.current=ou,null===e?ou:e}function mc(){0!==Ls&&3!==Ls&&2!==Ls||(Ls=4),null===As||0===(268435455&Fs)&&0===(268435455&Us)||sc(As,Rs)}function yc(e,t){var n=Ns;Ns|=2;var r=vc();for(As===e&&Rs===t||(Ks=null,dc(e,t));;)try{gc();break}catch(i){pc(e,i)}if(ba(),Ns=n,Ss.current=r,null!==Ps)throw Error(a(261));return As=null,Rs=0,Ls}function gc(){for(;null!==Ps;)wc(Ps)}function kc(){for(;null!==Ps&&!Ye();)wc(Ps)}function wc(e){var t=Is(e.alternate,e,Ds);e.memoizedProps=e.pendingProps,null===t?bc(e):Ps=t,Ts.current=null}function bc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Qu(n,t,Ds)))return void(Ps=n)}else{if(null!==(n=Yu(n,t)))return n.flags&=32767,void(Ps=n);if(null===e)return Ls=6,void(Ps=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Ps=t);Ps=t=e}while(null!==t);0===Ls&&(Ls=5)}function xc(e,t,n){var r=kt,i=Cs.transition;try{Cs.transition=null,kt=1,function(e,t,n,r){do{_c()}while(null!==Ys);if(0!==(6&Ns))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===As&&(Ps=As=null,Rs=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Qs||(Qs=!0,Ac(tt,(function(){return _c(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Cs.transition,Cs.transition=null;var u=kt;kt=1;var s=Ns;Ns|=4,Ts.current=null,function(e,t){if(ei=Kt,dr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(b){n=null;break e}var u=0,s=-1,c=-1,l=0,f=0,h=e,d=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(s=u+i),h!==o||0!==r&&3!==h.nodeType||(c=u+r),3===h.nodeType&&(u+=h.nodeValue.length),null!==(p=h.firstChild);)d=h,h=p;for(;;){if(h===e)break t;if(d===n&&++l===i&&(s=u),d===o&&++f===r&&(c=u),null!==(p=h.nextSibling))break;d=(h=d).parentNode}h=p}n=-1===s||-1===c?null:{start:s,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Kt=!1,Zu=t;null!==Zu;)if(e=(t=Zu).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Zu=e;else for(;null!==Zu;){t=Zu;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var m=v.memoizedProps,y=v.memoizedState,g=t.stateNode,k=g.getSnapshotBeforeUpdate(t.elementType===t.type?m:ma(t.type,m),y);g.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(a(163))}}catch(b){Ec(t,t.return,b)}if(null!==(e=t.sibling)){e.return=t.return,Zu=e;break}Zu=t.return}v=ns,ns=!1}(e,n),ys(n,e),pr(ti),Kt=!!ei,ti=ei=null,e.current=n,ks(n,e,i),$e(),Ns=s,kt=u,Cs.transition=o}else e.current=n;if(Qs&&(Qs=!1,Ys=e,$s=i),o=e.pendingLanes,0===o&&(Ws=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ic(e,Xe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Gs)throw Gs=!1,e=Hs,Hs=null,e;0!==(1&$s)&&0!==e.tag&&_c(),o=e.pendingLanes,0!==(1&o)?e===Js?Xs++:(Xs=0,Js=e):Xs=0,Bi()}(e,t,n,r)}finally{Cs.transition=i,kt=r}return null}function _c(){if(null!==Ys){var e=wt($s),t=Cs.transition,n=kt;try{if(Cs.transition=null,kt=16>e?16:e,null===Ys)var r=!1;else{if(e=Ys,Ys=null,$s=0,0!==(6&Ns))throw Error(a(331));var i=Ns;for(Ns|=4,Zu=e.current;null!==Zu;){var o=Zu,u=o.child;if(0!==(16&Zu.flags)){var s=o.deletions;if(null!==s){for(var c=0;c<s.length;c++){var l=s[c];for(Zu=l;null!==Zu;){var f=Zu;switch(f.tag){case 0:case 11:case 15:rs(8,f,o)}var h=f.child;if(null!==h)h.return=f,Zu=h;else for(;null!==Zu;){var d=(f=Zu).sibling,p=f.return;if(os(f),f===l){Zu=null;break}if(null!==d){d.return=p,Zu=d;break}Zu=p}}}var v=o.alternate;if(null!==v){var m=v.child;if(null!==m){v.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(null!==m)}}Zu=o}}if(0!==(2064&o.subtreeFlags)&&null!==u)u.return=o,Zu=u;else e:for(;null!==Zu;){if(0!==(2048&(o=Zu).flags))switch(o.tag){case 0:case 11:case 15:rs(9,o,o.return)}var g=o.sibling;if(null!==g){g.return=o.return,Zu=g;break e}Zu=o.return}}var k=e.current;for(Zu=k;null!==Zu;){var w=(u=Zu).child;if(0!==(2064&u.subtreeFlags)&&null!==w)w.return=u,Zu=w;else e:for(u=k;null!==Zu;){if(0!==(2048&(s=Zu).flags))try{switch(s.tag){case 0:case 11:case 15:is(9,s)}}catch(x){Ec(s,s.return,x)}if(s===u){Zu=null;break e}var b=s.sibling;if(null!==b){b.return=s.return,Zu=b;break e}Zu=s.return}}if(Ns=i,Bi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(x){}r=!0}return r}finally{kt=n,Cs.transition=t}}return!1}function Ic(e,t,n){e=Oa(e,t=pu(0,t=lu(n,t),1),1),t=tc(),null!==e&&(yt(e,1,t),ic(e,t))}function Ec(e,t,n){if(3===e.tag)Ic(e,e,n);else for(;null!==t;){if(3===t.tag){Ic(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Ws||!Ws.has(r))){t=Oa(t,e=vu(t,e=lu(n,e),1),1),e=tc(),null!==t&&(yt(t,1,e),ic(t,e));break}}t=t.return}}function Sc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tc(),e.pingedLanes|=e.suspendedLanes&n,As===e&&(Rs&n)===n&&(4===Ls||3===Ls&&(130023424&Rs)===Rs&&500>Xe()-Bs?dc(e,0):Vs|=n),ic(e,t)}function Tc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=tc();null!==(e=Na(e,t))&&(yt(e,t,n),ic(e,n))}function Cc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Tc(e,n)}function Nc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Tc(e,n)}function Ac(e,t){return We(e,t)}function Pc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rc(e,t,n,r){return new Pc(e,t,n,r)}function Dc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Oc(e,t){var n=e.alternate;return null===n?((n=Rc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Lc(e,t,n,r,i,o){var u=2;if(r=e,"function"===typeof e)Dc(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case _:return Mc(n.children,i,o,t);case I:u=8,i|=8;break;case E:return(e=Rc(12,n,t,2|i)).elementType=E,e.lanes=o,e;case N:return(e=Rc(13,n,t,i)).elementType=N,e.lanes=o,e;case A:return(e=Rc(19,n,t,i)).elementType=A,e.lanes=o,e;case D:return Fc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case S:u=10;break e;case T:u=9;break e;case C:u=11;break e;case P:u=14;break e;case R:u=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Rc(u,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Mc(e,t,n,r){return(e=Rc(7,e,r,t)).lanes=n,e}function Fc(e,t,n,r){return(e=Rc(22,e,r,t)).elementType=D,e.lanes=n,e.stateNode={isHidden:!1},e}function Uc(e,t,n){return(e=Rc(6,e,null,t)).lanes=n,e}function Vc(e,t,n){return(t=Rc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function jc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function zc(e,t,n,r,i,a,o,u,s){return e=new jc(e,t,n,u,s),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Rc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Pa(a),e}function Bc(e){if(!e)return Ti;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ri(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Ri(n))return Li(e,n,t)}return t}function qc(e,t,n,r,i,a,o,u,s){return(e=zc(n,r,!0,e,0,a,0,u,s)).context=Bc(null),n=e.current,(a=Da(r=tc(),i=nc(n))).callback=void 0!==t&&null!==t?t:null,Oa(n,a,i),e.current.lanes=i,yt(e,i,r),ic(e,r),e}function Kc(e,t,n,r){var i=t.current,a=tc(),o=nc(i);return n=Bc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Da(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Oa(i,t,o))&&(rc(e,i,o,a),La(e,i,o)),o}function Gc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Hc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Wc(e,t){Hc(e,t),(e=e.alternate)&&Hc(e,t)}Is=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ni.current)wu=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return wu=!1,function(e,t,n){switch(t.tag){case 3:Au(t),da();break;case 5:ao(t);break;case 1:Ri(t.type)&&Mi(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Si(ya,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Si(uo,1&uo.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Uu(e,t,n):(Si(uo,1&uo.current),null!==(e=Gu(e,t,n))?e.sibling:null);Si(uo,1&uo.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return qu(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Si(uo,uo.current),r)break;return null;case 22:case 23:return t.lanes=0,Eu(e,t,n)}return Gu(e,t,n)}(e,t,n);wu=0!==(131072&e.flags)}else wu=!1,ia&&0!==(1048576&t.flags)&&Zi(t,Hi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ku(e,t),e=t.pendingProps;var i=Pi(t,Ci.current);Ia(t,n),i=Io(null,t,r,e,i,n);var o=Eo();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ri(r)?(o=!0,Mi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Pa(t),i.updater=za,t.stateNode=i,i._reactInternals=t,Ga(t,r,e,n),t=Nu(null,t,r,!0,o,n)):(t.tag=0,ia&&o&&ea(t),bu(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ku(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Dc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===P)return 14}return 2}(r),e=ma(r,e),i){case 0:t=Tu(null,t,r,e,n);break e;case 1:t=Cu(null,t,r,e,n);break e;case 11:t=xu(null,t,r,e,n);break e;case 14:t=_u(null,t,r,ma(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Tu(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 1:return r=t.type,i=t.pendingProps,Cu(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 3:e:{if(Au(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,Ra(e,t),Fa(t,r,null,n);var u=t.memoizedState;if(r=u.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Pu(e,t,r,n,i=lu(Error(a(423)),t));break e}if(r!==i){t=Pu(e,t,r,n,i=lu(Error(a(424)),t));break e}for(ra=ci(t.stateNode.containerInfo.firstChild),na=t,ia=!0,aa=null,n=Xa(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(da(),r===i){t=Gu(e,t,n);break e}bu(e,t,r,n)}t=t.child}return t;case 5:return ao(t),null===e&&ca(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,u=i.children,ni(r,i)?u=null:null!==o&&ni(r,o)&&(t.flags|=32),Su(e,t),bu(e,t,u,n),t.child;case 6:return null===e&&ca(t),null;case 13:return Uu(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=$a(t,null,r,n):bu(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,xu(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 7:return bu(e,t,t.pendingProps,n),t.child;case 8:case 12:return bu(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,u=i.value,Si(ya,r._currentValue),r._currentValue=u,null!==o)if(ur(o.value,u)){if(o.children===i.children&&!Ni.current){t=Gu(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var s=o.dependencies;if(null!==s){u=o.child;for(var c=s.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Da(-1,n&-n)).tag=2;var l=o.updateQueue;if(null!==l){var f=(l=l.shared).pending;null===f?c.next=c:(c.next=f.next,f.next=c),l.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),_a(o.return,n,t),s.lanes|=n;break}c=c.next}}else if(10===o.tag)u=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(u=o.return))throw Error(a(341));u.lanes|=n,null!==(s=u.alternate)&&(s.lanes|=n),_a(u,n,t),u=o.sibling}else u=o.child;if(null!==u)u.return=o;else for(u=o;null!==u;){if(u===t){u=null;break}if(null!==(o=u.sibling)){o.return=u.return,u=o;break}u=u.return}o=u}bu(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ia(t,n),r=r(i=Ea(i)),t.flags|=1,bu(e,t,r,n),t.child;case 14:return i=ma(r=t.type,t.pendingProps),_u(e,t,r,i=ma(r.type,i),n);case 15:return Iu(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ma(r,i),Ku(e,t),t.tag=1,Ri(r)?(e=!0,Mi(t)):e=!1,Ia(t,n),qa(t,r,i),Ga(t,r,i,n),Nu(null,t,r,!0,e,n);case 19:return qu(e,t,n);case 22:return Eu(e,t,n)}throw Error(a(156,t.tag))};var Qc="function"===typeof reportError?reportError:function(e){console.error(e)};function Yc(e){this._internalRoot=e}function $c(e){this._internalRoot=e}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function el(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var u=i;i=function(){var e=Gc(o);u.call(e)}}Kc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Gc(o);a.call(e)}}var o=qc(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=o,e[pi]=o.current,Br(8===e.nodeType?e.parentNode:e),fc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var u=r;r=function(){var e=Gc(s);u.call(e)}}var s=zc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=s,e[pi]=s.current,Br(8===e.nodeType?e.parentNode:e),fc((function(){Kc(t,s,n,r)})),s}(n,t,e,i,r);return Gc(o)}$c.prototype.render=Yc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Kc(e,t,null,null)},$c.prototype.unmount=Yc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;fc((function(){Kc(null,e,null,null)})),t[pi]=null}},$c.prototype.unstable_scheduleHydration=function(e){if(e){var t=It();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Dt.length&&0!==t&&t<Dt[n].priority;n++);Dt.splice(n,0,e),0===n&&Ft(e)}},bt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ft(t.pendingLanes);0!==n&&(gt(t,1|n),ic(t,Xe()),0===(6&Ns)&&(qs=Xe()+500,Bi()))}break;case 13:fc((function(){var t=Na(e,1);if(null!==t){var n=tc();rc(t,e,1,n)}})),Wc(e,1)}},xt=function(e){if(13===e.tag){var t=Na(e,134217728);if(null!==t)rc(t,e,134217728,tc());Wc(e,134217728)}},_t=function(e){if(13===e.tag){var t=nc(e),n=Na(e,t);if(null!==n)rc(n,e,t,tc());Wc(e,t)}},It=function(){return kt},Et=function(e,t){var n=kt;try{return kt=e,t()}finally{kt=n}},xe=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=bi(r);if(!i)throw Error(a(90));W(r),J(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=lc,Ne=fc;var tl={usingClientEntryPoint:!1,Events:[ki,wi,bi,Se,Te,lc]},nl={findFiberByHostInstance:gi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rl={bundleType:nl.bundleType,version:nl.version,rendererPackageName:nl.rendererPackageName,rendererConfig:nl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ge(e))?null:e.stateNode},findFiberByHostInstance:nl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var il=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!il.isDisabled&&il.supportsFiber)try{it=il.inject(rl),at=il}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Xc(t))throw Error(a(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:x,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Xc(e))throw Error(a(299));var n=!1,r="",i=Qc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=zc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,Br(8===e.nodeType?e.parentNode:e),new Yc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=Ge(t))?null:e.stateNode},t.flushSync=function(e){return fc(e)},t.hydrate=function(e,t,n){if(!Jc(t))throw Error(a(200));return el(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Xc(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",u=Qc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(u=n.onRecoverableError)),t=qc(t,null,e,1,null!=n?n:null,i,0,o,u),e[pi]=t.current,Br(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new $c(t)},t.render=function(e,t,n){if(!Jc(t))throw Error(a(200));return el(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Jc(e))throw Error(a(40));return!!e._reactRootContainer&&(fc((function(){el(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=lc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Jc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return el(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},250:function(e,t,n){var r=n(164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},164:function(e,t,n){!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},374:function(e,t,n){var r=n(791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,u=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)o.call(t,r)&&!s.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:u.current}}t.Fragment=a,t.jsx=c,t.jsxs=c},117:function(e,t){var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),s=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),d=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,m={};function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function g(){}function k(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=y.prototype;var w=k.prototype=new g;w.constructor=k,v(w,y.prototype),w.isPureReactComponent=!0;var b=Array.isArray,x=Object.prototype.hasOwnProperty,_={current:null},I={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,r){var i,a={},o=null,u=null;if(null!=t)for(i in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)x.call(t,i)&&!I.hasOwnProperty(i)&&(a[i]=t[i]);var s=arguments.length-2;if(1===s)a.children=r;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(i in s=e.defaultProps)void 0===a[i]&&(a[i]=s[i]);return{$$typeof:n,type:e,key:o,ref:u,props:a,_owner:_.current}}function S(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function N(e,t,i,a,o){var u=typeof e;"undefined"!==u&&"boolean"!==u||(e=null);var s=!1;if(null===e)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case n:case r:s=!0}}if(s)return o=o(s=e),e=""===a?"."+C(s,0):a,b(o)?(i="",null!=e&&(i=e.replace(T,"$&/")+"/"),N(o,t,i,"",(function(e){return e}))):null!=o&&(S(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(T,"$&/")+"/")+e)),t.push(o)),1;if(s=0,a=""===a?".":a+":",b(e))for(var c=0;c<e.length;c++){var l=a+C(u=e[c],c);s+=N(u,t,i,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(u=e.next()).done;)s+=N(u=u.value,t,i,l=a+C(u,c++),o);else if("object"===u)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function A(e,t,n){if(null==e)return e;var r=[],i=0;return N(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function P(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R={current:null},D={transition:null},O={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:D,ReactCurrentOwner:_};t.Children={map:A,forEach:function(e,t,n){A(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return A(e,(function(){t++})),t},toArray:function(e){return A(e,(function(e){return e}))||[]},only:function(e){if(!S(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=o,t.PureComponent=k,t.StrictMode=a,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),a=e.key,o=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,u=_.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(c in t)x.call(t,c)&&!I.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==s?s[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){s=Array(c);for(var l=0;l<c;l++)s[l]=arguments[l+2];i.children=s}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:u}},t.createContext=function(e){return(e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:u,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=S,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=D.transition;D.transition={};try{e()}finally{D.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return R.current.useCallback(e,t)},t.useContext=function(e){return R.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return R.current.useDeferredValue(e)},t.useEffect=function(e,t){return R.current.useEffect(e,t)},t.useId=function(){return R.current.useId()},t.useImperativeHandle=function(e,t,n){return R.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return R.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return R.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return R.current.useMemo(e,t)},t.useReducer=function(e,t,n){return R.current.useReducer(e,t,n)},t.useRef=function(e){return R.current.useRef(e)},t.useState=function(e){return R.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return R.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return R.current.useTransition()},t.version="18.2.0"},791:function(e,t,n){e.exports=n(117)},184:function(e,t,n){e.exports=n(374)},813:function(e,t){function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var u=2*(r+1)-1,s=e[u],c=u+1,l=e[c];if(0>a(s,n))c<i&&0>a(l,s)?(e[r]=l,e[c]=n,r=c):(e[r]=s,e[u]=n,r=u);else{if(!(c<i&&0>a(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,s=u.now();t.unstable_now=function(){return u.now()-s}}var c=[],l=[],f=1,h=null,d=3,p=!1,v=!1,m=!1,y="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,k="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(l);null!==t;){if(null===t.callback)i(l);else{if(!(t.startTime<=e))break;i(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function b(e){if(m=!1,w(e),!v)if(null!==r(c))v=!0,D(x);else{var t=r(l);null!==t&&O(b,t.startTime-e)}}function x(e,n){v=!1,m&&(m=!1,g(S),S=-1),p=!0;var a=d;try{for(w(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!N());){var o=h.callback;if("function"===typeof o){h.callback=null,d=h.priorityLevel;var u=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?h.callback=u:h===r(c)&&i(c),w(n)}else i(c);h=r(c)}if(null!==h)var s=!0;else{var f=r(l);null!==f&&O(b,f.startTime-n),s=!1}return s}finally{h=null,d=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var _,I=!1,E=null,S=-1,T=5,C=-1;function N(){return!(t.unstable_now()-C<T)}function A(){if(null!==E){var e=t.unstable_now();C=e;var n=!0;try{n=E(!0,e)}finally{n?_():(I=!1,E=null)}}else I=!1}if("function"===typeof k)_=function(){k(A)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,R=P.port2;P.port1.onmessage=A,_=function(){R.postMessage(null)}}else _=function(){y(A,0)};function D(e){E=e,I||(I=!0,_())}function O(e,n){S=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,D(x))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:f++,callback:i,priorityLevel:e,startTime:a,expirationTime:u=a+u,sortIndex:-1},a>o?(e.sortIndex=a,n(l,e),null===r(c)&&e===r(l)&&(m?(g(S),S=-1):m=!0,O(b,a-o))):(e.sortIndex=u,n(c,e),v||p||(v=!0,D(x))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},296:function(e,t,n){e.exports=n(813)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.m=e,function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var a=Object.create(null);n.r(a);var o={};e=e||[null,t({}),t([]),t(t)];for(var u=2&i&&r;"object"==typeof u&&!~e.indexOf(u);u=t(u))Object.getOwnPropertyNames(u).forEach((function(e){o[e]=function(){return r[e]}}));return o.default=function(){return r},n.d(a,o),a}}(),n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,r){return n.f[r](e,t),t}),[]))},n.u=function(e){return"static/js/"+e+".8a220983.chunk.js"},n.miniCssF=function(e){},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="travel:";n.l=function(r,i,a,o){if(e[r])e[r].push(i);else{var u,s;if(void 0!==a)for(var c=document.getElementsByTagName("script"),l=0;l<c.length;l++){var f=c[l];if(f.getAttribute("src")==r||f.getAttribute("data-webpack")==t+a){u=f;break}}u||(s=!0,(u=document.createElement("script")).charset="utf-8",u.timeout=120,n.nc&&u.setAttribute("nonce",n.nc),u.setAttribute("data-webpack",t+a),u.src=r),e[r]=[i];var h=function(t,n){u.onerror=u.onload=null,clearTimeout(d);var i=e[r];if(delete e[r],u.parentNode&&u.parentNode.removeChild(u),i&&i.forEach((function(e){return e(n)})),t)return t(n)},d=setTimeout(h.bind(null,void 0,{type:"timeout",target:u}),12e4);u.onerror=h.bind(null,u.onerror),u.onload=h.bind(null,u.onload),s&&document.head.appendChild(u)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/",function(){var e={179:0};n.f.j=function(t,r){var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var a=new Promise((function(n,r){i=e[t]=[n,r]}));r.push(i[2]=a);var o=n.p+n.u(t),u=new Error;n.l(o,(function(r){if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var a=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;u.message="Loading chunk "+t+" failed.\n("+a+": "+o+")",u.name="ChunkLoadError",u.type=a,u.request=o,i[1](u)}}),"chunk-"+t,t)}};var t=function(t,r){var i,a,o=r[0],u=r[1],s=r[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(i in u)n.o(u,i)&&(n.m[i]=u[i]);if(s)s(n)}for(t&&t(r);c<o.length;c++)a=o[c],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0},r=self.webpackChunktravel=self.webpackChunktravel||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}(),function(){var e={};n.r(e),n.d(e,{FirebaseError:function(){return dt},SDK_VERSION:function(){return Tn},_DEFAULT_ENTRY_NAME:function(){return pn},_addComponent:function(){return gn},_addOrOverwriteComponent:function(){return kn},_apps:function(){return mn},_clearComponents:function(){return _n},_components:function(){return yn},_getProvider:function(){return bn},_registerComponent:function(){return wn},_removeServiceInstance:function(){return xn},deleteApp:function(){return Pn},getApp:function(){return Nn},getApps:function(){return An},initializeApp:function(){return Cn},onLog:function(){return On},registerVersion:function(){return Dn},setLogLevel:function(){return Ln}});var t,r=n(791),i=n.t(r,2),a=n(250);function o(e){if(Array.isArray(e))return e}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t){if(e){if("string"===typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}function c(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(e,t){return o(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,u=[],s=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=a.call(n)).done)&&(u.push(r.value),u.length!==t);s=!0);}catch(l){c=!0,i=l}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return u}}(e,t)||s(e,t)||c()}function f(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function h(e){return function(e){if(Array.isArray(e))return u(e)}(e)||f(e)||s(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function v(e){var t=function(e,t){if("object"!==p(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==p(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===p(t)?t:String(t)}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,v(r.key),r)}}function y(e,t,n){return t&&m(e.prototype,t),n&&m(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function g(e,t){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},g(e,t)}function k(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}function w(e){return w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},w(e)}function b(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function x(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e){var t=b();return function(){var n,r=w(e);if(t){var i=w(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===p(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return x(e)}(this,n)}}function I(e,t,n){return I=b()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&g(i,n.prototype),i},I.apply(null,arguments)}function E(e){var t="function"===typeof Map?new Map:void 0;return E=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return I(e,arguments,w(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),g(r,e)},E(e)}function S(e){return o(e)||f(e)||s(e)||c()}function T(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=s(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function C(){return C=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},C.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(t||(t={}));var N,A="popstate";function P(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function R(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function D(e,t){return{usr:e.state,key:e.key,idx:t}}function O(e,t,n,r){return void 0===n&&(n=null),C({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?M(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function L(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,i=void 0===r?"":r,a=e.hash,o=void 0===a?"":a;return i&&"?"!==i&&(n+="?"===i.charAt(0)?i:"?"+i),o&&"#"!==o&&(n+="#"===o.charAt(0)?o:"#"+o),n}function M(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function F(e,n,r,i){void 0===i&&(i={});var a=i,o=a.window,u=void 0===o?document.defaultView:o,s=a.v5Compat,c=void 0!==s&&s,l=u.history,f=t.Pop,h=null,d=p();function p(){return(l.state||{idx:null}).idx}function v(){f=t.Pop;var e=p(),n=null==e?null:e-d;d=e,h&&h({action:f,location:y.location,delta:n})}function m(e){var t="null"!==u.location.origin?u.location.origin:u.location.href,n="string"===typeof e?e:L(e);return P(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==d&&(d=0,l.replaceState(C({},l.state,{idx:d}),""));var y={get action(){return f},get location(){return e(u,l)},listen:function(e){if(h)throw new Error("A history only accepts one active listener");return u.addEventListener(A,v),h=e,function(){u.removeEventListener(A,v),h=null}},createHref:function(e){return n(u,e)},createURL:m,encodeLocation:function(e){var t=m(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,n){f=t.Push;var i=O(y.location,e,n);r&&r(i,e);var a=D(i,d=p()+1),o=y.createHref(i);try{l.pushState(a,"",o)}catch(s){if(s instanceof DOMException&&"DataCloneError"===s.name)throw s;u.location.assign(o)}c&&h&&h({action:f,location:y.location,delta:1})},replace:function(e,n){f=t.Replace;var i=O(y.location,e,n);r&&r(i,e);var a=D(i,d=p()),o=y.createHref(i);l.replaceState(a,"",o),c&&h&&h({action:f,location:y.location,delta:0})},go:function(e){return l.go(e)}};return y}!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(N||(N={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function U(e,t,n){void 0===n&&(n="/");var r=J(("string"===typeof t?M(t):t).pathname||"/",n);if(null==r)return null;var i=V(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(i);for(var a=null,o=0;null==a&&o<i.length;++o)a=Y(i[o],X(r));return a}function V(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");var i=function(e,i,a){var o={relativePath:void 0===a?e.path||"":a,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};o.relativePath.startsWith("/")&&(P(o.relativePath.startsWith(r),'Absolute route path "'+o.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(r.length));var u=ne([r,o.relativePath]),s=n.concat(o);e.children&&e.children.length>0&&(P(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+u+'".'),V(e.children,t,s,u)),(null!=e.path||e.index)&&t.push({path:u,score:Q(u,e.index),routesMeta:s})};return e.forEach((function(e,t){var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?")){var r,a=T(j(e.path));try{for(a.s();!(r=a.n()).done;){var o=r.value;i(e,t,o)}}catch(u){a.e(u)}finally{a.f()}}else i(e,t)})),t}function j(e){var t=e.split("/");if(0===t.length)return[];var n=S(t),r=n[0],i=n.slice(1),a=r.endsWith("?"),o=r.replace(/\?$/,"");if(0===i.length)return a?[o,""]:[o];var u=j(i.join("/")),s=[];return s.push.apply(s,h(u.map((function(e){return""===e?o:[o,e].join("/")})))),a&&s.push.apply(s,h(u)),s.map((function(t){return e.startsWith("/")&&""===t?"/":t}))}var z=/^:\w+$/,B=3,q=2,K=1,G=10,H=-2,W=function(e){return"*"===e};function Q(e,t){var n=e.split("/"),r=n.length;return n.some(W)&&(r+=H),t&&(r+=q),n.filter((function(e){return!W(e)})).reduce((function(e,t){return e+(z.test(t)?B:""===t?K:G)}),r)}function Y(e,t){for(var n=e.routesMeta,r={},i="/",a=[],o=0;o<n.length;++o){var u=n[o],s=o===n.length-1,c="/"===i?t:t.slice(i.length)||"/",l=$({path:u.relativePath,caseSensitive:u.caseSensitive,end:s},c);if(!l)return null;Object.assign(r,l.params);var f=u.route;a.push({params:r,pathname:ne([i,l.pathname]),pathnameBase:re(ne([i,l.pathnameBase])),route:f}),"/"!==l.pathnameBase&&(i=ne([i,l.pathnameBase]))}return a}function $(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);R("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');var r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(function(e,t){return r.push(t),"/([^\\/]+)"}));e.endsWith("*")?(r.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");var a=new RegExp(i,t?void 0:"i");return[a,r]}(e.path,e.caseSensitive,e.end),r=l(n,2),i=r[0],a=r[1],o=t.match(i);if(!o)return null;var u=o[0],s=u.replace(/(.)\/+$/,"$1"),c=o.slice(1);return{params:a.reduce((function(e,t,n){if("*"===t){var r=c[n]||"";s=u.slice(0,u.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(n){return R(!1,'The value for the URL param "'+t+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+n+")."),e}}(c[n]||"",t),e}),{}),pathname:u,pathnameBase:s,pattern:e}}function X(e){try{return decodeURI(e)}catch(t){return R(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function J(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function Z(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function ee(e){return e.filter((function(e,t){return 0===t||e.route.path&&e.route.path.length>0}))}function te(e,t,n,r){var i;void 0===r&&(r=!1),"string"===typeof e?i=M(e):(P(!(i=C({},e)).pathname||!i.pathname.includes("?"),Z("?","pathname","search",i)),P(!i.pathname||!i.pathname.includes("#"),Z("#","pathname","hash",i)),P(!i.search||!i.search.includes("#"),Z("#","search","hash",i)));var a,o=""===e||""===i.pathname,u=o?"/":i.pathname;if(r||null==u)a=n;else{var s=t.length-1;if(u.startsWith("..")){for(var c=u.split("/");".."===c[0];)c.shift(),s-=1;i.pathname=c.join("/")}a=s>=0?t[s]:"/"}var l=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?M(e):e,r=n.pathname,i=n.search,a=void 0===i?"":i,o=n.hash,u=void 0===o?"":o,s=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:s,search:ie(a),hash:ae(u)}}(i,a),f=u&&"/"!==u&&u.endsWith("/"),h=(o||"."===u)&&n.endsWith("/");return l.pathname.endsWith("/")||!f&&!h||(l.pathname+="/"),l}var ne=function(e){return e.join("/").replace(/\/\/+/g,"/")},re=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},ie=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},ae=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""},oe=function(e){k(n,e);var t=_(n);function n(){return d(this,n),t.apply(this,arguments)}return y(n)}(E(Error));function ue(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}var se=["post","put","patch","delete"],ce=(new Set(se),["get"].concat(se));new Set(ce),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function le(){return le=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},le.apply(this,arguments)}var fe=r.createContext(null);var he=r.createContext(null);var de=r.createContext(null);var pe=r.createContext(null);var ve=r.createContext(null);var me=r.createContext({outlet:null,matches:[],isDataRoute:!1});var ye=r.createContext(null);function ge(){return null!=r.useContext(ve)}function ke(){return ge()||P(!1),r.useContext(ve).location}function we(e){r.useContext(pe).static||r.useLayoutEffect(e)}function be(){return r.useContext(me).isDataRoute?function(){var e=Pe(Ne.UseNavigateStable).router,t=De(Ae.UseNavigateStable),n=r.useRef(!1);we((function(){n.current=!0}));var i=r.useCallback((function(r,i){void 0===i&&(i={}),n.current&&("number"===typeof r?e.navigate(r):e.navigate(r,le({fromRouteId:t},i)))}),[e,t]);return i}():function(){ge()||P(!1);var e=r.useContext(fe),t=r.useContext(pe),n=t.basename,i=t.navigator,a=r.useContext(me).matches,o=ke().pathname,u=JSON.stringify(ee(a).map((function(e){return e.pathnameBase}))),s=r.useRef(!1);return we((function(){s.current=!0})),r.useCallback((function(t,r){if(void 0===r&&(r={}),s.current)if("number"!==typeof t){var a=te(t,JSON.parse(u),o,"path"===r.relative);null==e&&"/"!==n&&(a.pathname="/"===a.pathname?n:ne([n,a.pathname])),(r.replace?i.replace:i.push)(a,r.state,r)}else i.go(t)}),[n,i,u,o,e])}()}function xe(e,t){var n=(void 0===t?{}:t).relative,i=r.useContext(me).matches,a=ke().pathname,o=JSON.stringify(ee(i).map((function(e){return e.pathnameBase})));return r.useMemo((function(){return te(e,JSON.parse(o),a,"path"===n)}),[e,o,a,n])}function _e(e,n,i){ge()||P(!1);var a,o=r.useContext(pe).navigator,u=r.useContext(me).matches,s=u[u.length-1],c=s?s.params:{},l=(s&&s.pathname,s?s.pathnameBase:"/"),f=(s&&s.route,ke());if(n){var h,d="string"===typeof n?M(n):n;"/"===l||(null==(h=d.pathname)?void 0:h.startsWith(l))||P(!1),a=d}else a=f;var p=a.pathname||"/",v=U(e,{pathname:"/"===l?p:p.slice(l.length)||"/"});var m=Ce(v&&v.map((function(e){return Object.assign({},e,{params:Object.assign({},c,e.params),pathname:ne([l,o.encodeLocation?o.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?l:ne([l,o.encodeLocation?o.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})})),u,i);return n&&m?r.createElement(ve.Provider,{value:{location:le({pathname:"/",search:"",hash:"",state:null,key:"default"},a),navigationType:t.Pop}},m):m}function Ie(){var e=function(){var e,t=r.useContext(ye),n=Re(Ae.UseRouteError),i=De(Ae.UseRouteError);if(t)return t;return null==(e=n.errors)?void 0:e[i]}(),t=ue(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i};return r.createElement(r.Fragment,null,r.createElement("h2",null,"Unexpected Application Error!"),r.createElement("h3",{style:{fontStyle:"italic"}},t),n?r.createElement("pre",{style:a},n):null,null)}var Ee=r.createElement(Ie,null),Se=function(e){k(n,e);var t=_(n);function n(e){var r;return d(this,n),(r=t.call(this,e)).state={location:e.location,revalidation:e.revalidation,error:e.error},r}return y(n,[{key:"componentDidCatch",value:function(e,t){console.error("React Router caught the following error during render",e,t)}},{key:"render",value:function(){return this.state.error?r.createElement(me.Provider,{value:this.props.routeContext},r.createElement(ye.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{error:e}}},{key:"getDerivedStateFromProps",value:function(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error||t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}}]),n}(r.Component);function Te(e){var t=e.routeContext,n=e.match,i=e.children,a=r.useContext(fe);return a&&a.static&&a.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=n.route.id),r.createElement(me.Provider,{value:t},i)}function Ce(e,t,n){var i;if(void 0===t&&(t=[]),void 0===n&&(n=null),null==e){var a;if(null==(a=n)||!a.errors)return null;e=n.matches}var o=e,u=null==(i=n)?void 0:i.errors;if(null!=u){var s=o.findIndex((function(e){return e.route.id&&(null==u?void 0:u[e.route.id])}));s>=0||P(!1),o=o.slice(0,Math.min(o.length,s+1))}return o.reduceRight((function(e,i,a){var s=i.route.id?null==u?void 0:u[i.route.id]:null,c=null;n&&(c=i.route.errorElement||Ee);var l=t.concat(o.slice(0,a+1)),f=function(){var t;return t=s?c:i.route.Component?r.createElement(i.route.Component,null):i.route.element?i.route.element:e,r.createElement(Te,{match:i,routeContext:{outlet:e,matches:l,isDataRoute:null!=n},children:t})};return n&&(i.route.ErrorBoundary||i.route.errorElement||0===a)?r.createElement(Se,{location:n.location,revalidation:n.revalidation,component:c,error:s,children:f(),routeContext:{outlet:null,matches:l,isDataRoute:!0}}):f()}),null)}var Ne=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Ne||{}),Ae=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Ae||{});function Pe(e){var t=r.useContext(fe);return t||P(!1),t}function Re(e){var t=r.useContext(he);return t||P(!1),t}function De(e){var t=function(e){var t=r.useContext(me);return t||P(!1),t}(),n=t.matches[t.matches.length-1];return n.route.id||P(!1),n.route.id}i.startTransition;function Oe(e){P(!1)}function Le(e){var n=e.basename,i=void 0===n?"/":n,a=e.children,o=void 0===a?null:a,u=e.location,s=e.navigationType,c=void 0===s?t.Pop:s,l=e.navigator,f=e.static,h=void 0!==f&&f;ge()&&P(!1);var d=i.replace(/^\/*/,"/"),p=r.useMemo((function(){return{basename:d,navigator:l,static:h}}),[d,l,h]);"string"===typeof u&&(u=M(u));var v=u,m=v.pathname,y=void 0===m?"/":m,g=v.search,k=void 0===g?"":g,w=v.hash,b=void 0===w?"":w,x=v.state,_=void 0===x?null:x,I=v.key,E=void 0===I?"default":I,S=r.useMemo((function(){var e=J(y,d);return null==e?null:{location:{pathname:e,search:k,hash:b,state:_,key:E},navigationType:c}}),[d,y,k,b,_,E,c]);return null==S?null:r.createElement(pe.Provider,{value:p},r.createElement(ve.Provider,{children:o,value:S}))}function Me(e){var t=e.children,n=e.location;return _e(Ve(t),n)}var Fe=function(e){return e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error",e}(Fe||{}),Ue=new Promise((function(){}));r.Component;function Ve(e,t){void 0===t&&(t=[]);var n=[];return r.Children.forEach(e,(function(e,i){if(r.isValidElement(e)){var a=[].concat(h(t),[i]);if(e.type!==r.Fragment){e.type!==Oe&&P(!1),e.props.index&&e.props.children&&P(!1);var o={id:e.props.id||a.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=Ve(e.props.children,a)),n.push(o)}else n.push.apply(n,Ve(e.props.children,a))}})),n}function je(){return je=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},je.apply(this,arguments)}function ze(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);var Be=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"];var qe=i.startTransition;function Ke(e){var t,n=e.basename,i=e.children,a=e.future,o=e.window,u=r.useRef();null==u.current&&(u.current=(void 0===(t={window:o,v5Compat:!0})&&(t={}),F((function(e,t){var n=e.location;return O("",{pathname:n.pathname,search:n.search,hash:n.hash},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:L(t)}),null,t)));var s=u.current,c=l(r.useState({action:s.action,location:s.location}),2),f=c[0],h=c[1],d=(a||{}).v7_startTransition,p=r.useCallback((function(e){d&&qe?qe((function(){return h(e)})):h(e)}),[h,d]);return r.useLayoutEffect((function(){return s.listen(p)}),[s,p]),r.createElement(Le,{basename:n,children:i,location:f.location,navigationType:f.action,navigator:s})}var Ge="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,He=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,We=r.forwardRef((function(e,t){var n,i=e.onClick,a=e.relative,o=e.reloadDocument,u=e.replace,s=e.state,c=e.target,l=e.to,f=e.preventScrollReset,h=ze(e,Be),d=r.useContext(pe).basename,p=!1;if("string"===typeof l&&He.test(l)&&(n=l,Ge))try{var v=new URL(window.location.href),m=l.startsWith("//")?new URL(v.protocol+l):new URL(l),y=J(m.pathname,d);m.origin===v.origin&&null!=y?l=y+m.search+m.hash:p=!0}catch(w){}var g=function(e,t){var n=(void 0===t?{}:t).relative;ge()||P(!1);var i=r.useContext(pe),a=i.basename,o=i.navigator,u=xe(e,{relative:n}),s=u.hash,c=u.pathname,l=u.search,f=c;return"/"!==a&&(f="/"===c?a:ne([a,c])),o.createHref({pathname:f,search:l,hash:s})}(l,{relative:a}),k=function(e,t){var n=void 0===t?{}:t,i=n.target,a=n.replace,o=n.state,u=n.preventScrollReset,s=n.relative,c=be(),l=ke(),f=xe(e,{relative:s});return r.useCallback((function(t){if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,i)){t.preventDefault();var n=void 0!==a?a:L(l)===L(f);c(e,{replace:n,state:o,preventScrollReset:u,relative:s})}}),[l,c,f,a,o,i,e,u,s])}(l,{replace:u,state:s,target:c,preventScrollReset:f,relative:a});return r.createElement("a",je({},h,{href:n||g,onClick:p||o?i:function(e){i&&i(e),e.defaultPrevented||k(e)},ref:t,target:c}))}));var Qe,Ye;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher"})(Qe||(Qe={})),function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Ye||(Ye={}));function $e(e,t,n){return(t=v(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Xe=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},Je={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,u=o?e[i+1]:0,s=i+2<e.length,c=s?e[i+2]:0,l=a>>2,f=(3&a)<<4|u>>4,h=(15&u)<<2|c>>6,d=63&c;s||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Xe(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var u=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==u||null==s)throw new Ze;var c=a<<2|o>>4;if(r.push(c),64!==u){var l=o<<4&240|u>>2;if(r.push(l),64!==s){var f=u<<6&192|s;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},Ze=function(e){k(n,e);var t=_(n);function n(){var e;return d(this,n),(e=t.apply(this,arguments)).name="DecodeBase64StringError",e}return y(n)}(E(Error)),et=function(e){return function(e){var t=Xe(e);return Je.encodeByteArray(t,!0)}(e).replace(/\./g,"")},tt=function(e){try{return Je.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function nt(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=nt(e[n],t[n]));return e}var rt=function(){return function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__},it=function(){try{return rt()||function(){if("undefined"!==typeof process){var e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0}}()||function(){if("undefined"!==typeof document){var e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}var t=e&&tt(e[1]);return t&&JSON.parse(t)}}()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},at=function(){var e;return null===(e=it())||void 0===e?void 0:e.config},ot=function(){function e(){var t=this;d(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return y(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function ut(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function st(){var e,t=null===(e=it())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}function ct(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function lt(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function ft(){var e=ut();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function ht(){try{return"object"===typeof indexedDB}catch(e){return!1}}var dt=function(e){k(n,e);var t=_(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(x(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(x(a),pt.prototype.create),a}return y(n)}(E(Error)),pt=function(){function e(t,n,r){d(this,e),this.service=t,this.serviceName=n,this.errors=r}return y(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(vt,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new dt(n,a,t)}}]),e}();var vt=/\{\$([^}]+)}/g;function mt(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function yt(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function gt(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var u=e[o],s=t[o];if(kt(u)&&kt(s)){if(!gt(u,s))return!1}else if(u!==s)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function kt(e){return null!==e&&"object"===typeof e}function wt(e){for(var t=[],n=function(){var e=l(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function bt(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=l(e.split("="),2),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function xt(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function _t(e,t){var n=new It(e,t);return n.subscribe.bind(n)}var It=function(){function e(t,n){var r=this;d(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return y(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=T(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=Et),void 0===r.error&&(r.error=Et),void 0===r.complete&&(r.complete=Et);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function Et(){}function St(e){return e&&e._delegate?e._delegate:e}function Tt(){Tt=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(N){s=function(e,t,n){return e[t]=n}}function c(e,t,n,i){var a=t&&t.prototype instanceof h?t:h,o=Object.create(a.prototype),u=new S(i||[]);return r(o,"_invoke",{value:x(e,n,u)}),o}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(N){return{type:"throw",arg:N}}}e.wrap=c;var f={};function h(){}function d(){}function v(){}var m={};s(m,a,(function(){return this}));var y=Object.getPrototypeOf,g=y&&y(y(T([])));g&&g!==t&&n.call(g,a)&&(m=g);var k=v.prototype=h.prototype=Object.create(m);function w(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function i(r,a,o,u){var s=l(e[r],e,a);if("throw"!==s.type){var c=s.arg,f=c.value;return f&&"object"==p(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){i("next",e,o,u)}),(function(e){i("throw",e,o,u)})):t.resolve(f).then((function(e){c.value=e,o(c)}),(function(e){return i("throw",e,o,u)}))}u(s.arg)}var a;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){i(e,n,t,r)}))}return a=a?a.then(r,r):r()}})}function x(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return C()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=_(o,n);if(u){if(u===f)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=l(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===f)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function _(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var i=l(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,f;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function T(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:C}}function C(){return{value:void 0,done:!0}}return d.prototype=v,r(k,"constructor",{value:v,configurable:!0}),r(v,"constructor",{value:d,configurable:!0}),d.displayName=s(v,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,s(e,u,"GeneratorFunction")),e.prototype=Object.create(k),e},e.awrap=function(e){return{__await:e}},w(b.prototype),s(b.prototype,o,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new b(c(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},w(k),s(k,u,"Generator"),s(k,a,(function(){return this})),s(k,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=T,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;E(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:T(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}function Ct(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,i)}function Nt(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){Ct(a,r,i,o,u,"next",e)}function u(e){Ct(a,r,i,o,u,"throw",e)}o(void 0)}))}}var At=function(){function e(t,n,r){d(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return y(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),Pt="[DEFAULT]",Rt=function(){function e(t,n){d(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return y(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new ot;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Pt})}catch(s){}var t,n=T(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=l(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var u=this.getOrInitializeService({instanceIdentifier:o});a.resolve(u)}catch(s){}}}catch(c){n.e(c)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pt;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=Nt(Tt().mark((function e(){var t;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(h(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),h(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pt;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pt;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=T(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var u=l(i.value,2),s=u[0],c=u[1];r===this.normalizeInstanceIdentifier(s)&&c.resolve(a)}}catch(f){o.e(f)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=T(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(o){}}}catch(u){i.e(u)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===Pt?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(o){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pt;return this.component?this.component.multipleInstances?e:Pt:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var Dt,Ot,Lt=function(){function e(t){d(this,e),this.name=t,this.providers=new Map}return y(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new Rt(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),Mt=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Ot||(Ot={}));var Ft={debug:Ot.DEBUG,verbose:Ot.VERBOSE,info:Ot.INFO,warn:Ot.WARN,error:Ot.ERROR,silent:Ot.SILENT},Ut=Ot.INFO,Vt=($e(Dt={},Ot.DEBUG,"log"),$e(Dt,Ot.VERBOSE,"log"),$e(Dt,Ot.INFO,"info"),$e(Dt,Ot.WARN,"warn"),$e(Dt,Ot.ERROR,"error"),Dt),jt=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=Vt[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},zt=function(){function e(t){d(this,e),this.name=t,this._logLevel=Ut,this._logHandler=jt,this._userLogHandler=null,Mt.push(this)}return y(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in Ot))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?Ft[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Ot.DEBUG].concat(t)),this._logHandler.apply(this,[this,Ot.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Ot.VERBOSE].concat(t)),this._logHandler.apply(this,[this,Ot.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Ot.INFO].concat(t)),this._logHandler.apply(this,[this,Ot.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Ot.WARN].concat(t)),this._logHandler.apply(this,[this,Ot.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Ot.ERROR].concat(t)),this._logHandler.apply(this,[this,Ot.ERROR].concat(t))}}]),e}();function Bt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Bt(Object(n),!0).forEach((function(t){$e(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Kt,Gt,Ht=function(e,t){return t.some((function(t){return e instanceof t}))};var Wt=new WeakMap,Qt=new WeakMap,Yt=new WeakMap,$t=new WeakMap,Xt=new WeakMap;var Jt={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Qt.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Yt.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return tn(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function Zt(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Gt||(Gt=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(nn(this),n),tn(Wt.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return tn(e.apply(nn(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[nn(this),t].concat(r));return Yt.set(a,t.sort?t.sort():[t]),tn(a)}}function en(e){return"function"===typeof e?Zt(e):(e instanceof IDBTransaction&&function(e){if(!Qt.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));Qt.set(e,t)}}(e),Ht(e,Kt||(Kt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,Jt):e)}function tn(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(tn(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&Wt.set(t,e)})).catch((function(){})),Xt.set(t,e),t}(e);if($t.has(e))return $t.get(e);var t=en(e);return t!==e&&($t.set(e,t),Xt.set(t,e)),t}var nn=function(e){return Xt.get(e)};var rn,an,on=["get","getKey","getAll","getAllKeys","count"],un=["put","add","delete","clear"],sn=new Map;function cn(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(sn.get(t))return sn.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=un.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||on.includes(n))){var a=function(){var e=Nt(Tt().mark((function e(t){var a,o,u,s,c,l,f=arguments;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,i?"readwrite":"readonly"),u=o.store,s=f.length,c=new Array(s>1?s-1:0),l=1;l<s;l++)c[l-1]=f[l];return r&&(u=u.index(c.shift())),e.next=6,Promise.all([(a=u)[n].apply(a,c),i&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return sn.set(t,a),a}}}Jt=function(e){return qt(qt({},e),{},{get:function(t,n,r){return cn(t,n)||e.get(t,n,r)},has:function(t,n){return!!cn(t,n)||e.has(t,n)}})}(Jt);var ln=function(){function e(t){d(this,e),this.container=t}return y(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var fn="@firebase/app",hn="0.9.19",dn=new zt("@firebase/app"),pn="[DEFAULT]",vn=($e(rn={},fn,"fire-core"),$e(rn,"@firebase/app-compat","fire-core-compat"),$e(rn,"@firebase/analytics","fire-analytics"),$e(rn,"@firebase/analytics-compat","fire-analytics-compat"),$e(rn,"@firebase/app-check","fire-app-check"),$e(rn,"@firebase/app-check-compat","fire-app-check-compat"),$e(rn,"@firebase/auth","fire-auth"),$e(rn,"@firebase/auth-compat","fire-auth-compat"),$e(rn,"@firebase/database","fire-rtdb"),$e(rn,"@firebase/database-compat","fire-rtdb-compat"),$e(rn,"@firebase/functions","fire-fn"),$e(rn,"@firebase/functions-compat","fire-fn-compat"),$e(rn,"@firebase/installations","fire-iid"),$e(rn,"@firebase/installations-compat","fire-iid-compat"),$e(rn,"@firebase/messaging","fire-fcm"),$e(rn,"@firebase/messaging-compat","fire-fcm-compat"),$e(rn,"@firebase/performance","fire-perf"),$e(rn,"@firebase/performance-compat","fire-perf-compat"),$e(rn,"@firebase/remote-config","fire-rc"),$e(rn,"@firebase/remote-config-compat","fire-rc-compat"),$e(rn,"@firebase/storage","fire-gcs"),$e(rn,"@firebase/storage-compat","fire-gcs-compat"),$e(rn,"@firebase/firestore","fire-fst"),$e(rn,"@firebase/firestore-compat","fire-fst-compat"),$e(rn,"fire-js","fire-js"),$e(rn,"firebase","fire-js-all"),rn),mn=new Map,yn=new Map;function gn(e,t){try{e.container.addComponent(t)}catch(n){dn.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function kn(e,t){e.container.addOrOverwriteComponent(t)}function wn(e){var t=e.name;if(yn.has(t))return dn.debug("There were multiple attempts to register component ".concat(t,".")),!1;yn.set(t,e);var n,r=T(mn.values());try{for(r.s();!(n=r.n()).done;){gn(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function bn(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function xn(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:pn;bn(e,t).clearInstance(n)}function _n(){yn.clear()}var In=($e(an={},"no-app","No Firebase App '{$appName}' has been created - call initializeApp() first"),$e(an,"bad-app-name","Illegal App name: '{$appName}"),$e(an,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),$e(an,"app-deleted","Firebase App named '{$appName}' already deleted"),$e(an,"no-options","Need to provide options, when not being deployed to hosting via source."),$e(an,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),$e(an,"invalid-log-argument","First argument to `onLog` must be null or a function."),$e(an,"idb-open","Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}."),$e(an,"idb-get","Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}."),$e(an,"idb-set","Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}."),$e(an,"idb-delete","Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."),an),En=new pt("app","Firebase",In),Sn=function(){function e(t,n,r){var i=this;d(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new At("app",(function(){return i}),"PUBLIC"))}return y(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw En.create("app-deleted",{appName:this._name})}}]),e}(),Tn="10.4.0";function Cn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;"object"!==typeof t&&(t={name:t});var r=Object.assign({name:pn,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw En.create("bad-app-name",{appName:String(i)});if(n||(n=at()),!n)throw En.create("no-options");var a=mn.get(i);if(a){if(gt(n,a.options)&&gt(r,a.config))return a;throw En.create("duplicate-app",{appName:i})}var o,u=new Lt(i),s=T(yn.values());try{for(s.s();!(o=s.n()).done;){var c=o.value;u.addComponent(c)}}catch(f){s.e(f)}finally{s.f()}var l=new Sn(n,r,u);return mn.set(i,l),l}function Nn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pn,t=mn.get(e);if(!t&&e===pn&&at())return Cn();if(!t)throw En.create("no-app",{appName:e});return t}function An(){return Array.from(mn.values())}function Pn(e){return Rn.apply(this,arguments)}function Rn(){return(Rn=Nt(Tt().mark((function e(t){var n;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!mn.has(n)){e.next=6;break}return mn.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Dn(e,t,n){var r,i=null!==(r=vn[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&u.push("and"),o&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void dn.warn(u.join(" "))}wn(new At("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function On(e,t){if(null!==e&&"function"!==typeof e)throw En.create("invalid-log-argument");!function(e,t){var n,r=T(Mt);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=Ft[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var u=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:Ot[n].toLowerCase(),message:u,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function Ln(e){var t;t=e,Mt.forEach((function(e){e.setLogLevel(t)}))}var Mn="firebase-heartbeat-database",Fn=1,Un="firebase-heartbeat-store",Vn=null;function jn(){return Vn||(Vn=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,u=indexedDB.open(e,t),s=tn(u);return i&&u.addEventListener("upgradeneeded",(function(e){i(tn(u.result),e.oldVersion,e.newVersion,tn(u.transaction),e)})),r&&u.addEventListener("blocked",(function(e){return r(e.oldVersion,e.newVersion,e)})),s.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(e){return a(e.oldVersion,e.newVersion,e)}))})).catch((function(){})),s}(Mn,Fn,{upgrade:function(e,t){if(0===t)e.createObjectStore(Un)}}).catch((function(e){throw En.create("idb-open",{originalErrorMessage:e.message})}))),Vn}function zn(e){return Bn.apply(this,arguments)}function Bn(){return Bn=Nt(Tt().mark((function e(t){var n,r,i;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,jn();case 3:return n=e.sent,e.next=6,n.transaction(Un).objectStore(Un).get(Gn(t));case 6:return r=e.sent,e.abrupt("return",r);case 10:e.prev=10,e.t0=e.catch(0),e.t0 instanceof dt?dn.warn(e.t0.message):(i=En.create("idb-get",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),dn.warn(i.message));case 13:case"end":return e.stop()}}),e,null,[[0,10]])}))),Bn.apply(this,arguments)}function qn(e,t){return Kn.apply(this,arguments)}function Kn(){return Kn=Nt(Tt().mark((function e(t,n){var r,i,a,o;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,jn();case 3:return r=e.sent,i=r.transaction(Un,"readwrite"),a=i.objectStore(Un),e.next=8,a.put(n,Gn(t));case 8:return e.next=10,i.done;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),e.t0 instanceof dt?dn.warn(e.t0.message):(o=En.create("idb-set",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),dn.warn(o.message));case 15:case"end":return e.stop()}}),e,null,[[0,12]])}))),Kn.apply(this,arguments)}function Gn(e){return"".concat(e.name,"!").concat(e.options.appId)}var Hn=function(){function e(t){var n=this;d(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new Xn(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return y(e,[{key:"triggerHeartbeat",value:function(){var e=Nt(Tt().mark((function e(){var t,n,r;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=Wn(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=Nt(Tt().mark((function e(){var t,n,r,i,a;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=Wn(),n=Qn(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=et(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Wn(){return(new Date).toISOString().substring(0,10)}function Qn(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=T(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),Jn(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),Jn(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){if("break"===o())break}}catch(u){a.e(u)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var Yn,$n,Xn=function(){function e(t){d(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return y(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=Nt(Tt().mark((function e(){return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ht()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(a){t(a)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=Nt(Tt().mark((function e(){var t;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,zn(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=Nt(Tt().mark((function e(t){var n,r;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",qn(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=Nt(Tt().mark((function e(t){var n,r;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",qn(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(h(r.heartbeats),h(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function Jn(e){return et(JSON.stringify({version:2,heartbeats:e})).length}Yn="",wn(new At("platform-logger",(function(e){return new ln(e)}),"PRIVATE")),wn(new At("heartbeat",(function(e){return new Hn(e)}),"PRIVATE")),Dn(fn,hn,Yn),Dn(fn,hn,"esm2017"),Dn("fire-js","");var Zn=function(){function e(t,n){var r=this;d(this,e),this._delegate=t,this.firebase=n,gn(t,new At("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return y(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),Pn(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:pn;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:pn;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){gn(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){kn(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),er=($e($n={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),$e($n,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),$n),tr=new pt("app-compat","Firebase",er);var nr=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=Cn(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(mt(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:Dn,setLogLevel:Ln,onLog:On,apps:null,SDK_VERSION:Tn,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(wn(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw tr.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&nt(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!mt(n,e=e||pn))throw tr.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(Zn);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){nt(n,e)},createSubscribe:_t,ErrorFactory:pt,deepExtend:nt}),n}(),rr=new zt("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){rr.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var ir=self.firebase.SDK_VERSION;ir&&ir.indexOf("LITE")>=0&&rr.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var ar=nr;!function(e){Dn("@firebase/app-compat","0.2.19",e)}();function or(){return or="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=w(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},or.apply(this,arguments)}ar.registerVersion("firebase","10.4.0","app-compat");function ur(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;var sr;Object.create;var cr={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},lr="EMAIL_SIGNIN",fr="PASSWORD_RESET",hr="RECOVER_EMAIL",dr="REVERT_SECOND_FACTOR_ADDITION",pr="VERIFY_AND_CHANGE_EMAIL",vr="VERIFY_EMAIL";function mr(e){return void 0!==e&&void 0!==e.getResponse}function yr(e){return void 0!==e&&void 0!==e.enterprise}var gr=y((function e(t){if(d(this,e),this.siteKey="",this.emailPasswordEnabled=!1,void 0===t.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.emailPasswordEnabled=t.recaptchaEnforcementState.some((function(e){return"EMAIL_PASSWORD_PROVIDER"===e.provider&&"OFF"!==e.enforcementState}))}));function kr(){return $e({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var wr=function(){var e;return $e(e={},"admin-restricted-operation","This operation is restricted to administrators only."),$e(e,"argument-error",""),$e(e,"app-not-authorized","This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console."),$e(e,"app-not-installed","The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device."),$e(e,"captcha-check-failed","The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains."),$e(e,"code-expired","The SMS code has expired. Please re-send the verification code to try again."),$e(e,"cordova-not-ready","Cordova framework is not ready."),$e(e,"cors-unsupported","This browser is not supported."),$e(e,"credential-already-in-use","This credential is already associated with a different user account."),$e(e,"custom-token-mismatch","The custom token corresponds to a different audience."),$e(e,"requires-recent-login","This operation is sensitive and requires recent authentication. Log in again before retrying this request."),$e(e,"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."),$e(e,"dynamic-link-not-activated","Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions."),$e(e,"email-change-needs-verification","Multi-factor users must always have a verified email."),$e(e,"email-already-in-use","The email address is already in use by another account."),$e(e,"emulator-config-failed",'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.'),$e(e,"expired-action-code","The action code has expired."),$e(e,"cancelled-popup-request","This operation has been cancelled due to another conflicting popup being opened."),$e(e,"internal-error","An internal AuthError has occurred."),$e(e,"invalid-app-credential","The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired."),$e(e,"invalid-app-id","The mobile app identifier is not registed for the current project."),$e(e,"invalid-user-token","This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key."),$e(e,"invalid-auth-event","An internal AuthError has occurred."),$e(e,"invalid-verification-code","The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user."),$e(e,"invalid-continue-uri","The continue URL provided in the request is invalid."),$e(e,"invalid-cordova-configuration","The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme."),$e(e,"invalid-custom-token","The custom token format is incorrect. Please check the documentation."),$e(e,"invalid-dynamic-link-domain","The provided dynamic link domain is not configured or authorized for the current project."),$e(e,"invalid-email","The email address is badly formatted."),$e(e,"invalid-emulator-scheme","Emulator URL must start with a valid scheme (http:// or https://)."),$e(e,"invalid-api-key","Your API key is invalid, please check you have copied it correctly."),$e(e,"invalid-cert-hash","The SHA-1 certificate hash provided is invalid."),$e(e,"invalid-credential","The supplied auth credential is malformed or has expired."),$e(e,"invalid-message-payload","The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console."),$e(e,"invalid-multi-factor-session","The request does not contain a valid proof of first factor successful sign-in."),$e(e,"invalid-oauth-provider","EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers."),$e(e,"invalid-oauth-client-id","The OAuth client ID provided is either invalid or does not match the specified API key."),$e(e,"unauthorized-domain","This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console."),$e(e,"invalid-action-code","The action code is invalid. This can happen if the code is malformed, expired, or has already been used."),$e(e,"wrong-password","The password is invalid or the user does not have a password."),$e(e,"invalid-persistence-type","The specified persistence type is invalid. It can only be local, session or none."),$e(e,"invalid-phone-number","The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code]."),$e(e,"invalid-provider-id","The specified provider ID is invalid."),$e(e,"invalid-recipient-email","The email corresponding to this action failed to send as the provided recipient email address is invalid."),$e(e,"invalid-sender","The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console."),$e(e,"invalid-verification-id","The verification ID used to create the phone auth credential is invalid."),$e(e,"invalid-tenant-id","The Auth instance's tenant ID is invalid."),$e(e,"login-blocked","Login blocked by user-provided method: {$originalMessage}"),$e(e,"missing-android-pkg-name","An Android Package Name must be provided if the Android App is required to be installed."),$e(e,"auth-domain-config-required","Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console."),$e(e,"missing-app-credential","The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided."),$e(e,"missing-verification-code","The phone auth credential was created with an empty SMS verification code."),$e(e,"missing-continue-uri","A continue URL must be provided in the request."),$e(e,"missing-iframe-start","An internal AuthError has occurred."),$e(e,"missing-ios-bundle-id","An iOS Bundle ID must be provided if an App Store ID is provided."),$e(e,"missing-or-invalid-nonce","The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload."),$e(e,"missing-password","A non-empty password must be provided"),$e(e,"missing-multi-factor-info","No second factor identifier is provided."),$e(e,"missing-multi-factor-session","The request is missing proof of first factor successful sign-in."),$e(e,"missing-phone-number","To send verification codes, provide a phone number for the recipient."),$e(e,"missing-verification-id","The phone auth credential was created with an empty verification ID."),$e(e,"app-deleted","This instance of FirebaseApp has been deleted."),$e(e,"multi-factor-info-not-found","The user does not have a second factor matching the identifier provided."),$e(e,"multi-factor-auth-required","Proof of ownership of a second factor is required to complete sign-in."),$e(e,"account-exists-with-different-credential","An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."),$e(e,"network-request-failed","A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred."),$e(e,"no-auth-event","An internal AuthError has occurred."),$e(e,"no-such-provider","User was not linked to an account with the given provider."),$e(e,"null-user","A null user object was provided as the argument for an operation which requires a non-null user object."),$e(e,"operation-not-allowed","The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."),$e(e,"operation-not-supported-in-this-environment",'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.'),$e(e,"popup-blocked","Unable to establish a connection with the popup. It may have been blocked by the browser."),$e(e,"popup-closed-by-user","The popup has been closed by the user before finalizing the operation."),$e(e,"provider-already-linked","User can only be linked to one identity for the given provider."),$e(e,"quota-exceeded","The project's quota for this operation has been exceeded."),$e(e,"redirect-cancelled-by-user","The redirect operation has been cancelled by the user before finalizing."),$e(e,"redirect-operation-pending","A redirect sign-in operation is already pending."),$e(e,"rejected-credential","The request contains malformed or mismatching credentials."),$e(e,"second-factor-already-in-use","The second factor is already enrolled on this account."),$e(e,"maximum-second-factor-count-exceeded","The maximum allowed number of second factors on a user has been exceeded."),$e(e,"tenant-id-mismatch","The provided tenant ID does not match the Auth instance's tenant ID"),$e(e,"timeout","The operation has timed out."),$e(e,"user-token-expired","The user's credential is no longer valid. The user must sign in again."),$e(e,"too-many-requests","We have blocked all requests from this device due to unusual activity. Try again later."),$e(e,"unauthorized-continue-uri","The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console."),$e(e,"unsupported-first-factor","Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor."),$e(e,"unsupported-persistence-type","The current environment does not support the specified persistence type."),$e(e,"unsupported-tenant-operation","This operation is not supported in a multi-tenant context."),$e(e,"unverified-email","The operation requires a verified email."),$e(e,"user-cancelled","The user did not grant your application the permissions it requested."),$e(e,"user-not-found","There is no user record corresponding to this identifier. The user may have been deleted."),$e(e,"user-disabled","The user account has been disabled by an administrator."),$e(e,"user-mismatch","The supplied credentials do not correspond to the previously signed in user."),$e(e,"user-signed-out",""),$e(e,"weak-password","The password must be 6 characters long or more."),$e(e,"web-storage-unsupported","This browser is not supported or 3rd party cookies and data may be disabled."),$e(e,"already-initialized","initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."),$e(e,"missing-recaptcha-token","The reCAPTCHA token is missing when sending request to the backend."),$e(e,"invalid-recaptcha-token","The reCAPTCHA token is invalid when sending request to the backend."),$e(e,"invalid-recaptcha-action","The reCAPTCHA action is invalid when sending request to the backend."),$e(e,"recaptcha-not-enabled","reCAPTCHA Enterprise integration is not enabled for this project."),$e(e,"missing-client-type","The reCAPTCHA client type is missing when sending request to the backend."),$e(e,"missing-recaptcha-version","The reCAPTCHA version is missing when sending request to the backend."),$e(e,"invalid-req-type","Invalid request parameters."),$e(e,"invalid-recaptcha-version","The reCAPTCHA version is invalid when sending request to the backend."),$e(e,"unsupported-password-policy-schema-version","The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK."),$e(e,"password-does-not-meet-requirements","The password does not meet the requirements."),e},br=kr,xr=new pt("auth","Firebase",kr()),_r=new zt("@firebase/auth");function Ir(e){if(_r.logLevel<=Ot.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];_r.warn.apply(_r,["Auth (".concat(Tn,"): ").concat(e)].concat(n))}}function Er(e){if(_r.logLevel<=Ot.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];_r.error.apply(_r,["Auth (".concat(Tn,"): ").concat(e)].concat(n))}}function Sr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Ar.apply(void 0,[e].concat(n))}function Tr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Ar.apply(void 0,[e].concat(n))}function Cr(e,t,n){var r=Object.assign(Object.assign({},br()),$e({},t,n));return new pt("auth","Firebase",r).create(t,{appName:e.name})}function Nr(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&Sr(e,"argument-error"),Cr(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function Ar(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=h(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(h(o)))}return xr.create.apply(xr,[e].concat(n))}function Pr(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw Ar.apply(void 0,[t].concat(r))}}function Rr(e){var t="INTERNAL ASSERTION FAILED: "+e;throw Er(t),new Error(t)}function Dr(e,t){e||Rr(t)}function Or(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Lr(){return"http:"===Mr()||"https:"===Mr()}function Mr(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var Fr=function(){function e(t,n){d(this,e),this.shortDelay=t,this.longDelay=n,Dr(n>t,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ut())||lt()}return y(e,[{key:"get",value:function(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Lr()||ct()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function Ur(e,t){Dr(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var Vr=function(){function e(){d(this,e)}return y(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void Rr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void Rr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void Rr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),jr=($e(sr={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),$e(sr,"MISSING_CUSTOM_TOKEN","internal-error"),$e(sr,"INVALID_IDENTIFIER","invalid-email"),$e(sr,"MISSING_CONTINUE_URI","internal-error"),$e(sr,"INVALID_PASSWORD","wrong-password"),$e(sr,"MISSING_PASSWORD","missing-password"),$e(sr,"EMAIL_EXISTS","email-already-in-use"),$e(sr,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),$e(sr,"INVALID_IDP_RESPONSE","invalid-credential"),$e(sr,"INVALID_PENDING_TOKEN","invalid-credential"),$e(sr,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),$e(sr,"MISSING_REQ_TYPE","internal-error"),$e(sr,"EMAIL_NOT_FOUND","user-not-found"),$e(sr,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),$e(sr,"EXPIRED_OOB_CODE","expired-action-code"),$e(sr,"INVALID_OOB_CODE","invalid-action-code"),$e(sr,"MISSING_OOB_CODE","internal-error"),$e(sr,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),$e(sr,"INVALID_ID_TOKEN","invalid-user-token"),$e(sr,"TOKEN_EXPIRED","user-token-expired"),$e(sr,"USER_NOT_FOUND","user-token-expired"),$e(sr,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),$e(sr,"PASSWORD_DOES_NOT_MEET_REQUIREMENTS","password-does-not-meet-requirements"),$e(sr,"INVALID_CODE","invalid-verification-code"),$e(sr,"INVALID_SESSION_INFO","invalid-verification-id"),$e(sr,"INVALID_TEMPORARY_PROOF","invalid-credential"),$e(sr,"MISSING_SESSION_INFO","missing-verification-id"),$e(sr,"SESSION_EXPIRED","code-expired"),$e(sr,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),$e(sr,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),$e(sr,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),$e(sr,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),$e(sr,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),$e(sr,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),$e(sr,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),$e(sr,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),$e(sr,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),$e(sr,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),$e(sr,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),$e(sr,"RECAPTCHA_NOT_ENABLED","recaptcha-not-enabled"),$e(sr,"MISSING_RECAPTCHA_TOKEN","missing-recaptcha-token"),$e(sr,"INVALID_RECAPTCHA_TOKEN","invalid-recaptcha-token"),$e(sr,"INVALID_RECAPTCHA_ACTION","invalid-recaptcha-action"),$e(sr,"MISSING_CLIENT_TYPE","missing-client-type"),$e(sr,"MISSING_RECAPTCHA_VERSION","missing-recaptcha-version"),$e(sr,"INVALID_RECAPTCHA_VERSION","invalid-recaptcha-version"),$e(sr,"INVALID_REQ_TYPE","invalid-req-type"),sr),zr=new Fr(3e4,6e4);function Br(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function qr(e,t,n,r){return Kr.apply(this,arguments)}function Kr(){return Kr=Nt(Tt().mark((function e(t,n,r,i){var a,o=arguments;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",Gr(t,a,Nt(Tt().mark((function e(){var a,o,u,s;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),u=wt(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(s=e.sent)["Content-Type"]="application/json",t.languageCode&&(s["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",Vr.fetch()(Yr(t,t.config.apiHost,r,u),Object.assign({method:n,headers:s,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),Kr.apply(this,arguments)}function Gr(e,t,n){return Hr.apply(this,arguments)}function Hr(){return Hr=Nt(Tt().mark((function e(t,n,r){var i,a,o,u,s,c,f,h,d,p;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},jr),n),e.prev=2,a=new $r(t),e.next=6,Promise.race([r(),a.promise]);case 6:return o=e.sent,a.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(u=e.sent))){e.next=13;break}throw Xr(t,"account-exists-with-different-credential",u);case 13:if(!o.ok||"errorMessage"in u){e.next=17;break}return e.abrupt("return",u);case 17:if(s=o.ok?u.errorMessage:u.error.message,c=s.split(" : "),f=l(c,2),h=f[0],d=f[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==h){e.next=23;break}throw Xr(t,"credential-already-in-use",u);case 23:if("EMAIL_EXISTS"!==h){e.next=27;break}throw Xr(t,"email-already-in-use",u);case 27:if("USER_DISABLED"!==h){e.next=29;break}throw Xr(t,"user-disabled",u);case 29:if(p=i[h]||h.toLowerCase().replace(/[_\s]+/g,"-"),!d){e.next=34;break}throw Cr(t,p,d);case 34:Sr(t,p);case 35:e.next=42;break;case 37:if(e.prev=37,e.t0=e.catch(2),!(e.t0 instanceof dt)){e.next=41;break}throw e.t0;case 41:Sr(t,"network-request-failed",{message:String(e.t0)});case 42:case"end":return e.stop()}}),e,null,[[2,37]])}))),Hr.apply(this,arguments)}function Wr(e,t,n,r){return Qr.apply(this,arguments)}function Qr(){return Qr=Nt(Tt().mark((function e(t,n,r,i){var a,o,u=arguments;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>4&&void 0!==u[4]?u[4]:{},e.next=3,qr(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&Sr(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),Qr.apply(this,arguments)}function Yr(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?Ur(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var $r=function(){function e(t){var n=this;d(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(Tr(n.auth,"network-request-failed"))}),zr.get())}))}return y(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function Xr(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=Tr(e,t,r);return i.customData._tokenResponse=n,i}function Jr(e){return Zr.apply(this,arguments)}function Zr(){return Zr=Nt(Tt().mark((function e(t){return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qr(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)}))),Zr.apply(this,arguments)}function ei(e,t){return ti.apply(this,arguments)}function ti(){return ti=Nt(Tt().mark((function e(t,n){return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",qr(t,"GET","/v2/recaptchaConfig",Br(t,n)));case 1:case"end":return e.stop()}}),e)}))),ti.apply(this,arguments)}function ni(e,t){return ri.apply(this,arguments)}function ri(){return ri=Nt(Tt().mark((function e(t,n){return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",qr(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)}))),ri.apply(this,arguments)}function ii(e,t){return ai.apply(this,arguments)}function ai(){return ai=Nt(Tt().mark((function e(t,n){return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",qr(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),ai.apply(this,arguments)}function oi(e,t){return ui.apply(this,arguments)}function ui(){return ui=Nt(Tt().mark((function e(t,n){return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",qr(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)}))),ui.apply(this,arguments)}function si(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function ci(){return ci=Nt(Tt().mark((function e(t){var n,r,i,a,o,u,s=arguments;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]&&s[1],r=St(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,Pr((a=fi(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,u=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:si(li(a.auth_time)),issuedAtTime:si(li(a.iat)),expirationTime:si(li(a.exp)),signInProvider:u||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),ci.apply(this,arguments)}function li(e){return 1e3*Number(e)}function fi(e){var t=l(e.split("."),3),n=t[0],r=t[1],i=t[2];if(void 0===n||void 0===r||void 0===i)return Er("JWT malformed, contained fewer than 3 sections"),null;try{var a=tt(r);return a?JSON.parse(a):(Er("Failed to decode base64 JWT payload"),null)}catch(o){return Er("Caught error parsing JWT payload as JSON",null===o||void 0===o?void 0:o.toString()),null}}function hi(e,t){return di.apply(this,arguments)}function di(){return di=Nt(Tt().mark((function e(t,n){var r=arguments;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof dt&&pi(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),di.apply(this,arguments)}function pi(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var vi=function(){function e(t){d(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return y(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(Nt(Tt().mark((function t(){return Tt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=Nt(Tt().mark((function e(){return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),mi=function(){function e(t,n){d(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return y(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=si(this.lastLoginAt),this.creationTime=si(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function yi(e){return gi.apply(this,arguments)}function gi(){return gi=Nt(Tt().mark((function e(t){var n,r,i,a,o,u,s,c,l,f,h;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,hi(t,oi(r,{idToken:i}));case 6:Pr(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),u=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?o.providerUserInfo.map((function(e){var t=e.providerId,n=ur(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[],s=wi(t.providerData,u),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!(null===s||void 0===s?void 0:s.length),f=!!c&&l,h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:s,metadata:new mi(o.createdAt,o.lastLoginAt),isAnonymous:f},Object.assign(t,h);case 17:case"end":return e.stop()}}),e)}))),gi.apply(this,arguments)}function ki(){return(ki=Nt(Tt().mark((function e(t){var n;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=St(t),e.next=3,yi(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wi(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(h(n),h(t))}function bi(e,t){return xi.apply(this,arguments)}function xi(){return xi=Nt(Tt().mark((function e(t,n){var r;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Gr(t,{},Nt(Tt().mark((function e(){var r,i,a,o,u,s;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=wt({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,u=Yr(t,a,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(s=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",Vr.fetch()(u,{method:"POST",headers:s,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)}))),xi.apply(this,arguments)}var _i=function(){function e(){d(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return y(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){Pr(e.idToken,"internal-error"),Pr("undefined"!==typeof e.idToken,"internal-error"),Pr("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=fi(e);return Pr(t,"internal-error"),Pr("undefined"!==typeof t.exp,"internal-error"),Pr("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=Nt(Tt().mark((function e(t){var n,r=arguments;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],Pr(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=Nt(Tt().mark((function e(t,n){var r,i,a,o;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bi(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return Rr("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(Pr("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(Pr("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(Pr("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function Ii(e,t){Pr("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var Ei=function(){function e(t){d(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=ur(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new vi(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?h(a.providerData):[],this.metadata=new mi(a.createdAt||void 0,a.lastLoginAt||void 0)}return y(e,[{key:"getIdToken",value:function(){var e=Nt(Tt().mark((function e(t){var n;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,hi(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(Pr(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return ci.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return ki.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(Pr(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){var n=new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}},{key:"_onReload",value:function(e){Pr(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=Nt(Tt().mark((function e(t){var n,r,i=arguments;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,yi(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Nt(Tt().mark((function e(){var t;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,hi(this,ni(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,u,s,c,l,f=null!==(r=n.displayName)&&void 0!==r?r:void 0,h=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(u=n.tenantId)&&void 0!==u?u:void 0,m=null!==(s=n._redirectEventId)&&void 0!==s?s:void 0,y=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,w=n.emailVerified,b=n.isAnonymous,x=n.providerData,_=n.stsTokenManager;Pr(k&&_,t,"internal-error");var I=_i.fromJSON(this.name,_);Pr("string"===typeof k,t,"internal-error"),Ii(f,t.name),Ii(h,t.name),Pr("boolean"===typeof w,t,"internal-error"),Pr("boolean"===typeof b,t,"internal-error"),Ii(d,t.name),Ii(p,t.name),Ii(v,t.name),Ii(m,t.name),Ii(y,t.name),Ii(g,t.name);var E=new e({uid:k,auth:t,email:h,emailVerified:w,displayName:f,isAnonymous:b,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:I,createdAt:y,lastLoginAt:g});return x&&Array.isArray(x)&&(E.providerData=x.map((function(e){return Object.assign({},e)}))),m&&(E._redirectEventId=m),E}},{key:"_fromIdTokenResponse",value:function(){var t=Nt(Tt().mark((function t(n,r){var i,a,o,u=arguments;return Tt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=u.length>2&&void 0!==u[2]&&u[2],(a=new _i).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,yi(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),Si=new Map;function Ti(e){Dr(e instanceof Function,"Expected a class definition");var t=Si.get(e);return t?(Dr(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Si.set(e,t),t)}var Ci=function(){function e(){d(this,e),this.type="NONE",this.storage={}}return y(e,[{key:"_isAvailable",value:function(){var e=Nt(Tt().mark((function e(){return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=Nt(Tt().mark((function e(t,n){return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Nt(Tt().mark((function e(t){var n;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Nt(Tt().mark((function e(t){return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();Ci.type="NONE";var Ni=Ci;function Ai(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var Pi=function(){function e(t,n,r){d(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=Ai(this.userKey,a.apiKey,o),this.fullPersistenceKey=Ai("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return y(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=Nt(Tt().mark((function e(){var t;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?Ei._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=Nt(Tt().mark((function e(t){var n;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=Nt(Tt().mark((function t(n,r){var i,a,o,u,s,c,l,f,h,d,p,v=arguments;return Tt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=v.length>2&&void 0!==v[2]?v[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(Ti(Ni),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=Nt(Tt().mark((function e(t){return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),o=a[0]||Ti(Ni),u=Ai(i,n.config.apiKey,n.name),s=null,c=T(r),t.prev=10,c.s();case 12:if((l=c.n()).done){t.next=29;break}return f=l.value,t.prev=14,t.next=17,f._get(u);case 17:if(!(h=t.sent)){t.next=23;break}return d=Ei._fromJSON(n,h),f!==o&&(s=d),o=f,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),c.e(t.t1);case 34:return t.prev=34,c.f(),t.finish(34);case 37:if(p=a.filter((function(e){return e._shouldAllowMigration})),o._shouldAllowMigration&&p.length){t.next=40;break}return t.abrupt("return",new e(o,n,i));case 40:if(o=p[0],!s){t.next=44;break}return t.next=44,o._set(u,s.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=Nt(Tt().mark((function e(t){return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(u);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(o,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function Ri(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Mi(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Di(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Ui(t))return"Blackberry";if(Vi(t))return"Webos";if(Oi(t))return"Safari";if((t.includes("chrome/")||Li(t))&&!t.includes("edge/"))return"Chrome";if(Fi(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function Di(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ut();return/firefox\//i.test(e)}function Oi(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:ut()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Li(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ut();return/crios\//i.test(e)}function Mi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ut();return/iemobile/i.test(e)}function Fi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ut();return/android/i.test(e)}function Ui(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ut();return/blackberry/i.test(e)}function Vi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ut();return/webos/i.test(e)}function ji(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ut();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function zi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ut();return ji(e)||Fi(e)||Vi(e)||Ui(e)||/windows phone/i.test(e)||Mi(e)}function Bi(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Ri(ut());break;case"Worker":t="".concat(Ri(ut()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(Tn,"/").concat(r)}var qi=function(){function e(t){d(this,e),this.auth=t,this.queue=[]}return y(e,[{key:"pushCallback",value:function(e,t){var n=this,r=function(t){return new Promise((function(n,r){try{n(e(t))}catch(i){r(i)}}))};r.onAbort=t,this.queue.push(r);var i=this.queue.length-1;return function(){n.queue[i]=function(){return Promise.resolve()}}}},{key:"runMiddleware",value:function(){var e=Nt(Tt().mark((function e(t){var n,r,i,a,o,u,s;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.auth.currentUser!==t){e.next=2;break}return e.abrupt("return");case 2:n=[],e.prev=3,r=T(this.queue),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=14;break}return a=i.value,e.next=11,a(t);case 11:a.onAbort&&n.push(a.onAbort);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),r.e(e.t0);case 19:return e.prev=19,r.f(),e.finish(19);case 22:e.next=30;break;case 24:e.prev=24,e.t1=e.catch(3),n.reverse(),o=T(n);try{for(o.s();!(u=o.n()).done;){s=u.value;try{s()}catch(c){}}}catch(l){o.e(l)}finally{o.f()}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===e.t1||void 0===e.t1?void 0:e.t1.message});case 30:case"end":return e.stop()}}),e,this,[[3,24],[5,16,19,22]])})));return function(t){return e.apply(this,arguments)}}()}]),e}();function Ki(e){return Gi.apply(this,arguments)}function Gi(){return Gi=Nt(Tt().mark((function e(t){var n,r=arguments;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",qr(t,"GET","/v2/passwordPolicy",Br(t,n)));case 2:case"end":return e.stop()}}),e)}))),Gi.apply(this,arguments)}var Hi=function(){function e(t){var n,r,i,a;d(this,e);var o=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(n=o.minPasswordLength)&&void 0!==n?n:6,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),void 0!==o.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),void 0!==o.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),void 0!==o.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),void 0!==o.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(i=null===(r=t.allowedNonAlphanumericCharacters)||void 0===r?void 0:r.join(""))&&void 0!==i?i:"",this.forceUpgradeOnSignin=null!==(a=t.forceUpgradeOnSignin)&&void 0!==a&&a,this.schemaVersion=t.schemaVersion}return y(e,[{key:"validatePassword",value:function(e){var t,n,r,i,a,o,u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=null===(t=u.meetsMinPasswordLength)||void 0===t||t),u.isValid&&(u.isValid=null===(n=u.meetsMaxPasswordLength)||void 0===n||n),u.isValid&&(u.isValid=null===(r=u.containsLowercaseLetter)||void 0===r||r),u.isValid&&(u.isValid=null===(i=u.containsUppercaseLetter)||void 0===i||i),u.isValid&&(u.isValid=null===(a=u.containsNumericCharacter)||void 0===a||a),u.isValid&&(u.isValid=null===(o=u.containsNonAlphanumericCharacter)||void 0===o||o),u}},{key:"validatePasswordLengthOptions",value:function(e,t){var n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}},{key:"validatePasswordCharacterOptions",value:function(e,t){var n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(var r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}},{key:"updatePasswordCharacterOptionsStatuses",value:function(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}]),e}(),Wi=function(){function e(t,n,r,i){d(this,e),this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Yi(this),this.idTokenSubscription=new Yi(this),this.beforeStateQueue=new qi(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=xr,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion}return y(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=Ti(t)),this._initializationPromise=this.queue(Nt(Tt().mark((function r(){var i,a;return Tt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,Pi.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=Nt(Tt().mark((function e(){var t;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t,!0);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=Nt(Tt().mark((function e(t){var n,r,i,a,o,u,s;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,i=r,a=!1,!t||!this.config.authDomain){e.next=14;break}return e.next=8,this.getOrInitRedirectPersistenceManager();case 8:return o=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,u=null===i||void 0===i?void 0:i._redirectEventId,e.next=12,this.tryRedirectSignIn(t);case 12:s=e.sent,o&&o!==u||!(null===s||void 0===s?void 0:s.user)||(i=s.user,a=!0);case 14:if(i){e.next=16;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 16:if(i._redirectEventId){e.next=32;break}if(!a){e.next=27;break}return e.prev=18,e.next=21,this.beforeStateQueue.runMiddleware(i);case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(18),i=r,this._popupRedirectResolver._overrideRedirectResult(this,(function(){return Promise.reject(e.t0)}));case 27:if(!i){e.next=31;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 31:return e.abrupt("return",this.directlySetCurrentUser(null));case 32:return Pr(this._popupRedirectResolver,this,"argument-error"),e.next=35,this.getOrInitRedirectPersistenceManager();case 35:if(!this.redirectUser||this.redirectUser._redirectEventId!==i._redirectEventId){e.next=37;break}return e.abrupt("return",this.directlySetCurrentUser(i));case 37:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 38:case"end":return e.stop()}}),e,this,[[18,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=Nt(Tt().mark((function e(t){var n;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=Nt(Tt().mark((function e(t){return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,yi(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=Nt(Tt().mark((function e(){return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=Nt(Tt().mark((function e(t){var n;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?St(t):null)&&Pr(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=Nt(Tt().mark((function e(t){var n,r=this,i=arguments;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],!this._deleted){e.next=3;break}return e.abrupt("return");case 3:if(t&&Pr(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n){e.next=7;break}return e.next=7,this.beforeStateQueue.runMiddleware(t);case 7:return e.abrupt("return",this.queue(Nt(Tt().mark((function e(){return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.directlySetCurrentUser(t);case 2:r.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=Nt(Tt().mark((function e(){return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.beforeStateQueue.runMiddleware(null);case 2:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=5;break}return e.next=5,this._setRedirectUser(null);case 5:return e.abrupt("return",this._updateCurrentUser(null,!0));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(Nt(Tt().mark((function n(){return Tt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(Ti(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"_getRecaptchaConfig",value:function(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}},{key:"validatePassword",value:function(){var e=Nt(Tt().mark((function e(t){var n;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._getPasswordPolicyInternal()){e.next=3;break}return e.next=3,this._updatePasswordPolicy();case 3:if((n=this._getPasswordPolicyInternal()).schemaVersion===this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION){e.next=6;break}return e.abrupt("return",Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})));case 6:return e.abrupt("return",n.validatePassword(t));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_getPasswordPolicyInternal",value:function(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}},{key:"_updatePasswordPolicy",value:function(){var e=Nt(Tt().mark((function e(){var t,n;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ki(this);case 2:t=e.sent,n=new Hi(t),null===this.tenantId?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n;case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new pt("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"beforeAuthStateChanged",value:function(e,t){return this.beforeStateQueue.pushCallback(e,t)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"authStateReady",value:function(){var e=this;return new Promise((function(t,n){if(e.currentUser)t();else var r=e.onAuthStateChanged((function(){r(),t()}),n)}))}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=Nt(Tt().mark((function e(t,n){var r;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=Nt(Tt().mark((function e(t){var n;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return Pr(n=t&&Ti(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,Pi.create(this,[Ti(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=Nt(Tt().mark((function e(t){var n,r;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(Nt(Tt().mark((function e(){return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=Nt(Tt().mark((function e(t){var n=this;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(Nt(Tt().mark((function e(){return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=!1,u=this._isInitialized?Promise.resolve():this._initializationPromise;if(Pr(u,this,"internal-error"),u.then((function(){o||a(i.currentUser)})),"function"===typeof t){var s=e.addObserver(t,n,r);return function(){o=!0,s()}}var c=e.addObserver(t);return function(){o=!0,c()}}},{key:"directlySetCurrentUser",value:function(){var e=Nt(Tt().mark((function e(t){return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,!t){e.next=8;break}return e.next=6,this.assertedPersistence.setCurrentUser(t);case 6:e.next=10;break;case 8:return e.next=10,this.assertedPersistence.removeCurrentUser();case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return Pr(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Bi(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=Nt(Tt().mark((function e(){var t,n,r,i;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=$e({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.next=8,this._getAppCheckToken();case 8:return(i=e.sent)&&(n["X-Firebase-AppCheck"]=i),e.abrupt("return",n);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getAppCheckToken",value:function(){var e=Nt(Tt().mark((function e(){var t,n;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getToken();case 2:return(null===(n=e.sent)||void 0===n?void 0:n.error)&&Ir("Error while retrieving App Check token: ".concat(n.error)),e.abrupt("return",null===n||void 0===n?void 0:n.token);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Qi(e){return St(e)}var Yi=function(){function e(t){var n=this;d(this,e),this.auth=t,this.observer=null,this.addObserver=_t((function(e){return n.observer=e}))}return y(e,[{key:"next",get:function(){return Pr(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function $i(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=Tr("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function Xi(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var Ji=function(){function e(t){d(this,e),this.type="recaptcha-enterprise",this.auth=Qi(t)}return y(e,[{key:"verify",value:function(){var e=Nt(Tt().mark((function e(){var t,n,r,i,a,o=this,u=arguments;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=function(e,n,r){var i=window.grecaptcha;yr(i)?i.enterprise.ready((function(){i.enterprise.execute(e,{action:t}).then((function(e){n(e)})).catch((function(){n("NO_RECAPTCHA")}))})):r(Error("No reCAPTCHA enterprise script loaded."))},i=function(){return i=Nt(Tt().mark((function e(t){return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=5;break}if(null!=t.tenantId||null==t._agentRecaptchaConfig){e.next=3;break}return e.abrupt("return",t._agentRecaptchaConfig.siteKey);case 3:if(null==t.tenantId||void 0===t._tenantRecaptchaConfigs[t.tenantId]){e.next=5;break}return e.abrupt("return",t._tenantRecaptchaConfigs[t.tenantId].siteKey);case 5:return e.abrupt("return",new Promise(function(){var e=Nt(Tt().mark((function e(n,r){return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ei(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((function(e){if(void 0!==e.recaptchaKey){var i=new gr(e);return null==t.tenantId?t._agentRecaptchaConfig=i:t._tenantRecaptchaConfigs[t.tenantId]=i,n(i.siteKey)}r(new Error("recaptcha Enterprise site key undefined"))})).catch((function(e){r(e)}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 6:case"end":return e.stop()}}),e)}))),i.apply(this,arguments)},r=function(e){return i.apply(this,arguments)},t=u.length>0&&void 0!==u[0]?u[0]:"verify",n=u.length>1&&void 0!==u[1]&&u[1],e.abrupt("return",new Promise((function(e,t){r(o.auth).then((function(r){if(!n&&yr(window.grecaptcha))a(r,e,t);else{if("undefined"===typeof window)return void t(new Error("RecaptchaVerifier is only supported in browser"));$i("https://www.google.com/recaptcha/enterprise.js?render="+r).then((function(){a(r,e,t)})).catch((function(e){t(e)}))}})).catch((function(e){t(e)}))})));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Zi(e,t,n){return ea.apply(this,arguments)}function ea(){return ea=Nt(Tt().mark((function e(t,n,r){var i,a,o,u,s=arguments;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=s.length>3&&void 0!==s[3]&&s[3],a=new Ji(t),e.prev=2,e.next=5,a.verify(r);case 5:o=e.sent,e.next=13;break;case 8:return e.prev=8,e.t0=e.catch(2),e.next=12,a.verify(r,!0);case 12:o=e.sent;case 13:return u=Object.assign({},n),i?Object.assign(u,{captchaResp:o}):Object.assign(u,{captchaResponse:o}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),e.abrupt("return",u);case 18:case"end":return e.stop()}}),e,null,[[2,8]])}))),ea.apply(this,arguments)}function ta(e,t,n){var r=Qi(e);Pr(r._canInitEmulator,r,"emulator-config-failed"),Pr(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=na(t),o=function(e){var t=na(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:ra(r.substr(a.length+1))}}var o=l(r.split(":"),2);return{host:o[0],port:ra(o[1])}}(t),u=o.host,s=o.port,c=null===s?"":":".concat(s);r.config.emulator={url:"".concat(a,"//").concat(u).concat(c,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:u,port:s,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function na(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function ra(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var ia=function(){function e(t,n){d(this,e),this.providerId=t,this.signInMethod=n}return y(e,[{key:"toJSON",value:function(){return Rr("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return Rr("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return Rr("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return Rr("not implemented")}}]),e}();function aa(e,t){return oa.apply(this,arguments)}function oa(){return oa=Nt(Tt().mark((function e(t,n){return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",qr(t,"POST","/v1/accounts:resetPassword",Br(t,n)));case 1:case"end":return e.stop()}}),e)}))),oa.apply(this,arguments)}function ua(e,t){return sa.apply(this,arguments)}function sa(){return sa=Nt(Tt().mark((function e(t,n){return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",qr(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),sa.apply(this,arguments)}function ca(e,t){return la.apply(this,arguments)}function la(){return la=Nt(Tt().mark((function e(t,n){return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",qr(t,"POST","/v1/accounts:update",Br(t,n)));case 1:case"end":return e.stop()}}),e)}))),la.apply(this,arguments)}function fa(e,t){return ha.apply(this,arguments)}function ha(){return ha=Nt(Tt().mark((function e(t,n){return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Wr(t,"POST","/v1/accounts:signInWithPassword",Br(t,n)));case 1:case"end":return e.stop()}}),e)}))),ha.apply(this,arguments)}function da(e,t){return pa.apply(this,arguments)}function pa(){return pa=Nt(Tt().mark((function e(t,n){return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",qr(t,"POST","/v1/accounts:sendOobCode",Br(t,n)));case 1:case"end":return e.stop()}}),e)}))),pa.apply(this,arguments)}function va(e,t){return ma.apply(this,arguments)}function ma(){return ma=Nt(Tt().mark((function e(t,n){return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",da(t,n));case 1:case"end":return e.stop()}}),e)}))),ma.apply(this,arguments)}function ya(e,t){return ga.apply(this,arguments)}function ga(){return ga=Nt(Tt().mark((function e(t,n){return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",da(t,n));case 1:case"end":return e.stop()}}),e)}))),ga.apply(this,arguments)}function ka(e,t){return wa.apply(this,arguments)}function wa(){return wa=Nt(Tt().mark((function e(t,n){return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",da(t,n));case 1:case"end":return e.stop()}}),e)}))),wa.apply(this,arguments)}function ba(e,t){return xa.apply(this,arguments)}function xa(){return xa=Nt(Tt().mark((function e(t,n){return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",da(t,n));case 1:case"end":return e.stop()}}),e)}))),xa.apply(this,arguments)}function _a(e,t){return Ia.apply(this,arguments)}function Ia(){return Ia=Nt(Tt().mark((function e(t,n){return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Wr(t,"POST","/v1/accounts:signInWithEmailLink",Br(t,n)));case 1:case"end":return e.stop()}}),e)}))),Ia.apply(this,arguments)}function Ea(e,t){return Sa.apply(this,arguments)}function Sa(){return Sa=Nt(Tt().mark((function e(t,n){return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Wr(t,"POST","/v1/accounts:signInWithEmailLink",Br(t,n)));case 1:case"end":return e.stop()}}),e)}))),Sa.apply(this,arguments)}var Ta=function(e){k(n,e);var t=_(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return d(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return y(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=Nt(Tt().mark((function e(t){var n,r,i;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?12:13;break;case 3:if(r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},!(null===(n=t._getRecaptchaConfig())||void 0===n?void 0:n.emailPasswordEnabled)){e.next=11;break}return e.next=7,Zi(t,r,"signInWithPassword");case 7:return i=e.sent,e.abrupt("return",fa(t,i));case 11:return e.abrupt("return",fa(t,r).catch(function(){var e=Nt(Tt().mark((function e(n){var i;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.code!=="auth/".concat("missing-recaptcha-token")){e.next=8;break}return console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow."),e.next=4,Zi(t,r,"signInWithPassword");case 4:return i=e.sent,e.abrupt("return",fa(t,i));case 8:return e.abrupt("return",Promise.reject(n));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 12:return e.abrupt("return",_a(t,{email:this._email,oobCode:this._password}));case 13:Sr(t,"internal-error");case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=Nt(Tt().mark((function e(t,n){return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",ua(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",Ea(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:Sr(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){return new n(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(ia);function Ca(e,t){return Na.apply(this,arguments)}function Na(){return Na=Nt(Tt().mark((function e(t,n){return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Wr(t,"POST","/v1/accounts:signInWithIdp",Br(t,n)));case 1:case"end":return e.stop()}}),e)}))),Na.apply(this,arguments)}var Aa=function(e){k(n,e);var t=_(n);function n(){var e;return d(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return y(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return Ca(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,Ca(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,Ca(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=wt(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Sr("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=ur(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(ia);function Pa(e,t){return Ra.apply(this,arguments)}function Ra(){return Ra=Nt(Tt().mark((function e(t,n){return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",qr(t,"POST","/v1/accounts:sendVerificationCode",Br(t,n)));case 1:case"end":return e.stop()}}),e)}))),Ra.apply(this,arguments)}function Da(){return Da=Nt(Tt().mark((function e(t,n){return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Wr(t,"POST","/v1/accounts:signInWithPhoneNumber",Br(t,n)));case 1:case"end":return e.stop()}}),e)}))),Da.apply(this,arguments)}function Oa(){return Oa=Nt(Tt().mark((function e(t,n){var r;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Wr(t,"POST","/v1/accounts:signInWithPhoneNumber",Br(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw Xr(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)}))),Oa.apply(this,arguments)}var La=$e({},"USER_NOT_FOUND","user-not-found");function Ma(){return Ma=Nt(Tt().mark((function e(t,n){var r;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",Wr(t,"POST","/v1/accounts:signInWithPhoneNumber",Br(t,r),La));case 2:case"end":return e.stop()}}),e)}))),Ma.apply(this,arguments)}var Fa=function(e){k(n,e);var t=_(n);function n(e){var r;return d(this,n),(r=t.call(this,"phone","phone")).params=e,r}return y(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return Da.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return Oa.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return Ma.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(ia);var Ua=function(){function e(t){var n,r,i,a,o,u;d(this,e);var s=bt(xt(t)),c=null!==(n=s.apiKey)&&void 0!==n?n:null,l=null!==(r=s.oobCode)&&void 0!==r?r:null,f=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=s.mode)&&void 0!==i?i:null);Pr(c&&l&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=l,this.continueUrl=null!==(a=s.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=s.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(u=s.tenantId)&&void 0!==u?u:null}return y(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=bt(xt(e)).link,n=t?bt(xt(t)).deep_link_id:null,r=bt(xt(e)).deep_link_id;return(r?bt(xt(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(r){return null}}}]),e}();var Va=function(){function e(){d(this,e),this.providerId=e.PROVIDER_ID}return y(e,null,[{key:"credential",value:function(e,t){return Ta._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=Ua.parseLink(t);return Pr(n,"argument-error"),Ta._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();Va.PROVIDER_ID="password",Va.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Va.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var ja=function(){function e(t){d(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return y(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),za=function(e){k(n,e);var t=_(n);function n(){var e;return d(this,n),(e=t.apply(this,arguments)).scopes=[],e}return y(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return h(this.scopes)}}]),n}(ja),Ba=function(e){k(n,e);var t=_(n);function n(){return d(this,n),t.apply(this,arguments)}return y(n,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return Pr(e.idToken||e.accessToken,"argument-error"),Aa._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;return Pr("providerId"in t&&"signInMethod"in t,"argument-error"),Aa._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken,a=t.oauthTokenSecret,o=t.pendingToken,u=t.nonce,s=t.providerId;if(!i&&!a&&!r&&!o)return null;if(!s)return null;try{return new n(s)._credential({idToken:r,accessToken:i,nonce:u,pendingToken:o})}catch(c){return null}}}]),n}(za),qa=function(e){k(n,e);var t=_(n);function n(){return d(this,n),t.call(this,"facebook.com")}return y(n,null,[{key:"credential",value:function(e){return Aa._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(r){return null}}}]),n}(za);qa.FACEBOOK_SIGN_IN_METHOD="facebook.com",qa.PROVIDER_ID="facebook.com";var Ka=function(e){k(n,e);var t=_(n);function n(){var e;return d(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return y(n,null,[{key:"credential",value:function(e,t){return Aa._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(a){return null}}}]),n}(za);Ka.GOOGLE_SIGN_IN_METHOD="google.com",Ka.PROVIDER_ID="google.com";var Ga=function(e){k(n,e);var t=_(n);function n(){return d(this,n),t.call(this,"github.com")}return y(n,null,[{key:"credential",value:function(e){return Aa._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(r){return null}}}]),n}(za);Ga.GITHUB_SIGN_IN_METHOD="github.com",Ga.PROVIDER_ID="github.com";var Ha=function(e){k(n,e);var t=_(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,e)).pendingToken=r,i}return y(n,[{key:"_getIdTokenResponse",value:function(e){return Ca(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,Ca(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,Ca(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=t.pendingToken;return r&&i&&a&&r===i?new n(r,a):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(ia),Wa=function(e){k(n,e);var t=_(n);function n(e){return d(this,n),Pr(e.startsWith("saml."),"argument-error"),t.call(this,e)}return y(n,null,[{key:"credentialFromResult",value:function(e){return n.samlCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.samlCredentialFromTaggedObject(e.customData||{})}},{key:"credentialFromJSON",value:function(e){var t=Ha.fromJSON(e);return Pr(t,"argument-error"),t}},{key:"samlCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.pendingToken,r=t.providerId;if(!n||!r)return null;try{return Ha._create(r,n)}catch(i){return null}}}]),n}(ja),Qa=function(e){k(n,e);var t=_(n);function n(){return d(this,n),t.call(this,"twitter.com")}return y(n,null,[{key:"credential",value:function(e,t){return Aa._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(a){return null}}}]),n}(za);function Ya(e,t){return $a.apply(this,arguments)}function $a(){return $a=Nt(Tt().mark((function e(t,n){return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Wr(t,"POST","/v1/accounts:signUp",Br(t,n)));case 1:case"end":return e.stop()}}),e)}))),$a.apply(this,arguments)}Qa.TWITTER_SIGN_IN_METHOD="twitter.com",Qa.PROVIDER_ID="twitter.com";var Xa=function(){function e(t){d(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return y(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=Nt(Tt().mark((function t(n,r,i){var a,o,u,s,c=arguments;return Tt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>3&&void 0!==c[3]&&c[3],t.next=3,Ei._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,u=Ja(i),s=new e({user:o,providerId:u,_tokenResponse:i,operationType:r}),t.abrupt("return",s);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=Nt(Tt().mark((function t(n,r,i){var a;return Tt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=Ja(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function Ja(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function Za(){return Za=Nt(Tt().mark((function e(t){var n,r,i,a;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Qi(t),e.next=3,r._initializationPromise;case 3:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new Xa({user:r.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,Ya(r,{returnSecureToken:!0});case 7:return i=e.sent,e.next=10,Xa._fromIdTokenResponse(r,"signIn",i,!0);case 10:return a=e.sent,e.next=13,r._updateCurrentUser(a.user);case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)}))),Za.apply(this,arguments)}var eo=function(e){k(n,e);var t=_(n);function n(e,r,i,a){var o,u;return d(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf(x(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(u=e.tenantId)&&void 0!==u?u:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return y(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(dt);function to(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw eo._fromErrorAndOperation(e,n,t,r);throw n}))}function no(e){return new Set(e.map((function(e){return e.providerId})).filter((function(e){return!!e})))}function ro(e,t){return io.apply(this,arguments)}function io(){return io=Nt(Tt().mark((function e(t,n){var r,i,a,o;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=St(t),e.next=3,uo(!0,r,n);case 3:return e.t0=ii,e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return i=e.sent,a=i.providerUserInfo,o=no(a||[]),r.providerData=r.providerData.filter((function(e){return o.has(e.providerId)})),o.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e)}))),io.apply(this,arguments)}function ao(e,t){return oo.apply(this,arguments)}function oo(){return oo=Nt(Tt().mark((function e(t,n){var r,i,a=arguments;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=hi,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",Xa._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),oo.apply(this,arguments)}function uo(e,t,n){return so.apply(this,arguments)}function so(){return(so=Nt(Tt().mark((function e(t,n,r){var i,a;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yi(n);case 2:i=no(n.providerData),a=!1===t?"provider-already-linked":"no-such-provider",Pr(i.has(r)===t,n.auth,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function co(e,t){return lo.apply(this,arguments)}function lo(){return lo=Nt(Tt().mark((function e(t,n){var r,i,a,o,u,s,c=arguments;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]&&c[2],i=t.auth,a="reauthenticate",e.prev=3,e.next=6,hi(t,to(i,a,n,t),r);case 6:return Pr((o=e.sent).idToken,i,"internal-error"),Pr(u=fi(o.idToken),i,"internal-error"),s=u.sub,Pr(t.uid===s,i,"user-mismatch"),e.abrupt("return",Xa._forOperation(t,a,o));case 15:throw e.prev=15,e.t0=e.catch(3),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("user-not-found")&&Sr(i,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),lo.apply(this,arguments)}function fo(e,t){return ho.apply(this,arguments)}function ho(){return ho=Nt(Tt().mark((function e(t,n){var r,i,a,o,u=arguments;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i="signIn",e.next=4,to(t,i,n);case 4:return a=e.sent,e.next=7,Xa._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),ho.apply(this,arguments)}function po(e,t){return vo.apply(this,arguments)}function vo(){return vo=Nt(Tt().mark((function e(t,n){return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fo(Qi(t),n));case 1:case"end":return e.stop()}}),e)}))),vo.apply(this,arguments)}function mo(e,t){return yo.apply(this,arguments)}function yo(){return(yo=Nt(Tt().mark((function e(t,n){var r;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=St(t),e.next=3,uo(!1,r,n.providerId);case 3:return e.abrupt("return",ao(r,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function go(e,t){return ko.apply(this,arguments)}function ko(){return(ko=Nt(Tt().mark((function e(t,n){return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",co(St(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wo(e,t){return bo.apply(this,arguments)}function bo(){return bo=Nt(Tt().mark((function e(t,n){return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Wr(t,"POST","/v1/accounts:signInWithCustomToken",Br(t,n)));case 1:case"end":return e.stop()}}),e)}))),bo.apply(this,arguments)}function xo(){return xo=Nt(Tt().mark((function e(t,n){var r,i,a;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Qi(t),e.next=3,wo(r,{token:n,returnSecureToken:!0});case 3:return i=e.sent,e.next=6,Xa._fromIdTokenResponse(r,"signIn",i);case 6:return a=e.sent,e.next=9,r._updateCurrentUser(a.user);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)}))),xo.apply(this,arguments)}var _o=function(){function e(t,n){d(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return y(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?Io._fromServerResponse(e,t):"totpInfo"in t?Eo._fromServerResponse(e,t):Sr(e,"internal-error")}}]),e}(),Io=function(e){k(n,e);var t=_(n);function n(e){var r;return d(this,n),(r=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,r}return y(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(_o),Eo=function(e){k(n,e);var t=_(n);function n(e){return d(this,n),t.call(this,"totp",e)}return y(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(_o);function So(e,t,n){var r;Pr((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),Pr("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Pr(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(Pr(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function To(e){return Co.apply(this,arguments)}function Co(){return Co=Nt(Tt().mark((function e(t){var n;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=Qi(t))._getPasswordPolicyInternal()){e.next=4;break}return e.next=4,n._updatePasswordPolicy();case 4:case"end":return e.stop()}}),e)}))),Co.apply(this,arguments)}function No(){return No=Nt(Tt().mark((function e(t,n,r){var i,a,o,u;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=Qi(t),o={requestType:"PASSWORD_RESET",email:n,clientType:"CLIENT_TYPE_WEB"},!(null===(i=a._getRecaptchaConfig())||void 0===i?void 0:i.emailPasswordEnabled)){e.next=11;break}return e.next=5,Zi(a,o,"getOobCode",!0);case 5:return u=e.sent,r&&So(a,u,r),e.next=9,ya(a,u);case 9:e.next=14;break;case 11:return r&&So(a,o,r),e.next=14,ya(a,o).catch(function(){var e=Nt(Tt().mark((function e(t){var n;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code!=="auth/".concat("missing-recaptcha-token")){e.next=10;break}return console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow."),e.next=4,Zi(a,o,"getOobCode",!0);case 4:return n=e.sent,r&&So(a,n,r),e.next=8,ya(a,n);case 8:e.next=11;break;case 10:return e.abrupt("return",Promise.reject(t));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 14:case"end":return e.stop()}}),e)}))),No.apply(this,arguments)}function Ao(){return Ao=Nt(Tt().mark((function e(t,n,r){return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,aa(St(t),{oobCode:n,newPassword:r}).catch(function(){var e=Nt(Tt().mark((function e(n){return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw n.code==="auth/".concat("password-does-not-meet-requirements")&&To(t),n;case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)}))),Ao.apply(this,arguments)}function Po(){return Po=Nt(Tt().mark((function e(t,n){return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ca(St(t),{oobCode:n});case 2:case"end":return e.stop()}}),e)}))),Po.apply(this,arguments)}function Ro(e,t){return Do.apply(this,arguments)}function Do(){return Do=Nt(Tt().mark((function e(t,n){var r,i,a,o;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=St(t),e.next=3,aa(r,{oobCode:n});case 3:i=e.sent,Pr(a=i.requestType,r,"internal-error"),e.t0=a,e.next="EMAIL_SIGNIN"===e.t0?9:"VERIFY_AND_CHANGE_EMAIL"===e.t0?10:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?12:13;break;case 9:return e.abrupt("break",14);case 10:return Pr(i.newEmail,r,"internal-error"),e.abrupt("break",14);case 12:Pr(i.mfaInfo,r,"internal-error");case 13:Pr(i.email,r,"internal-error");case 14:return o=null,i.mfaInfo&&(o=_o._fromServerResponse(Qi(r),i.mfaInfo)),e.abrupt("return",{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:o},operation:a});case 17:case"end":return e.stop()}}),e)}))),Do.apply(this,arguments)}function Oo(){return Oo=Nt(Tt().mark((function e(t,n){var r,i;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ro(St(t),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i.email);case 5:case"end":return e.stop()}}),e)}))),Oo.apply(this,arguments)}function Lo(e,t,n){return Mo.apply(this,arguments)}function Mo(){return Mo=Nt(Tt().mark((function e(t,n,r){var i,a,o,u,s,c,l;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=Qi(t),o={returnSecureToken:!0,email:n,password:r,clientType:"CLIENT_TYPE_WEB"},!(null===(i=a._getRecaptchaConfig())||void 0===i?void 0:i.emailPasswordEnabled)){e.next=9;break}return e.next=5,Zi(a,o,"signUpPassword");case 5:s=e.sent,u=Ya(a,s),e.next=10;break;case 9:u=Ya(a,o).catch(function(){var e=Nt(Tt().mark((function e(t){var n;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code!=="auth/".concat("missing-recaptcha-token")){e.next=6;break}return console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow."),e.next=4,Zi(a,o,"signUpPassword");case 4:return n=e.sent,e.abrupt("return",Ya(a,n));case 6:throw t;case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:return e.next=12,u.catch((function(e){throw e.code==="auth/".concat("password-does-not-meet-requirements")&&To(t),e}));case 12:return c=e.sent,e.next=15,Xa._fromIdTokenResponse(a,"signIn",c);case 15:return l=e.sent,e.next=18,a._updateCurrentUser(l.user);case 18:return e.abrupt("return",l);case 19:case"end":return e.stop()}}),e)}))),Mo.apply(this,arguments)}function Fo(){return Fo=Nt(Tt().mark((function e(t,n,r){var i,a,o,u,s;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=function(e,t){Pr(t.handleCodeInApp,a,"argument-error"),t&&So(a,e,t)},a=Qi(t),o={requestType:"EMAIL_SIGNIN",email:n,clientType:"CLIENT_TYPE_WEB"},!(null===(i=a._getRecaptchaConfig())||void 0===i?void 0:i.emailPasswordEnabled)){e.next=12;break}return e.next=6,Zi(a,o,"getOobCode",!0);case 6:return s=e.sent,u(s,r),e.next=10,ka(a,s);case 10:e.next=15;break;case 12:return u(o,r),e.next=15,ka(a,o).catch(function(){var e=Nt(Tt().mark((function e(t){var n;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code!=="auth/".concat("missing-recaptcha-token")){e.next=10;break}return console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow."),e.next=4,Zi(a,o,"getOobCode",!0);case 4:return n=e.sent,u(n,r),e.next=8,ka(a,n);case 8:e.next=11;break;case 10:return e.abrupt("return",Promise.reject(t));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 15:case"end":return e.stop()}}),e)}))),Fo.apply(this,arguments)}function Uo(){return Uo=Nt(Tt().mark((function e(t,n,r){var i,a;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=St(t),Pr((a=Va.credentialWithLink(n,r||Or()))._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),e.abrupt("return",po(i,a));case 4:case"end":return e.stop()}}),e)}))),Uo.apply(this,arguments)}function Vo(e,t){return jo.apply(this,arguments)}function jo(){return jo=Nt(Tt().mark((function e(t,n){return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",qr(t,"POST","/v1/accounts:createAuthUri",Br(t,n)));case 1:case"end":return e.stop()}}),e)}))),jo.apply(this,arguments)}function zo(){return zo=Nt(Tt().mark((function e(t,n){var r,i,a,o;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Lr()?Or():"http://localhost",i={identifier:n,continueUri:r},e.next=4,Vo(St(t),i);case 4:return a=e.sent,o=a.signinMethods,e.abrupt("return",o||[]);case 7:case"end":return e.stop()}}),e)}))),zo.apply(this,arguments)}function Bo(){return(Bo=Nt(Tt().mark((function e(t,n){var r,i,a,o;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=St(t),e.next=3,t.getIdToken();case 3:return i=e.sent,a={requestType:"VERIFY_EMAIL",idToken:i},n&&So(r.auth,a,n),e.next=8,va(r.auth,a);case 8:if(o=e.sent,o.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qo(){return(qo=Nt(Tt().mark((function e(t,n,r){var i,a,o,u;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=St(t),e.next=3,t.getIdToken();case 3:return a=e.sent,o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:a,newEmail:n},r&&So(i.auth,o,r),e.next=8,ba(i.auth,o);case 8:if(u=e.sent,u.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ko(e,t){return Go.apply(this,arguments)}function Go(){return Go=Nt(Tt().mark((function e(t,n){return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",qr(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),Go.apply(this,arguments)}function Ho(){return(Ho=Nt(Tt().mark((function e(t,n){var r,i,a,o,u,s,c;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return a=St(t),e.next=6,a.getIdToken();case 6:return o=e.sent,u={idToken:o,displayName:r,photoUrl:i,returnSecureToken:!0},e.next=10,hi(a,Ko(a.auth,u));case 10:return s=e.sent,a.displayName=s.displayName||null,a.photoURL=s.photoUrl||null,(c=a.providerData.find((function(e){return"password"===e.providerId})))&&(c.displayName=a.displayName,c.photoURL=a.photoURL),e.next=17,a._updateTokensIfNecessary(s);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Wo(e,t,n){return Qo.apply(this,arguments)}function Qo(){return Qo=Nt(Tt().mark((function e(t,n,r){var i,a,o,u;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return a=e.sent,o={idToken:a,returnSecureToken:!0},n&&(o.email=n),r&&(o.password=r),e.next=9,hi(t,ua(i,o));case 9:return u=e.sent,e.next=12,t._updateTokensIfNecessary(u,!0);case 12:case"end":return e.stop()}}),e)}))),Qo.apply(this,arguments)}var Yo=y((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};d(this,e),this.isNewUser=t,this.providerId=n,this.profile=r})),$o=function(e){k(n,e);var t=_(n);function n(e,r,i,a){var o;return d(this,n),(o=t.call(this,e,r,i)).username=a,o}return y(n)}(Yo),Xo=function(e){k(n,e);var t=_(n);function n(e,r){return d(this,n),t.call(this,e,"facebook.com",r)}return y(n)}(Yo),Jo=function(e){k(n,e);var t=_(n);function n(e,r){return d(this,n),t.call(this,e,"github.com",r,"string"===typeof(null===r||void 0===r?void 0:r.login)?null===r||void 0===r?void 0:r.login:null)}return y(n)}($o),Zo=function(e){k(n,e);var t=_(n);function n(e,r){return d(this,n),t.call(this,e,"google.com",r)}return y(n)}(Yo),eu=function(e){k(n,e);var t=_(n);function n(e,r,i){return d(this,n),t.call(this,e,"twitter.com",r,i)}return y(n)}($o);function tu(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},a=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){var o=null===(n=null===(t=fi(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(o)return new Yo(a,"anonymous"!==o&&"custom"!==o?o:null)}if(!r)return null;switch(r){case"facebook.com":return new Xo(a,i);case"github.com":return new Jo(a,i);case"google.com":return new Zo(a,i);case"twitter.com":return new eu(a,i,e.screenName||null);case"custom":case"anonymous":return new Yo(a,null);default:return new Yo(a,r,i)}}(n)}var nu=function(){function e(t,n,r){d(this,e),this.type=t,this.credential=n,this.user=r}return y(e,[{key:"toJSON",value:function(){return{multiFactorSession:$e({},"enroll"===this.type?"idToken":"pendingCredential",this.credential)}}}],[{key:"_fromIdtoken",value:function(t,n){return new e("enroll",t,n)}},{key:"_fromMfaPendingCredential",value:function(t){return new e("signin",t)}},{key:"fromJSON",value:function(t){var n,r;if(null===t||void 0===t?void 0:t.multiFactorSession){if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(r=t.multiFactorSession)||void 0===r?void 0:r.idToken)return e._fromIdtoken(t.multiFactorSession.idToken)}return null}}]),e}(),ru=function(){function e(t,n,r){d(this,e),this.session=t,this.hints=n,this.signInResolver=r}return y(e,[{key:"resolveSignIn",value:function(){var e=Nt(Tt().mark((function e(t){var n;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.abrupt("return",this.signInResolver(n));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromError",value:function(t,n){var r=Qi(t),i=n.customData._serverResponse,a=(i.mfaInfo||[]).map((function(e){return _o._fromServerResponse(r,e)}));Pr(i.mfaPendingCredential,r,"internal-error");var o=nu._fromMfaPendingCredential(i.mfaPendingCredential);return new e(o,a,function(){var e=Nt(Tt().mark((function e(t){var a,u,s;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,o);case 2:a=e.sent,delete i.mfaInfo,delete i.mfaPendingCredential,u=Object.assign(Object.assign({},i),{idToken:a.idToken,refreshToken:a.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?9:"reauthenticate"===e.t0?15:17;break;case 9:return e.next=11,Xa._fromIdTokenResponse(r,n.operationType,u);case 11:return s=e.sent,e.next=14,r._updateCurrentUser(s.user);case 14:return e.abrupt("return",s);case 15:return Pr(n.user,r,"internal-error"),e.abrupt("return",Xa._forOperation(n.user,n.operationType,u));case 17:Sr(r,"internal-error");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]),e}();function iu(e,t){return qr(e,"POST","/v2/accounts/mfaEnrollment:start",Br(e,t))}function au(e,t){return qr(e,"POST","/v2/accounts/mfaEnrollment:start",Br(e,t))}function ou(e,t){return qr(e,"POST","/v2/accounts/mfaEnrollment:finalize",Br(e,t))}function uu(e,t){return qr(e,"POST","/v2/accounts/mfaEnrollment:withdraw",Br(e,t))}var su=function(){function e(t){var n=this;d(this,e),this.user=t,this.enrolledFactors=[],t._onReload((function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map((function(e){return _o._fromServerResponse(t.auth,e)})))}))}return y(e,[{key:"getSession",value:function(){var e=Nt(Tt().mark((function e(){return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=nu,e.next=3,this.user.getIdToken();case 3:return e.t1=e.sent,e.t2=this.user,e.abrupt("return",e.t0._fromIdtoken.call(e.t0,e.t1,e.t2));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"enroll",value:function(){var e=Nt(Tt().mark((function e(t,n){var r,i,a;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.next=3,this.getSession();case 3:return i=e.sent,e.next=6,hi(this.user,r._process(this.user.auth,i,n));case 6:return a=e.sent,e.next=9,this.user._updateTokensIfNecessary(a);case 9:return e.abrupt("return",this.user.reload());case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unenroll",value:function(){var e=Nt(Tt().mark((function e(t){var n,r,i;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="string"===typeof t?t:t.uid,e.next=3,this.user.getIdToken();case 3:return r=e.sent,e.prev=4,e.next=7,hi(this.user,uu(this.user.auth,{idToken:r,mfaEnrollmentId:n}));case 7:return i=e.sent,this.enrolledFactors=this.enrolledFactors.filter((function(e){return e.uid!==n})),e.next=11,this.user._updateTokensIfNecessary(i);case 11:return e.next=13,this.user.reload();case 13:e.next=18;break;case 15:throw e.prev=15,e.t0=e.catch(4),e.t0;case 18:case"end":return e.stop()}}),e,this,[[4,15]])})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),cu=new WeakMap;var lu="__sak",fu=function(){function e(t,n){d(this,e),this.storageRetriever=t,this.type=n}return y(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(lu,"1"),this.storage.removeItem(lu),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var hu=function(e){k(n,e);var t=_(n);function n(){var e;return d(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=ut();return Oi(e)||ji(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=zi(),e._shouldAllowMigration=!0,e}return y(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);ft()&&10===document.documentMode&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=Nt(Tt().mark((function e(t,r){return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,or(w(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Nt(Tt().mark((function e(t){var r;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,or(w(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Nt(Tt().mark((function e(t){return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,or(w(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(fu);hu.type="LOCAL";var du=hu,pu=function(e){k(n,e);var t=_(n);function n(){return d(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return y(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(fu);pu.type="SESSION";var vu=pu;function mu(e){return Promise.all(e.map(function(){var e=Nt(Tt().mark((function e(t){var n;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var yu=function(){function e(t){d(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return y(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=Nt(Tt().mark((function e(t){var n,r,i,a,o,u,s,c;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,o=r.data,null===(u=this.handlersMap[a])||void 0===u?void 0:u.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),s=Array.from(u).map(function(){var e=Nt(Tt().mark((function e(t){return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,mu(s);case 9:c=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:c});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function gu(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}yu.receivers=[];var ku=function(){function e(t){d(this,e),this.target=t,this.handlers=new Set}return y(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=Nt(Tt().mark((function e(t,n){var r,i,a,o,u=this,s=arguments;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.length>2&&void 0!==s[2]?s[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,s){var c=gu("",20);i.port1.start();var l=setTimeout((function(){s(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){s(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),s(new Error("invalid_response"))}}},u.handlers.add(o),i.port1.addEventListener("message",o.onMessage),u.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){o&&u.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function wu(){return window}function bu(e){wu().location.href=e}function xu(){return"undefined"!==typeof wu().WorkerGlobalScope&&"function"===typeof wu().importScripts}function _u(){return Iu.apply(this,arguments)}function Iu(){return(Iu=Nt(Tt().mark((function e(){var t;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function Eu(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var Su="firebaseLocalStorageDb",Tu="firebaseLocalStorage",Cu="fbase_key",Nu=function(){function e(t){d(this,e),this.request=t}return y(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function Au(e,t){return e.transaction([Tu],t?"readwrite":"readonly").objectStore(Tu)}function Pu(){var e=indexedDB.deleteDatabase(Su);return new Nu(e).toPromise()}function Ru(){var e=indexedDB.open(Su,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(Tu,{keyPath:Cu})}catch(r){n(r)}})),e.addEventListener("success",Nt(Tt().mark((function n(){var r;return Tt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(Tu)){n.next=12;break}return r.close(),n.next=5,Pu();case 5:return n.t0=t,n.next=8,Ru();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function Du(e,t,n){return Ou.apply(this,arguments)}function Ou(){return Ou=Nt(Tt().mark((function e(t,n,r){var i,a;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Au(t,!0).put(($e(i={},Cu,n),$e(i,"value",r),i)),e.abrupt("return",new Nu(a).toPromise());case 2:case"end":return e.stop()}}),e)}))),Ou.apply(this,arguments)}function Lu(e,t){return Mu.apply(this,arguments)}function Mu(){return Mu=Nt(Tt().mark((function e(t,n){var r,i;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Au(t,!1).get(n),e.next=3,new Nu(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),Mu.apply(this,arguments)}function Fu(e,t){var n=Au(e,!0).delete(t);return new Nu(n).toPromise()}var Uu=function(){function e(){d(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return y(e,[{key:"_openDb",value:function(){var e=Nt(Tt().mark((function e(){return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,Ru();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=Nt(Tt().mark((function e(t){var n,r;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=Nt(Tt().mark((function e(){return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",xu()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=Nt(Tt().mark((function e(){var t=this;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=yu._getInstance(xu()?self:null),this.receiver._subscribe("keyChanged",function(){var e=Nt(Tt().mark((function e(n,r){var i;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=Nt(Tt().mark((function e(t,n){return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=Nt(Tt().mark((function e(){var t,n,r;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_u();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new ku(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=Nt(Tt().mark((function e(t){return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&Eu()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=Nt(Tt().mark((function e(){var t;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,Ru();case 5:return t=e.sent,e.next=8,Du(t,lu,"1");case 8:return e.next=10,Fu(t,lu);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=Nt(Tt().mark((function e(t){return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=Nt(Tt().mark((function e(t,n){var r=this;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(Nt(Tt().mark((function e(){return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return Du(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Nt(Tt().mark((function e(t){var n;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return Lu(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Nt(Tt().mark((function e(t){var n=this;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(Nt(Tt().mark((function e(){return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return Fu(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=Nt(Tt().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=Au(e,!1).getAll();return new Nu(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=T(t);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.fbase_key,s=o.value,r.add(u),JSON.stringify(this.localCache[u])!==JSON.stringify(s)&&(this.notifyListeners(u,s),n.push(u))}catch(h){i.e(h)}finally{i.f()}for(c=0,l=Object.keys(this.localCache);c<l.length;c++)f=l[c],this.localCache[f]&&!r.has(f)&&(this.notifyListeners(f,null),n.push(f));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(Nt(Tt().mark((function t(){return Tt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();Uu.type="LOCAL";var Vu=Uu;function ju(e,t){return qr(e,"POST","/v2/accounts/mfaSignIn:start",Br(e,t))}function zu(e,t){return qr(e,"POST","/v2/accounts/mfaSignIn:finalize",Br(e,t))}var Bu=1e12,qu=function(){function e(t){d(this,e),this.auth=t,this.counter=Bu,this._widgets=new Map}return y(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new Ku(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||Bu;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t,n=e||Bu;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(){var e=Nt(Tt().mark((function e(t){var n,r;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t||Bu,null===(n=this._widgets.get(r))||void 0===n||n.execute(),e.abrupt("return","");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Ku=function(){function e(t,n,r){var i=this;d(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){i.execute()};var a="string"===typeof t?document.getElementById(t):t;Pr(a,"argument-error",{appName:n}),this.container=a,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return y(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(i){}e.timerId=window.setTimeout((function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(i){}e.isVisible&&e.execute()}),6e4)}),500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}();var Gu=Xi("rcb"),Hu=new Fr(3e4,6e4),Wu=function(){function e(){var t;d(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(t=wu().grecaptcha)||void 0===t?void 0:t.render)}return y(e,[{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Pr(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(n),e,"argument-error"),this.shouldResolveImmediately(n)&&mr(wu().grecaptcha)?Promise.resolve(wu().grecaptcha):new Promise((function(r,i){var a=wu().setTimeout((function(){i(Tr(e,"network-request-failed"))}),Hu.get());wu()[Gu]=function(){wu().clearTimeout(a),delete wu()[Gu];var o=wu().grecaptcha;if(o&&mr(o)){var u=o.render;o.render=function(e,n){var r=u(e,n);return t.counter++,r},t.hostLanguage=n,r(o)}else i(Tr(e,"internal-error"))},$i("".concat("https://www.google.com/recaptcha/api.js?","?").concat(wt({onload:Gu,render:"explicit",hl:n}))).catch((function(){clearTimeout(a),i(Tr(e,"internal-error"))}))}))}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){var t;return!!(null===(t=wu().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}();var Qu=function(){function e(){d(this,e)}return y(e,[{key:"load",value:function(){var e=Nt(Tt().mark((function e(t){return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new qu(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearedOneInstance",value:function(){}}]),e}(),Yu="recaptcha",$u={theme:"light",type:"image"},Xu=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object.assign({},$u);d(this,e),this.parameters=r,this.type=Yu,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Qi(t),this.isInvisible="invisible"===this.parameters.size,Pr("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");var i="string"===typeof n?document.getElementById(n):n;Pr(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Qu:new Wu,this.validateStartingState()}return y(e,[{key:"verify",value:function(){var e=Nt(Tt().mark((function e(){var t,n,r,i=this;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertNotDestroyed(),e.next=3,this.render();case 3:if(t=e.sent,n=this.getAssertedRecaptcha(),!(r=n.getResponse(t))){e.next=8;break}return e.abrupt("return",r);case 8:return e.abrupt("return",new Promise((function(e){i.tokenChangeListeners.add((function t(n){n&&(i.tokenChangeListeners.delete(t),e(n))})),i.isInvisible&&n.execute(t)})));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((function(t){throw e.renderPromise=null,t}))),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((function(t){e.container.removeChild(t)}))}},{key:"validateStartingState",value:function(){Pr(!this.parameters.sitekey,this.auth,"argument-error"),Pr(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Pr("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach((function(e){return e(n)})),"function"===typeof e)e(n);else if("string"===typeof e){var r=wu()[e];"function"===typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){Pr(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var e=Nt(Tt().mark((function e(){var t,n;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return this.widgetId||(t=this.container,this.isInvisible||(n=document.createElement("div"),t.appendChild(n),t=n),this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)),e.abrupt("return",this.widgetId);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=Nt(Tt().mark((function e(){var t;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Pr(Lr()&&!xu(),this.auth,"internal-error"),e.next=3,Ju();case 3:return e.next=5,this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);case 5:return this.recaptcha=e.sent,e.next=8,Jr(this.auth);case 8:Pr(t=e.sent,this.auth,"internal-error"),this.parameters.sitekey=t;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAssertedRecaptcha",value:function(){return Pr(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}();function Ju(){var e=null;return new Promise((function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()})).catch((function(t){throw e&&window.removeEventListener("load",e),t}))}var Zu=function(){function e(t,n){d(this,e),this.verificationId=t,this.onConfirmation=n}return y(e,[{key:"confirm",value:function(e){var t=Fa._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function es(){return es=Nt(Tt().mark((function e(t,n,r){var i,a;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Qi(t),e.next=3,is(i,n,St(r));case 3:return a=e.sent,e.abrupt("return",new Zu(a,(function(e){return po(i,e)})));case 5:case"end":return e.stop()}}),e)}))),es.apply(this,arguments)}function ts(e,t,n){return ns.apply(this,arguments)}function ns(){return(ns=Nt(Tt().mark((function e(t,n,r){var i,a;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=St(t),e.next=3,uo(!1,i,"phone");case 3:return e.next=5,is(i.auth,n,St(r));case 5:return a=e.sent,e.abrupt("return",new Zu(a,(function(e){return mo(i,e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function rs(){return(rs=Nt(Tt().mark((function e(t,n,r){var i,a;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=St(t),e.next=3,is(i.auth,n,St(r));case 3:return a=e.sent,e.abrupt("return",new Zu(a,(function(e){return go(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function is(e,t,n){return as.apply(this,arguments)}function as(){return as=Nt(Tt().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,Pr("string"===typeof a,t,"argument-error"),Pr(r.type===Yu,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(u=o.session,!("phoneNumber"in o)){e.next=17;break}return Pr("enroll"===u.type,t,"internal-error"),e.next=13,iu(t,{idToken:u.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return s=e.sent,e.abrupt("return",s.phoneSessionInfo.sessionInfo);case 17:return Pr("signin"===u.type,t,"internal-error"),Pr(c=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,ju(t,{mfaPendingCredential:u.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:a}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,Pa(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return f=e.sent,h=f.sessionInfo,e.abrupt("return",h);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),as.apply(this,arguments)}function os(){return(os=Nt(Tt().mark((function e(t,n){return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ao(St(t),n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var us=function(){function e(t){d(this,e),this.providerId=e.PROVIDER_ID,this.auth=Qi(t)}return y(e,[{key:"verifyPhoneNumber",value:function(e,t){return is(this.auth,e,St(t))}}],[{key:"credential",value:function(e,t){return Fa._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?Fa._fromTokenResponse(n,r):null}}]),e}();function ss(e,t){return t?Ti(t):(Pr(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}us.PROVIDER_ID="phone",us.PHONE_SIGN_IN_METHOD="phone";var cs=function(e){k(n,e);var t=_(n);function n(e){var r;return d(this,n),(r=t.call(this,"custom","custom")).params=e,r}return y(n,[{key:"_getIdTokenResponse",value:function(e){return Ca(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return Ca(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return Ca(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(ia);function ls(e){return fo(e.auth,new cs(e),e.bypassAuthState)}function fs(e){var t=e.auth,n=e.user;return Pr(n,t,"internal-error"),co(n,new cs(e),e.bypassAuthState)}function hs(e){return ds.apply(this,arguments)}function ds(){return ds=Nt(Tt().mark((function e(t){var n,r;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,Pr(r=t.user,n,"internal-error"),e.abrupt("return",ao(r,new cs(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)}))),ds.apply(this,arguments)}var ps=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];d(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return y(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=Nt(Tt().mark((function t(n,r){return Tt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=Nt(Tt().mark((function e(t){var n,r,i,a,o,u,s;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,u=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return s={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(u)(s);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return ls;case"linkViaPopup":case"linkViaRedirect":return hs;case"reauthViaPopup":case"reauthViaRedirect":return fs;default:Sr(this.auth,"internal-error")}}},{key:"resolve",value:function(e){Dr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){Dr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),vs=new Fr(2e3,1e4);function ms(e,t,n){return ys.apply(this,arguments)}function ys(){return ys=Nt(Tt().mark((function e(t,n,r){var i,a,o;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Qi(t),Nr(t,n,ja),a=ss(i,r),o=new bs(i,"signInViaPopup",n,a),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)}))),ys.apply(this,arguments)}function gs(){return(gs=Nt(Tt().mark((function e(t,n,r){var i,a,o;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Nr((i=St(t)).auth,n,ja),a=ss(i.auth,r),o=new bs(i.auth,"reauthViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ks(e,t,n){return ws.apply(this,arguments)}function ws(){return(ws=Nt(Tt().mark((function e(t,n,r){var i,a,o;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Nr((i=St(t)).auth,n,ja),a=ss(i.auth,r),o=new bs(i.auth,"linkViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var bs=function(e){k(n,e);var t=_(n);function n(e,r,i,a,o){var u;return d(this,n),(u=t.call(this,e,r,a,o)).provider=i,u.authWindow=null,u.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=x(u),u}return y(n,[{key:"executeNotNull",value:function(){var e=Nt(Tt().mark((function e(){var t;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return Pr(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=Nt(Tt().mark((function e(){var t,n=this;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Dr(1===this.filter.length,"Popup operations only handle one event"),t=gu(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(Tr(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(Tr(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(Tr(e.auth,"popup-closed-by-user"))}),8e3):e.pollId=window.setTimeout(t,vs.get())}()}}]),n}(ps);bs.currentPopupAction=null;var xs="pendingRedirect",_s=new Map,Is=function(e){k(n,e);var t=_(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return d(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return y(n,[{key:"execute",value:function(){var e=Nt(Tt().mark((function e(){var t,r;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=_s.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,Es(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,or(w(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:_s.set(this.auth._key(),t);case 21:return this.bypassAuthState||_s.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=Nt(Tt().mark((function e(t){var r;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",or(w(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",or(w(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=Nt(Tt().mark((function e(){return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(ps);function Es(e,t){return Ss.apply(this,arguments)}function Ss(){return Ss=Nt(Tt().mark((function e(t,n){var r,i,a;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ps(n),i=As(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)}))),Ss.apply(this,arguments)}function Ts(e,t){return Cs.apply(this,arguments)}function Cs(){return Cs=Nt(Tt().mark((function e(t,n){return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",As(t)._set(Ps(n),"true"));case 1:case"end":return e.stop()}}),e)}))),Cs.apply(this,arguments)}function Ns(e,t){_s.set(e._key(),t)}function As(e){return Ti(e._redirectPersistence)}function Ps(e){return Ai(xs,e.config.apiKey,e.name)}function Rs(e,t,n){return function(e,t,n){return Ds.apply(this,arguments)}(e,t,n)}function Ds(){return Ds=Nt(Tt().mark((function e(t,n,r){var i,a;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Qi(t),Nr(t,n,ja),e.next=4,i._initializationPromise;case 4:return a=ss(i,r),e.next=7,Ts(a,i);case 7:return e.abrupt("return",a._openRedirect(i,n,"signInViaRedirect"));case 8:case"end":return e.stop()}}),e)}))),Ds.apply(this,arguments)}function Os(e,t,n){return function(e,t,n){return Ls.apply(this,arguments)}(e,t,n)}function Ls(){return(Ls=Nt(Tt().mark((function e(t,n,r){var i,a,o;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Nr((i=St(t)).auth,n,ja),e.next=4,i.auth._initializationPromise;case 4:return a=ss(i.auth,r),e.next=7,Ts(a,i.auth);case 7:return e.next=9,Bs(i);case 9:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"reauthViaRedirect",o));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ms(e,t,n){return function(e,t,n){return Fs.apply(this,arguments)}(e,t,n)}function Fs(){return(Fs=Nt(Tt().mark((function e(t,n,r){var i,a,o;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Nr((i=St(t)).auth,n,ja),e.next=4,i.auth._initializationPromise;case 4:return a=ss(i.auth,r),e.next=7,uo(!1,i,n.providerId);case 7:return e.next=9,Ts(a,i.auth);case 9:return e.next=11,Bs(i);case 11:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"linkViaRedirect",o));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Us(e,t){return Vs.apply(this,arguments)}function Vs(){return Vs=Nt(Tt().mark((function e(t,n){return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qi(t)._initializationPromise;case 2:return e.abrupt("return",js(t,n,!1));case 3:case"end":return e.stop()}}),e)}))),Vs.apply(this,arguments)}function js(e,t){return zs.apply(this,arguments)}function zs(){return zs=Nt(Tt().mark((function e(t,n){var r,i,a,o,u,s=arguments;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i=Qi(t),a=ss(i,n),o=new Is(i,a,r),e.next=6,o.execute();case 6:if(!(u=e.sent)||r){e.next=13;break}return delete u.user._redirectEventId,e.next=11,i._persistUserIfCurrent(u.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",u);case 14:case"end":return e.stop()}}),e)}))),zs.apply(this,arguments)}function Bs(e){return qs.apply(this,arguments)}function qs(){return(qs=Nt(Tt().mark((function e(t){var n;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=gu("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ks=function(){function e(t){d(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return y(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Hs(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!Hs(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Tr(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Gs(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(Gs(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function Gs(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function Hs(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function Ws(e){return Qs.apply(this,arguments)}function Qs(){return Qs=Nt(Tt().mark((function e(t){var n,r=arguments;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",qr(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),Qs.apply(this,arguments)}var Ys=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,$s=/^https?/;function Xs(){return Xs=Nt(Tt().mark((function e(t){var n,r,i,a,o;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Ws(t);case 4:n=e.sent,r=n.authorizedDomains,i=T(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!Js(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:Sr(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])}))),Xs.apply(this,arguments)}function Js(e){var t=Or(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!$s.test(r))return!1;if(Ys.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var Zs=new Fr(3e4,6e4);function ec(){var e=wu().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=h(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var tc=null;function nc(e){return tc=tc||function(e){return new Promise((function(t,n){var r,i,a;function o(){ec(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){ec(),n(Tr(e,"network-request-failed"))},timeout:Zs.get()})}if(null===(i=null===(r=wu().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=wu().gapi)||void 0===a?void 0:a.load)){var u=Xi("iframefcb");return wu()[u]=function(){gapi.load?o():n(Tr(e,"network-request-failed"))},$i("https://apis.google.com/js/api.js?onload=".concat(u)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw tc=null,e}))}(e),tc}var rc=new Fr(5e3,15e3),ic="__/auth/iframe",ac="emulator/auth/iframe",oc={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},uc=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function sc(e){var t=e.config;Pr(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?Ur(t,ac):"https://".concat(e.config.authDomain,"/").concat(ic),r={apiKey:t.apiKey,appName:e.name,v:Tn},i=uc.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(wt(r).slice(1))}function cc(e){return lc.apply(this,arguments)}function lc(){return lc=Nt(Tt().mark((function e(t){var n,r;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nc(t);case 2:return n=e.sent,Pr(r=wu().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:sc(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:oc,dontclear:!0},(function(e){return new Promise(function(){var n=Nt(Tt().mark((function n(r,i){var a,o,u;return Tt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u=function(){wu().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=Tr(t,"network-request-failed"),o=wu().setTimeout((function(){i(a)}),rc.get()),e.ping(u).then(u,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),lc.apply(this,arguments)}var fc={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},hc=function(){function e(t){d(this,e),this.window=t,this.associatedEvent=null}return y(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function dc(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),u="",s=Object.assign(Object.assign({},fc),{width:r.toString(),height:i.toString(),top:a,left:o}),c=ut().toLowerCase();n&&(u=Li(c)?"_blank":n),Di(c)&&(t=t||"http://localhost",s.scrollbars="yes");var f=Object.entries(s).reduce((function(e,t){var n=l(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(function(){var e;return ji(arguments.length>0&&void 0!==arguments[0]?arguments[0]:ut())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==u)return function(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",u),new hc(null);var h=window.open(t||"",u,f);Pr(h,e,"popup-blocked");try{h.focus()}catch(d){}return new hc(h)}var pc="__/auth/handler",vc="emulator/auth/handler",mc=encodeURIComponent("fac");function yc(e,t,n,r,i,a){return gc.apply(this,arguments)}function gc(){return gc=Nt(Tt().mark((function e(t,n,r,i,a,o){var u,s,c,f,h,d,p,v,m,y,g,k,w;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Pr(t.config.authDomain,t,"auth-domain-config-required"),Pr(t.config.apiKey,t,"invalid-api-key"),u={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:i,v:Tn,eventId:a},n instanceof ja)for(n.setDefaultLanguage(t.languageCode),u.providerId=n.providerId||"",yt(n.getCustomParameters())||(u.customParameters=JSON.stringify(n.getCustomParameters())),s=0,c=Object.entries(o||{});s<c.length;s++)f=l(c[s],2),h=f[0],d=f[1],u[h]=d;for(n instanceof za&&(p=n.getScopes().filter((function(e){return""!==e}))).length>0&&(u.scopes=p.join(",")),t.tenantId&&(u.tid=t.tenantId),v=u,m=0,y=Object.keys(v);m<y.length;m++)g=y[m],void 0===v[g]&&delete v[g];return e.next=10,t._getAppCheckToken();case 10:return k=e.sent,w=k?"#".concat(mc,"=").concat(encodeURIComponent(k)):"",e.abrupt("return","".concat(kc(t),"?").concat(wt(v).slice(1)).concat(w));case 13:case"end":return e.stop()}}),e)}))),gc.apply(this,arguments)}function kc(e){var t=e.config;return t.emulator?Ur(t,vc):"https://".concat(t.authDomain,"/").concat(pc)}var wc="webStorageSupport",bc=function(){function e(){d(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=vu,this._completeRedirectFn=js,this._overrideRedirectResult=Ns}return y(e,[{key:"_openPopup",value:function(){var e=Nt(Tt().mark((function e(t,n,r,i){var a,o;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Dr(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),e.next=3,yc(t,n,r,Or(),i);case 3:return o=e.sent,e.abrupt("return",dc(t,o,gu()));case 5:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=Nt(Tt().mark((function e(t,n,r,i){return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return e.next=4,yc(t,n,r,Or(),i);case 4:return bu(e.sent),e.abrupt("return",new Promise((function(){})));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(Dr(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=Nt(Tt().mark((function e(t){var n,r;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,cc(t);case 2:return n=e.sent,r=new Ks(t),n.register("authEvent",(function(e){return Pr(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(wc,{type:wc},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[wc];void 0!==i&&t(!!i),Sr(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return Xs.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return zi()||Oi()||ji()}}]),e}(),xc=bc,_c=function(){function e(t){d(this,e),this.factorId=t}return y(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return Rr("unexpected MultiFactorSessionType")}}}]),e}(),Ic=function(e){k(n,e);var t=_(n);function n(e){var r;return d(this,n),(r=t.call(this,"phone")).credential=e,r}return y(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return qr(e,"POST","/v2/accounts/mfaEnrollment:finalize",Br(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return qr(e,"POST","/v2/accounts/mfaSignIn:finalize",Br(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(_c),Ec=function(){function e(){d(this,e)}return y(e,null,[{key:"assertion",value:function(e){return Ic._fromCredential(e)}}]),e}();Ec.FACTOR_ID="phone";var Sc=function(){function e(){d(this,e)}return y(e,null,[{key:"assertionForEnrollment",value:function(e,t){return Tc._fromSecret(e,t)}},{key:"assertionForSignIn",value:function(e,t){return Tc._fromEnrollmentId(e,t)}},{key:"generateSecret",value:function(){var e=Nt(Tt().mark((function e(t){var n,r,i;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Pr("undefined"!==typeof(null===(n=(r=t).user)||void 0===n?void 0:n.auth),"internal-error"),e.next=4,au(r.user.auth,{idToken:r.credential,totpEnrollmentInfo:{}});case 4:return i=e.sent,e.abrupt("return",Cc._fromStartTotpMfaEnrollmentResponse(i,r.user.auth));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}();Sc.FACTOR_ID="totp";var Tc=function(e){k(n,e);var t=_(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this,"totp")).otp=e,a.enrollmentId=r,a.secret=i,a}return y(n,[{key:"_finalizeEnroll",value:function(){var e=Nt(Tt().mark((function e(t,n,r){return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Pr("undefined"!==typeof this.secret,t,"argument-error"),e.abrupt("return",ou(t,{idToken:n,displayName:r,totpVerificationInfo:this.secret._makeTotpVerificationInfo(this.otp)}));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"_finalizeSignIn",value:function(){var e=Nt(Tt().mark((function e(t,n){var r;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Pr(void 0!==this.enrollmentId&&void 0!==this.otp,t,"argument-error"),r={verificationCode:this.otp},e.abrupt("return",zu(t,{mfaPendingCredential:n,mfaEnrollmentId:this.enrollmentId,totpVerificationInfo:r}));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}],[{key:"_fromSecret",value:function(e,t){return new n(t,void 0,e)}},{key:"_fromEnrollmentId",value:function(e,t){return new n(t,e)}}]),n}(_c),Cc=function(){function e(t,n,r,i,a,o,u){d(this,e),this.sessionInfo=o,this.auth=u,this.secretKey=t,this.hashingAlgorithm=n,this.codeLength=r,this.codeIntervalSeconds=i,this.enrollmentCompletionDeadline=a}return y(e,[{key:"_makeTotpVerificationInfo",value:function(e){return{sessionInfo:this.sessionInfo,verificationCode:e}}},{key:"generateQrCodeUrl",value:function(e,t){var n,r=!1;return(Nc(e)||Nc(t))&&(r=!0),r&&(Nc(e)&&(e=(null===(n=this.auth.currentUser)||void 0===n?void 0:n.email)||"unknownuser"),Nc(t)&&(t=this.auth.name)),"otpauth://totp/".concat(t,":").concat(e,"?secret=").concat(this.secretKey,"&issuer=").concat(t,"&algorithm=").concat(this.hashingAlgorithm,"&digits=").concat(this.codeLength)}}],[{key:"_fromStartTotpMfaEnrollmentResponse",value:function(t,n){return new e(t.totpSessionInfo.sharedSecretKey,t.totpSessionInfo.hashingAlgorithm,t.totpSessionInfo.verificationCodeLength,t.totpSessionInfo.periodSec,new Date(t.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),t.totpSessionInfo.sessionInfo,n)}}]),e}();function Nc(e){return"undefined"===typeof e||0===(null===e||void 0===e?void 0:e.length)}var Ac="@firebase/auth",Pc="1.3.0",Rc=function(){function e(t){d(this,e),this.auth=t,this.internalListeners=new Map}return y(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=Nt(Tt().mark((function e(t){var n;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){Pr(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();var Dc;!function(e){var t;null===(t=it())||void 0===t||t["_".concat(e)]}("authIdTokenMaxAge");function Oc(){return window}Dc="Browser",wn(new At("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),o=r.options,u=o.apiKey,s=o.authDomain;Pr(u&&!u.includes(":"),"invalid-api-key",{appName:r.name});var c={apiKey:u,authDomain:s,clientPlatform:Dc,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Bi(Dc)},l=new Wi(r,i,a,c);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Ti);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(l,n),l}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),wn(new At("auth-internal",(function(e){return function(e){return new Rc(e)}(Qi(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),Dn(Ac,Pc,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(Dc)),Dn(Ac,Pc,"esm2017");var Lc=2e3;function Mc(e,t,n){return Fc.apply(this,arguments)}function Fc(){return Fc=Nt(Tt().mark((function e(t,n,r){var i,a,o,u,s;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Oc(),o=a.BuildInfo,Dr(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,qc(n.sessionId);case 4:return u=e.sent,s={},ji()?s.ibi=o.packageName:Fi()?s.apn=o.packageName:Sr(t,"operation-not-supported-in-this-environment"),o.displayName&&(s.appDisplayName=o.displayName),s.sessionId=u,e.abrupt("return",yc(t,r,n.type,void 0,null!==(i=n.eventId)&&void 0!==i?i:void 0,s));case 10:case"end":return e.stop()}}),e)}))),Fc.apply(this,arguments)}function Uc(){return Uc=Nt(Tt().mark((function e(t){var n,r,i;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Oc(),r=n.BuildInfo,i={},ji()?i.iosBundleId=r.packageName:Fi()?i.androidPackageName=r.packageName:Sr(t,"operation-not-supported-in-this-environment"),e.next=5,Ws(t,i);case 5:case"end":return e.stop()}}),e)}))),Uc.apply(this,arguments)}function Vc(e){var t=Oc().cordova;return new Promise((function(n){t.plugins.browsertab.isAvailable((function(r){var i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ut();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}function jc(e,t,n){return zc.apply(this,arguments)}function zc(){return zc=Nt(Tt().mark((function e(t,n,r){var i,a,o;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Oc(),a=i.cordova,o=function(){},e.prev=2,e.next=5,new Promise((function(e,i){var u=null;function s(){var t;e();var n=null===(t=a.plugins.browsertab)||void 0===t?void 0:t.close;"function"===typeof n&&n(),"function"===typeof(null===r||void 0===r?void 0:r.close)&&r.close()}function c(){u||(u=window.setTimeout((function(){i(Tr(t,"redirect-cancelled-by-user"))}),Lc))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}n.addPassiveListener(s),document.addEventListener("resume",c,!1),Fi()&&document.addEventListener("visibilitychange",l,!1),o=function(){n.removePassiveListener(s),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),u&&window.clearTimeout(u)}}));case 5:return e.prev=5,o(),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[2,,5,8]])}))),zc.apply(this,arguments)}function Bc(e){var t,n,r,i,a,o,u,s,c,l,f=Oc();Pr("function"===typeof(null===(t=null===f||void 0===f?void 0:f.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Pr("undefined"!==typeof(null===(n=null===f||void 0===f?void 0:f.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Pr("function"===typeof(null===(a=null===(i=null===(r=null===f||void 0===f?void 0:f.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===a?void 0:a.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Pr("function"===typeof(null===(s=null===(u=null===(o=null===f||void 0===f?void 0:f.cordova)||void 0===o?void 0:o.plugins)||void 0===u?void 0:u.browsertab)||void 0===s?void 0:s.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Pr("function"===typeof(null===(l=null===(c=null===f||void 0===f?void 0:f.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}function qc(e){return Kc.apply(this,arguments)}function Kc(){return(Kc=Nt(Tt().mark((function e(t){var n,r,i;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Gc(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,i=Array.from(new Uint8Array(r)),e.abrupt("return",i.map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Gc(e){if(Dr(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}var Hc=20,Wc=function(e){k(n,e);var t=_(n);function n(){var e;return d(this,n),(e=t.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise((function(t){e.resolveInialized=t})),e}return y(n,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach((function(t){return t(e)})),or(w(n.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var e=Nt(Tt().mark((function e(){return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(Ks);function Qc(e,t){return{type:t,eventId:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,urlResponse:null,sessionId:Zc(),postBody:null,tenantId:e.tenantId,error:Tr(e,"no-auth-event")}}function Yc(e,t){return el()._set(tl(e),t)}function $c(e){return Xc.apply(this,arguments)}function Xc(){return Xc=Nt(Tt().mark((function e(t){var n;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,el()._get(tl(t));case 2:if(!(n=e.sent)){e.next=6;break}return e.next=6,el()._remove(tl(t));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)}))),Xc.apply(this,arguments)}function Jc(e,t){var n,r,i=function(e){var t=nl(e),n=t.link?decodeURIComponent(t.link):void 0,r=nl(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return nl(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){var a=nl(i),o=a.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(a.firebaseError)):null,u=null===(r=null===(n=null===o||void 0===o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],s=u?Tr(u):null;return s?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:s,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function Zc(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<Hc;n++){var r=Math.floor(62*Math.random());e.push(t.charAt(r))}return e.join("")}function el(){return Ti(du)}function tl(e){return Ai("authEvent",e.config.apiKey,e.name)}function nl(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};var t=S(e.split("?"));t[0];return bt(t.slice(1).join("?"))}var rl=function(){function e(){d(this,e),this._redirectPersistence=vu,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=js,this._overrideRedirectResult=Ns}return y(e,[{key:"_initialize",value:function(){var e=Nt(Tt().mark((function e(t){var n,r;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._key(),(r=this.eventManagers.get(n))||(r=new Wc(t),this.eventManagers.set(n,r),this.attachCallbackListeners(t,r)),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(e){Sr(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(){var e=Nt(Tt().mark((function e(t,n,r,i){var a,o,u,s;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Bc(t),e.next=3,this._initialize(t);case 3:return a=e.sent,e.next=6,a.initialized();case 6:return a.resetRedirect(),_s.clear(),e.next=10,this._originValidation(t);case 10:return o=Qc(t,r,i),e.next=13,Yc(t,o);case 13:return e.next=15,Mc(t,o,n);case 15:return u=e.sent,e.next=18,Vc(u);case 18:return s=e.sent,e.abrupt("return",jc(t,a,s));case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return Uc.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n=Oc(),r=n.universalLinks,i=n.handleOpenURL,a=n.BuildInfo,o=setTimeout(Nt(Tt().mark((function n(){return Tt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,$c(e);case 2:t.onEvent(al());case 3:case"end":return n.stop()}}),n)}))),500),u=function(){var n=Nt(Tt().mark((function n(r){var i,a;return Tt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(o),n.next=3,$c(e);case 3:i=n.sent,a=null,i&&(null===r||void 0===r?void 0:r.url)&&(a=Jc(i,r.url)),t.onEvent(a||al());case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();"undefined"!==typeof r&&"function"===typeof r.subscribe&&r.subscribe(null,u);var s=i,c="".concat(a.packageName.toLowerCase(),"://");Oc().handleOpenURL=function(){var e=Nt(Tt().mark((function e(t){return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(c)&&u({url:t}),"function"===typeof s)try{s(t)}catch(n){console.error(n)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]),e}(),il=rl;function al(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Tr("no-auth-event")}}var ol=1e3;function ul(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function sl(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ut();return!("file:"!==ul()&&"ionic:"!==ul()&&"capacitor:"!==ul()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function cl(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ut();return ft()&&11===(null===document||void 0===document?void 0:document.documentMode)||function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ut();return/Edge\/\d+/.test(e)}(e)}function ll(){try{var e=self.localStorage,t=gu();if(e)return e.setItem(t,"1"),e.removeItem(t),!cl()||ht()}catch(n){return fl()&&ht()}return!1}function fl(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function hl(){return("http:"===ul()||"https:"===ul()||ct()||sl())&&!(lt()||st())&&ll()&&!fl()}function dl(){return sl()&&"undefined"!==typeof document}function pl(){return vl.apply(this,arguments)}function vl(){return(vl=Nt(Tt().mark((function e(){return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(dl()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",new Promise((function(e){var t=setTimeout((function(){e(!1)}),ol);document.addEventListener("deviceready",(function(){clearTimeout(t),e(!0)}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ml={LOCAL:"local",NONE:"none",SESSION:"session"},yl=Pr,gl="persistence";function kl(e,t){yl(Object.values(ml).includes(t),e,"invalid-persistence-type"),lt()?yl(t!==ml.SESSION,e,"unsupported-persistence-type"):st()?yl(t===ml.NONE,e,"unsupported-persistence-type"):fl()?yl(t===ml.NONE||t===ml.LOCAL&&ht(),e,"unsupported-persistence-type"):yl(t===ml.NONE||ll(),e,"unsupported-persistence-type")}function wl(e){return bl.apply(this,arguments)}function bl(){return bl=Nt(Tt().mark((function e(t){var n,r;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=xl(),r=Ai(gl,t.config.apiKey,t.name),n&&n.setItem(r,t._getPersistence());case 5:case"end":return e.stop()}}),e)}))),bl.apply(this,arguments)}function xl(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}var _l=Pr,Il=function(){function e(){d(this,e),this.browserResolver=Ti(xc),this.cordovaResolver=Ti(il),this.underlyingResolver=null,this._redirectPersistence=vu,this._completeRedirectFn=js,this._overrideRedirectResult=Ns}return y(e,[{key:"_initialize",value:function(){var e=Nt(Tt().mark((function e(t){return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._initialize(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(){var e=Nt(Tt().mark((function e(t,n,r,i){return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openPopup(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=Nt(Tt().mark((function e(t,n,r,i){return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openRedirect(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return dl()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return _l(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var e=Nt(Tt().mark((function e(){var t;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.underlyingResolver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,pl();case 4:t=e.sent,this.underlyingResolver=t?this.cordovaResolver:this.browserResolver;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function El(e){return e.unwrap()}function Sl(e,t){var n,r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null===t||void 0===t?void 0:t.code))t.resolver=new Pl(e,function(e,t){var n,r=St(e),i=t;return Pr(t.customData.operationType,r,"argument-error"),Pr(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),ru._fromError(r,i)}(e,t));else if(r){var i=Tl(t),a=t;i&&(a.credential=i,a.tenantId=r.tenantId||void 0,a.email=r.email||void 0,a.phoneNumber=r.phoneNumber||void 0)}}function Tl(e){var t=(e instanceof dt?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof dt)&&"temporaryProof"in t&&"phoneNumber"in t)return us.credentialFromResult(e);var n,r=t.providerId;if(!r||r===cr.PASSWORD)return null;switch(r){case cr.GOOGLE:n=Ka;break;case cr.FACEBOOK:n=qa;break;case cr.GITHUB:n=Ga;break;case cr.TWITTER:n=Qa;break;default:var i=t.oauthIdToken,a=t.oauthAccessToken,o=t.oauthTokenSecret,u=t.pendingToken,s=t.nonce;return a||o||i||u?u?r.startsWith("saml.")?Ha._create(r,u):Aa._fromParams({providerId:r,signInMethod:r,pendingToken:u,idToken:i,accessToken:a}):new Ba(r).credential({idToken:i,accessToken:a,rawNonce:s}):null}return e instanceof dt?n.credentialFromError(e):n.credentialFromResult(e)}function Cl(e,t){return t.catch((function(t){throw t instanceof dt&&Sl(e,t),t})).then((function(e){var t,n=e.operationType,r=e.user;return{operationType:n,credential:(t=e,Tl(t)),additionalUserInfo:tu(e),user:Rl.getOrCreate(r)}}))}function Nl(e,t){return Al.apply(this,arguments)}function Al(){return Al=Nt(Tt().mark((function e(t,n){var r;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return r=e.sent,e.abrupt("return",{verificationId:r.verificationId,confirm:function(e){return Cl(t,r.confirm(e))}});case 4:case"end":return e.stop()}}),e)}))),Al.apply(this,arguments)}var Pl=function(){function e(t,n){d(this,e),this.resolver=n,this.auth=t.wrapped()}return y(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return Cl(El(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),Rl=function(){function e(t){d(this,e),this._delegate=t,this.multiFactor=function(e){var t=St(e);return cu.has(t)||cu.set(t,su._fromUser(t)),cu.get(t)}(t)}return y(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(){var e=Nt(Tt().mark((function e(t){return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Cl(this.auth,mo(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithPhoneNumber",value:function(){var e=Nt(Tt().mark((function e(t,n){return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Nl(this.auth,ts(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"linkWithPopup",value:function(){var e=Nt(Tt().mark((function e(t){return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Cl(this.auth,ks(this._delegate,t,Il)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithRedirect",value:function(){var e=Nt(Tt().mark((function e(t){return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wl(Qi(this.auth));case 2:return e.abrupt("return",Ms(this._delegate,t,Il));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(){var e=Nt(Tt().mark((function e(t){return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Cl(this.auth,go(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return Nl(this.auth,function(e,t,n){return rs.apply(this,arguments)}(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return Cl(this.auth,function(e,t,n){return gs.apply(this,arguments)}(this._delegate,e,Il))}},{key:"reauthenticateWithRedirect",value:function(){var e=Nt(Tt().mark((function e(t){return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wl(Qi(this.auth));case 2:return e.abrupt("return",Os(this._delegate,t,Il));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendEmailVerification",value:function(e){return function(e,t){return Bo.apply(this,arguments)}(this._delegate,e)}},{key:"unlink",value:function(){var e=Nt(Tt().mark((function e(t){return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ro(this._delegate,t);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateEmail",value:function(e){return function(e,t){return Wo(St(e),t,null)}(this._delegate,e)}},{key:"updatePassword",value:function(e){return function(e,t){return Wo(St(e),null,t)}(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return function(e,t){return os.apply(this,arguments)}(this._delegate,e)}},{key:"updateProfile",value:function(e){return function(e,t){return Ho.apply(this,arguments)}(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return function(e,t,n){return qo.apply(this,arguments)}(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();Rl.USER_MAP=new WeakMap;var Dl=Pr,Ol=function(){function e(t,n){if(d(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=t.options.apiKey;Dl(r,"invalid-api-key",{appName:t.name}),Dl(r,"invalid-api-key",{appName:t.name});var i="undefined"!==typeof window?Il:void 0;this._delegate=n.initialize({options:{persistence:Ml(r,t.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(wr),this.linkUnderlyingAuth()}return y(e,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?Rl.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){ta(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return function(e,t){return Po.apply(this,arguments)}(this._delegate,e)}},{key:"checkActionCode",value:function(e){return Ro(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return function(e,t,n){return Ao.apply(this,arguments)}(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(){var e=Nt(Tt().mark((function e(t,n){return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Cl(this._delegate,Lo(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return function(e,t){return zo.apply(this,arguments)}(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return function(e,t){var n=Ua.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}},{key:"getRedirectResult",value:function(){var e=Nt(Tt().mark((function e(){var t;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Dl(hl(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,Us(this._delegate,Il);case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",{credential:null,user:null});case 6:return e.abrupt("return",Cl(this._delegate,Promise.resolve(t)));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addFrameworkForLogging",value:function(e){!function(e,t){Qi(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=Ll(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onAuthStateChanged(i,a,o)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=Ll(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onIdTokenChanged(i,a,o)}},{key:"sendSignInLinkToEmail",value:function(e,t){return function(e,t,n){return Fo.apply(this,arguments)}(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return function(e,t,n){return No.apply(this,arguments)}(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(){var e=Nt(Tt().mark((function e(t){var n,r;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:kl(this._delegate,t),e.t0=t,e.next=e.t0===ml.SESSION?4:e.t0===ml.LOCAL?6:e.t0===ml.NONE?11:13;break;case 4:return n=vu,e.abrupt("break",14);case 6:return e.next=8,Ti(Vu)._isAvailable();case 8:return r=e.sent,n=r?Vu:du,e.abrupt("break",14);case 11:return n=Ni,e.abrupt("break",14);case 13:return e.abrupt("return",Sr("argument-error",{appName:this._delegate.name}));case 14:return e.abrupt("return",this._delegate.setPersistence(n));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return Cl(this._delegate,function(e){return Za.apply(this,arguments)}(this._delegate))}},{key:"signInWithCredential",value:function(e){return Cl(this._delegate,po(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return Cl(this._delegate,function(e,t){return xo.apply(this,arguments)}(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return Cl(this._delegate,function(e,t,n){return po(St(e),Va.credential(t,n)).catch(function(){var t=Nt(Tt().mark((function t(n){return Tt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:throw n.code==="auth/".concat("password-does-not-meet-requirements")&&To(e),n;case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return Cl(this._delegate,function(e,t,n){return Uo.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return Nl(this._delegate,function(e,t,n){return es.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPopup",value:function(){var e=Nt(Tt().mark((function e(t){return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Dl(hl(),this._delegate,"operation-not-supported-in-this-environment"),e.abrupt("return",Cl(this._delegate,ms(this._delegate,t,Il)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInWithRedirect",value:function(){var e=Nt(Tt().mark((function e(t){return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Dl(hl(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,wl(this._delegate);case 3:return e.abrupt("return",Rs(this._delegate,t,Il));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return function(e,t){return Oo.apply(this,arguments)}(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),e}();function Ll(e,t,n){var r=e;"function"!==typeof e&&(r=e.next,t=e.error,n=e.complete);var i=r;return{next:function(e){return i(e&&Rl.getOrCreate(e))},error:t,complete:n}}function Ml(e,t){var n=function(e,t){var n=xl();if(!n)return[];var r=Ai(gl,e,t);switch(n.getItem(r)){case ml.NONE:return[Ni];case ml.LOCAL:return[Vu,vu];case ml.SESSION:return[vu];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(Vu)||n.push(Vu),"undefined"!==typeof window)for(var r=0,i=[du,vu];r<i.length;r++){var a=i[r];n.includes(a)||n.push(a)}return n.includes(Ni)||n.push(Ni),n}Ol.Persistence=ml;var Fl=function(){function e(){d(this,e),this.providerId="phone",this._delegate=new us(El(ar.auth()))}return y(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return us.credential(e,t)}}]),e}();Fl.PHONE_SIGN_IN_METHOD=us.PHONE_SIGN_IN_METHOD,Fl.PROVIDER_ID=us.PROVIDER_ID;var Ul,Vl=Pr,jl=function(){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ar.app();d(this,e),Vl(null===(r=i.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new Xu(i.auth(),t,n),this.type=this._delegate.type}return y(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}();(Ul=ar).INTERNAL.registerComponent(new At("auth-compat",(function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new Ol(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:lr,PASSWORD_RESET:fr,RECOVER_EMAIL:hr,REVERT_SECOND_FACTOR_ADDITION:dr,VERIFY_AND_CHANGE_EMAIL:pr,VERIFY_EMAIL:vr}},EmailAuthProvider:Va,FacebookAuthProvider:qa,GithubAuthProvider:Ga,GoogleAuthProvider:Ka,OAuthProvider:Ba,SAMLAuthProvider:Wa,PhoneAuthProvider:Fl,PhoneMultiFactorGenerator:Ec,RecaptchaVerifier:jl,TwitterAuthProvider:Qa,Auth:Ol,AuthCredential:ia,Error:dt}).setInstantiationMode("LAZY").setMultipleInstances(!1)),Ul.registerVersion("@firebase/auth-compat","0.4.6");var zl,Bl="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},ql={},Kl=Kl||{},Gl=Bl||self;function Hl(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Wl(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Ql="closure_uid_"+(1e9*Math.random()>>>0),Yl=0;function $l(e,t,n){return e.call.apply(e.bind,arguments)}function Xl(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function Jl(e,t,n){return(Jl=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?$l:Xl).apply(null,arguments)}function Zl(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function ef(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function tf(){this.s=this.s,this.o=this.o}tf.prototype.s=!1,tf.prototype.sa=function(){var e;!this.s&&(this.s=!0,this.N(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,Ql)&&e[Ql]||(e[Ql]=++Yl))},tf.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var nf=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function rf(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function af(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(Hl(r)){var i=e.length||0,a=r.length||0;e.length=i+a;for(var o=0;o<a;o++)e[i+o]=r[o]}else e.push(r)}}function of(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}of.prototype.h=function(){this.defaultPrevented=!0};var uf=function(){if(!Gl.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Gl.addEventListener("test",(function(){}),t),Gl.removeEventListener("test",(function(){}),t)}catch(n){}return e}();function sf(e){return/^[\s\xa0]*$/.test(e)}function cf(){var e=Gl.navigator;return e&&(e=e.userAgent)?e:""}function lf(e){return-1!=cf().indexOf(e)}function ff(e){return ff[" "](e),e}ff[" "]=function(){};var hf,df,pf=lf("Opera"),vf=lf("Trident")||lf("MSIE"),mf=lf("Edge"),yf=mf||vf,gf=lf("Gecko")&&!(-1!=cf().toLowerCase().indexOf("webkit")&&!lf("Edge"))&&!(lf("Trident")||lf("MSIE"))&&!lf("Edge"),kf=-1!=cf().toLowerCase().indexOf("webkit")&&!lf("Edge");function wf(){var e=Gl.document;return e?e.documentMode:void 0}e:{var bf="",xf=function(){var e=cf();return gf?/rv:([^\);]+)(\)|;)/.exec(e):mf?/Edge\/([\d\.]+)/.exec(e):vf?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):kf?/WebKit\/(\S+)/.exec(e):pf?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(xf&&(bf=xf?xf[1]:""),vf){var _f=wf();if(null!=_f&&_f>parseFloat(bf)){hf=String(_f);break e}}hf=bf}if(Gl.document&&vf){var If=wf();df=If||(parseInt(hf,10)||void 0)}else df=void 0;var Ef=df;function Sf(e,t){if(of.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(gf){e:{try{ff(t.nodeName);var i=!0;break e}catch(JC){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Tf[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Sf.$.h.call(this)}}ef(Sf,of);var Tf={2:"touch",3:"pen",4:"mouse"};Sf.prototype.h=function(){Sf.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Cf="closure_listenable_"+(1e6*Math.random()|0),Nf=0;function Af(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++Nf,this.fa=this.ia=!1}function Pf(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function Rf(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function Df(e){var t={};for(var n in e)t[n]=e[n];return t}var Of="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Lf(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<Of.length;a++)n=Of[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Mf(e){this.src=e,this.g={},this.h=0}function Ff(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=nf(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(Pf(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Uf(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.fa&&a.listener==t&&a.capture==!!n&&a.la==r)return i}return-1}Mf.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=Uf(e,t,r,i);return-1<o?(t=e[o],n||(t.ia=!1)):((t=new Af(t,this.src,a,!!r,i)).ia=n,e.push(t)),t};var Vf="closure_lm_"+(1e6*Math.random()|0),jf={};function zf(e,t,n,r,i){if(r&&r.once)return qf(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)zf(e,t[a],n,r,i);return null}return n=$f(n),e&&e[Cf]?e.O(t,n,Wl(r)?!!r.capture:!!r,i):Bf(e,t,n,!1,r,i)}function Bf(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=Wl(i)?!!i.capture:!!i,u=Qf(e);if(u||(e[Vf]=u=new Mf(e)),(n=u.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=Wf;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)uf||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Hf(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function qf(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)qf(e,t[a],n,r,i);return null}return n=$f(n),e&&e[Cf]?e.P(t,n,Wl(r)?!!r.capture:!!r,i):Bf(e,t,n,!0,r,i)}function Kf(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)Kf(e,t[a],n,r,i);else r=Wl(r)?!!r.capture:!!r,n=$f(n),e&&e[Cf]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Uf(a=e.g[t],n,r,i))&&(Pf(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=Qf(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Uf(t,n,r,i)),(n=-1<e?t[e]:null)&&Gf(n))}function Gf(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[Cf])Ff(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Hf(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Qf(t))?(Ff(n,e),0==n.h&&(n.src=null,t[Vf]=null)):Pf(e)}}}function Hf(e){return e in jf?jf[e]:jf[e]="on"+e}function Wf(e,t){if(e.fa)e=!0;else{t=new Sf(t,this);var n=e.listener,r=e.la||e.src;e.ia&&Gf(e),e=n.call(r,t)}return e}function Qf(e){return(e=e[Vf])instanceof Mf?e:null}var Yf="__closure_events_fn_"+(1e9*Math.random()>>>0);function $f(e){return"function"===typeof e?e:(e[Yf]||(e[Yf]=function(t){return e.handleEvent(t)}),e[Yf])}function Xf(){tf.call(this),this.i=new Mf(this),this.S=this,this.J=null}function Jf(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"===typeof t)t=new of(t,e);else if(t instanceof of)t.target=t.target||e;else{var i=t;Lf(t=new of(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=Zf(o,r,!0,t)&&i}if(i=Zf(o=t.g=e,r,!0,t)&&i,i=Zf(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=Zf(o=t.g=n[a],r,!1,t)&&i}function Zf(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.fa&&o.capture==n){var u=o.listener,s=o.la||o.src;o.ia&&Ff(e.i,o),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}ef(Xf,tf),Xf.prototype[Cf]=!0,Xf.prototype.removeEventListener=function(e,t,n,r){Kf(this,e,t,n,r)},Xf.prototype.N=function(){if(Xf.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Pf(n[r]);delete t.g[e],t.h--}}this.J=null},Xf.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Xf.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var eh=Gl.JSON.stringify,th=function(){function e(t,n){d(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return y(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}();function nh(){var e=lh,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var rh=function(){function e(){d(this,e),this.h=this.g=null}return y(e,[{key:"add",value:function(e,t){var n=ih.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),ih=new th((function(){return new ah}),(function(e){return e.reset()})),ah=function(){function e(){d(this,e),this.next=this.g=this.h=null}return y(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function oh(e){var t=1;e=e.split(":");for(var n=[];0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function uh(e){Gl.setTimeout((function(){throw e}),0)}var sh,ch=!1,lh=new rh,fh=function(){var e=Gl.Promise.resolve(void 0);sh=function(){e.then(hh)}},hh=function(){for(var e;e=nh();){try{e.h.call(e.g)}catch(n){uh(n)}var t=ih;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}ch=!1};function dh(e,t){Xf.call(this),this.h=e||1,this.g=t||Gl,this.j=Jl(this.qb,this),this.l=Date.now()}function ph(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function vh(e,t,n){if("function"===typeof e)n&&(e=Jl(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=Jl(e.handleEvent,e)}return 2147483647<Number(t)?-1:Gl.setTimeout(e,t||0)}function mh(e){e.g=vh((function(){e.g=null,e.i&&(e.i=!1,mh(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}ef(dh,Xf),(zl=dh.prototype).ga=!1,zl.T=null,zl.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Jf(this,"tick"),this.ga&&(ph(this),this.start()))}},zl.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},zl.N=function(){dh.$.N.call(this),ph(this),delete this.g};var yh=function(e){k(n,e);var t=_(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return y(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:mh(this)}},{key:"N",value:function(){or(w(n.prototype),"N",this).call(this),this.g&&(Gl.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(tf);function gh(e){tf.call(this),this.h=e,this.g={}}ef(gh,tf);var kh=[];function wh(e,t,n,r){Array.isArray(n)||(n&&(kh[0]=n.toString()),n=kh);for(var i=0;i<n.length;i++){var a=zf(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function bh(e){Rf(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Gf(e)}),e),e.g={}}function xh(){this.g=!0}function _h(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return eh(n)}catch(u){return t}}(e,n)+(r?" "+r:"")}))}gh.prototype.N=function(){gh.$.N.call(this),bh(this)},gh.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},xh.prototype.Ea=function(){this.g=!1},xh.prototype.info=function(){};var Ih={},Eh=null;function Sh(){return Eh=Eh||new Xf}function Th(e){of.call(this,Ih.Ta,e)}function Ch(e){var t=Sh();Jf(t,new Th(t))}function Nh(e,t){of.call(this,Ih.STAT_EVENT,e),this.stat=t}function Ah(e){var t=Sh();Jf(t,new Nh(t,e))}function Ph(e,t){of.call(this,Ih.Ua,e),this.size=t}function Rh(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return Gl.setTimeout((function(){e()}),t)}Ih.Ta="serverreachability",ef(Th,of),Ih.STAT_EVENT="statevent",ef(Nh,of),Ih.Ua="timingevent",ef(Ph,of);var Dh={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Oh={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Lh(){}function Mh(e){return e.h||(e.h=e.i())}function Fh(){}Lh.prototype.h=null;var Uh,Vh={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function jh(){of.call(this,"d")}function zh(){of.call(this,"c")}function Bh(){}function qh(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new gh(this),this.P=Gh,e=yf?125:void 0,this.V=new dh(e),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Kh}function Kh(){this.i=null,this.g="",this.h=!1}ef(jh,of),ef(zh,of),ef(Bh,Lh),Bh.prototype.g=function(){return new XMLHttpRequest},Bh.prototype.i=function(){return{}},Uh=new Bh;var Gh=45e3,Hh={},Wh={};function Qh(e,t,n){e.L=1,e.v=dd(sd(t)),e.s=n,e.S=!0,Yh(e,null)}function Yh(e,t){e.G=Date.now(),Zh(e),e.A=sd(e.v);var n=e.A,r=e.W;Array.isArray(r)||(r=[String(r)]),Sd(n.i,"t",r),e.C=0,n=e.l.J,e.h=new Kh,e.g=Tp(e.l,n?t:null,!e.s),0<e.O&&(e.M=new yh(Jl(e.Pa,e,e.g),e.O)),wh(e.U,e.g,"readystatechange",e.nb),t=e.I?Df(e.I):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.A,e.u,e.s,t)):(e.u="GET",e.g.ha(e.A,e.u,null,t)),Ch(),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",u=a.split("&"),s=0;s<u.length;s++){var c=u[s].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.W,e.s)}function $h(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.l.Ha)}function Xh(e,t,n){for(var r,i=!0;!e.J&&e.C<n.length;){if((r=Jh(e,n))==Wh){4==t&&(e.o=4,Ah(14),i=!1),_h(e.j,e.m,null,"[Incomplete Response]");break}if(r==Hh){e.o=4,Ah(15),_h(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}_h(e.j,e.m,r,null),id(e,r)}$h(e)&&r!=Wh&&r!=Hh&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,Ah(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),kp(t),t.M=!0,Ah(11))):(_h(e.j,e.m,n,"[Invalid Chunked Response]"),rd(e),nd(e))}function Jh(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Wh:(n=Number(t.substring(n,r)),isNaN(n)?Hh:(r+=1)+n>t.length?Wh:(t=t.slice(r,r+n),e.C=r+n,t))}function Zh(e){e.Y=Date.now()+e.P,ed(e,e.P)}function ed(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Rh(Jl(e.lb,e),t)}function td(e){e.B&&(Gl.clearTimeout(e.B),e.B=null)}function nd(e){0==e.l.H||e.J||xp(e.l,e)}function rd(e){td(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,ph(e.V),bh(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function id(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||Dd(n.i,e)))if(!e.K&&Dd(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;bp(n),fp(n)}gp(n),Ah(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=Rh(Jl(n.ib,n),6e3));if(1>=Rd(n.i)&&n.oa){try{n.oa()}catch(a){}n.oa=void 0}}else Ip(n,11)}else if((e.K||n.g==e)&&bp(n),!sf(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.V=a[0],a=a[1],2==n.H)if("c"==a[0]){n.K=a[1],n.pa=a[2];var o=a[3];null!=o&&(n.ra=o,n.l.info("VER="+n.ra));var u=a[4];null!=u&&(n.Ga=u,n.l.info("SVER="+n.Ga));var s=a[5];null!=s&&"number"===typeof s&&0<s&&(r=1.5*s,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.i;f.g||-1==l.indexOf("spdy")&&-1==l.indexOf("quic")&&-1==l.indexOf("h2")||(f.j=f.l,f.g=new Set,f.h&&(Od(f,f.h),f.h=null))}if(r.F){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.Da=h,hd(r.I,r.F,h))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var d=e;if((r=n).wa=Sp(r,r.J?r.pa:null,r.Y),d.K){Ld(r.i,d);var p=d,v=r.L;v&&p.setTimeout(v),p.B&&(td(p),Zh(p)),r.g=d}else yp(r);0<n.j.length&&dp(n)}else"stop"!=a[0]&&"close"!=a[0]||Ip(n,7);else 3==n.H&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?Ip(n,7):lp(n):"noop"!=a[0]&&n.h&&n.h.Aa(a),n.A=0)}Ch()}catch(a){}}function ad(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Hl(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(Hl(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(Hl(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}(zl=qh.prototype).setTimeout=function(e){this.P=e},zl.nb=function(e){e=e.target;var t=this.M;t&&3==ip(e)?t.l():this.Pa(e)},zl.Pa=function(e){try{if(e==this.g)e:{var t=ip(this.g),n=this.g.Ia();this.g.da();if(!(3>t)&&(3!=t||yf||this.g&&(this.h.h||this.g.ja()||ap(this.g)))){this.J||4!=t||7==n||Ch(),td(this);var r=this.g.da();this.ca=r;t:if($h(this)){var i=ap(this.g);e="";var a=i.length,o=4==ip(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){rd(this),nd(this);var u="";break t}this.h.i=new Gl.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,e+=this.h.i.decode(i[n],{stream:o&&n==a-1});i.splice(0,a),this.h.g+=e,this.C=0,u=this.h.g}else u=this.g.ja();if(this.i=200==r,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.W,t,r),this.i){if(this.aa&&!this.K){t:{if(this.g){var s,c=this.g;if((s=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!sf(s)){var l=s;break t}}l=null}if(!(r=l)){this.i=!1,this.o=3,Ah(12),rd(this),nd(this);break e}_h(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,id(this,r)}this.S?(Xh(this,t,u),yf&&this.i&&3==t&&(wh(this.U,this.V,"tick",this.mb),this.V.start())):(_h(this.j,this.m,u,null),id(this,u)),4==t&&rd(this),this.i&&!this.J&&(4==t?xp(this.l,this):(this.i=!1,Zh(this)))}else(function(e){var t={};e=(e.g&&2<=ip(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(var n=0;n<e.length;n++)if(!sf(e[n])){var r=oh(e[n]),i=r[0];if("string"===typeof(r=r[1])){r=r.trim();var a=t[i]||[];t[i]=a,a.push(r)}}!function(e,t){for(var n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==r&&0<u.indexOf("Unknown SID")?(this.o=3,Ah(12)):(this.o=0,Ah(13)),rd(this),nd(this)}}}catch(t){}},zl.mb=function(){if(this.g){var e=ip(this.g),t=this.g.ja();this.C<t.length&&(td(this),Xh(this,e,t),this.i&&4!=e&&Zh(this))}},zl.cancel=function(){this.J=!0,rd(this)},zl.lb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.L&&(Ch(),Ah(17)),rd(this),this.o=2,nd(this)):ed(this,this.Y-e)};var od=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ud(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof ud){this.h=e.h,cd(this,e.j),this.s=e.s,this.g=e.g,ld(this,e.m),this.l=e.l;var t=e.i,n=new xd;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),fd(this,n),this.o=e.o}else e&&(t=String(e).match(od))?(this.h=!1,cd(this,t[1]||"",!0),this.s=pd(t[2]||""),this.g=pd(t[3]||"",!0),ld(this,t[4]),this.l=pd(t[5]||"",!0),fd(this,t[6]||"",!0),this.o=pd(t[7]||"")):(this.h=!1,this.i=new xd(null,this.h))}function sd(e){return new ud(e)}function cd(e,t,n){e.j=n?pd(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function ld(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function fd(e,t,n){t instanceof xd?(e.i=t,function(e,t){t&&!e.j&&(_d(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Id(this,t),Sd(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=vd(t,wd)),e.i=new xd(t,e.h))}function hd(e,t,n){e.i.set(t,n)}function dd(e){return hd(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function pd(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function vd(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,md),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function md(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}ud.prototype.toString=function(){var e=[],t=this.j;t&&e.push(vd(t,yd,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(vd(t,yd,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(vd(n,"/"==n.charAt(0)?kd:gd,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",vd(n,bd)),e.join("")};var yd=/[#\/\?@]/g,gd=/[#\?:]/g,kd=/[#\?]/g,wd=/[#\?@]/g,bd=/#/g;function xd(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function _d(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Id(e,t){_d(e),t=Td(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Ed(e,t){return _d(e),t=Td(e,t),e.g.has(t)}function Sd(e,t,n){Id(e,t),0<n.length&&(e.i=null,e.g.set(Td(e,t),rf(n)),e.h+=n.length)}function Td(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(zl=xd.prototype).add=function(e,t){_d(this),this.i=null,e=Td(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},zl.forEach=function(e,t){_d(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},zl.ta=function(){_d(this);for(var e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},zl.Z=function(e){_d(this);var t=[];if("string"===typeof e)Ed(this,e)&&(t=t.concat(this.g.get(Td(this,e))));else{e=Array.from(this.g.values());for(var n=0;n<e.length;n++)t=t.concat(e[n])}return t},zl.set=function(e,t){return _d(this),this.i=null,Ed(this,e=Td(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},zl.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},zl.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=Array.from(this.g.keys()),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r)),a=this.Z(r);for(r=0;r<a.length;r++){var o=i;""!==a[r]&&(o+="="+encodeURIComponent(String(a[r]))),e.push(o)}}return this.i=e.join("&")};var Cd=y((function e(t,n){d(this,e),this.g=t,this.map=n}));function Nd(e){this.l=e||Ad,Gl.PerformanceNavigationTiming?e=0<(e=Gl.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(Gl.g&&Gl.g.Ka&&Gl.g.Ka()&&Gl.g.Ka().dc),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Ad=10;function Pd(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Rd(e){return e.h?1:e.g?e.g.size:0}function Dd(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Od(e,t){e.g?e.g.add(t):e.h=t}function Ld(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Md(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=T(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.F)}}catch(a){r.e(a)}finally{r.f()}return n}return rf(e.i)}Nd.prototype.cancel=function(){if(this.i=Md(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=T(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}};var Fd,Ud=function(){function e(){d(this,e)}return y(e,[{key:"stringify",value:function(e){return Gl.JSON.stringify(e,void 0)}},{key:"parse",value:function(e){return Gl.JSON.parse(e,void 0)}}]),e}();function Vd(){this.g=new Ud}function jd(e,t,n){var r=n||"";try{ad(e,(function(e,n){var i=e;Wl(e)&&(i=eh(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function zd(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(JC){}}function Bd(e){this.l=e.ec||null,this.j=e.ob||!1}function qd(e,t){Xf.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=Kd,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ef(Bd,Lh),Bd.prototype.g=function(){return new qd(this.l,this.j)},Bd.prototype.i=(Fd={},function(){return Fd}),ef(qd,Xf);var Kd=0;function Gd(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function Hd(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Wd(e)}function Wd(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(zl=qd.prototype).open=function(e,t){if(this.readyState!=Kd)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Wd(this)},zl.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||Gl).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},zl.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((function(){})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Hd(this)),this.readyState=Kd},zl.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Wd(this)),this.g&&(this.readyState=3,Wd(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof Gl.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Gd(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},zl.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Hd(this):Wd(this),3==this.readyState&&Gd(this)}},zl.Za=function(e){this.g&&(this.response=this.responseText=e,Hd(this))},zl.Ya=function(e){this.g&&(this.response=e,Hd(this))},zl.ka=function(){this.g&&Hd(this)},zl.setRequestHeader=function(e,t){this.v.append(e,t)},zl.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},zl.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(qd.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Qd=Gl.JSON.parse;function Yd(e){Xf.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=$d,this.L=this.M=!1}ef(Yd,Xf);var $d="",Xd=/^https?$/i,Jd=["POST","PUT"];function Zd(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,ep(e),np(e)}function ep(e){e.F||(e.F=!0,Jf(e,"complete"),Jf(e,"error"))}function tp(e){if(e.h&&"undefined"!=typeof Kl&&(!e.C[1]||4!=ip(e)||2!=e.da()))if(e.v&&4==ip(e))vh(e.La,0,e);else if(Jf(e,"readystatechange"),4==ip(e)){e.h=!1;try{var t,n=e.da();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.I).match(od)[1]||null;!a&&Gl.self&&Gl.self.location&&(a=Gl.self.location.protocol.slice(0,-1)),i=!Xd.test(a?a.toLowerCase():"")}t=i}if(t)Jf(e,"complete"),Jf(e,"success");else{e.m=6;try{var o=2<ip(e)?e.g.statusText:""}catch(u){o=""}e.j=o+" ["+e.da()+"]",ep(e)}}finally{np(e)}}}function np(e,t){if(e.g){rp(e);var n=e.g,r=e.C[0]?function(){}:null;e.g=null,e.C=null,t||Jf(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function rp(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(Gl.clearTimeout(e.A),e.A=null)}function ip(e){return e.g?e.g.readyState:0}function ap(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case $d:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(hv){return null}}function op(e){var t="";return Rf(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function up(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=op(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):hd(e,t,n))}function sp(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function cp(e){this.Ga=0,this.j=[],this.l=new xh,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=sp("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=sp("baseRetryDelayMs",5e3,e),this.hb=sp("retryDelaySeedMs",1e4,e),this.eb=sp("forwardChannelMaxRetries",2,e),this.xa=sp("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new Nd(e&&e.concurrentRequestLimit),this.Ja=new Vd,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function lp(e){if(hp(e),3==e.H){var t=e.W++,n=sd(e.I);if(hd(n,"SID",e.K),hd(n,"RID",t),hd(n,"TYPE","terminate"),vp(e,n),(t=new qh(e,e.l,t)).L=2,t.v=dd(sd(n)),n=!1,Gl.navigator&&Gl.navigator.sendBeacon)try{n=Gl.navigator.sendBeacon(t.v.toString(),"")}catch(YC){}!n&&Gl.Image&&((new Image).src=t.v,n=!0),n||(t.g=Tp(t.l,null),t.g.ha(t.v)),t.G=Date.now(),Zh(t)}Ep(e)}function fp(e){e.g&&(kp(e),e.g.cancel(),e.g=null)}function hp(e){fp(e),e.u&&(Gl.clearTimeout(e.u),e.u=null),bp(e),e.i.cancel(),e.m&&("number"===typeof e.m&&Gl.clearTimeout(e.m),e.m=null)}function dp(e){if(!Pd(e.i)&&!e.m){e.m=!0;var t=e.Na;sh||fh(),ch||(sh(),ch=!0),lh.add(t,e),e.C=0}}function pp(e,t){var n;n=t?t.m:e.W++;var r=sd(e.I);hd(r,"SID",e.K),hd(r,"RID",n),hd(r,"AID",e.V),vp(e,r),e.o&&e.s&&up(r,e.o,e.s),n=new qh(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=mp(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),Od(e.i,n),Qh(n,r,t)}function vp(e,t){e.na&&Rf(e.na,(function(e,n){hd(t,n,e)})),e.h&&ad({},(function(e,n){hd(t,n,e)}))}function mp(e,t,n){n=Math.min(e.j.length,n);var r=e.h?Jl(e.h.Va,e.h,e):null;e:for(var i=e.j,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].g,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var u=!0,s=0;s<n;s++){var c=i[s].g,l=i[s].map;if(0>(c-=a))a=Math.max(0,i[s].g-100),u=!1;else try{jd(l,o,"req"+c+"_")}catch(Am){r&&r(l)}}if(u){r=o.join("&");break e}}return e=e.j.splice(0,n),t.F=e,r}function yp(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;sh||fh(),ch||(sh(),ch=!0),lh.add(t,e),e.A=0}}function gp(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=Rh(Jl(e.Ma,e),_p(e,e.A)),e.A++,!0)}function kp(e){null!=e.B&&(Gl.clearTimeout(e.B),e.B=null)}function wp(e){e.g=new qh(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=sd(e.wa);hd(t,"RID","rpc"),hd(t,"SID",e.K),hd(t,"AID",e.V),hd(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&hd(t,"TO",e.qa),hd(t,"TYPE","xmlhttp"),vp(e,t),e.o&&e.s&&up(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.v=dd(sd(t)),n.s=null,n.S=!0,Yh(n,e)}function bp(e){null!=e.v&&(Gl.clearTimeout(e.v),e.v=null)}function xp(e,t){var n=null;if(e.g==t){bp(e),kp(e),e.g=null;var r=2}else{if(!Dd(e.i,t))return;n=t.F,Ld(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.G;var i=e.C;Jf(r=Sh(),new Ph(r,n)),dp(e)}else yp(e);else if(3==(i=t.o)||0==i&&0<t.ca||!(1==r&&function(e,t){return!(Rd(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.j=t.F.concat(e.j),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=Rh(Jl(e.Na,e,t),_p(e,e.C)),e.C++,!0))}(e,t)||2==r&&gp(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Ip(e,5);break;case 4:Ip(e,10);break;case 3:Ip(e,6);break;default:Ip(e,2)}}function _p(e,t){var n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function Ip(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=Jl(e.pb,e);n||(n=new ud("//www.google.com/images/cleardot.gif"),Gl.location&&"http"==Gl.location.protocol||cd(n,"https"),dd(n)),function(e,t){var n=new xh;if(Gl.Image){var r=new Image;r.onload=Zl(zd,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Zl(zd,n,r,"TestLoadImage: error",!1,t),r.onabort=Zl(zd,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Zl(zd,n,r,"TestLoadImage: timeout",!1,t),Gl.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Ah(2);e.H=0,e.h&&e.h.za(t),Ep(e),hp(e)}function Ep(e){if(e.H=0,e.ma=[],e.h){var t=Md(e.i);0==t.length&&0==e.j.length||(af(e.ma,t),af(e.ma,e.j),e.i.i.length=0,rf(e.j),e.j.length=0),e.h.ya()}}function Sp(e,t,n){var r=n instanceof ud?sd(n):new ud(n);if(""!=r.g)t&&(r.g=t+"."+r.g),ld(r,r.m);else{var i=Gl.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var a=new ud(null);r&&cd(a,r),t&&(a.g=t),i&&ld(a,i),n&&(a.l=n),r=a}return n=e.F,t=e.Da,n&&t&&hd(r,n,t),hd(r,"VER",e.ra),vp(e,r),r}function Tp(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ha&&!e.va?new Yd(new Bd({ob:!0})):new Yd(e.va)).Oa(e.J),t}function Cp(){}function Np(){if(vf&&!(10<=Number(Ef)))throw Error("Environmental error: no available transport.")}function Ap(e,t){Xf.call(this),this.g=new cp(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!sf(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!sf(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Dp(this)}function Pp(e){jh.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Rp(){zh.call(this),this.status=1}function Dp(e){this.g=e}function Op(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Lp(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var a=e.g[3],o=t+(a^n&(i^a))+r[0]+3614090360&4294967295;o=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=n+(o<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^a&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^a)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~a))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~a))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~a))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((a=(t=n+((o=t+(i^(n|~a))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=a+((o=i+(t^(a|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+a&4294967295}function Mp(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var a=0|e[i];r&&a==t||(n[i]=a,r=!1)}this.g=n}(zl=Yd.prototype).Oa=function(e){this.M=e},zl.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Uh.g(),this.C=this.u?Mh(this.u):Mh(Uh),this.g.onreadystatechange=Jl(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(u){return void Zd(this,u)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));var a,o=T(r.keys());try{for(o.s();!(a=o.n()).done;){var u=a.value;n.set(u,r.get(u))}}catch(p){o.e(p)}finally{o.f()}}r=Array.from(n.keys()).find((function(e){return"content-type"==e.toLowerCase()})),i=Gl.FormData&&e instanceof Gl.FormData,!(0<=nf(Jd,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");var s,c=T(n);try{for(c.s();!(s=c.n()).done;){var f=l(s.value,2),h=f[0],d=f[1];this.g.setRequestHeader(h,d)}}catch(p){c.e(p)}finally{c.f()}this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{rp(this),0<this.B&&((this.L=function(e){return vf&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Jl(this.ua,this)):this.A=vh(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(u){Zd(this,u)}},zl.ua=function(){"undefined"!=typeof Kl&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Jf(this,"timeout"),this.abort(8))},zl.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Jf(this,"complete"),Jf(this,"abort"),np(this))},zl.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),np(this,!0)),Yd.$.N.call(this)},zl.La=function(){this.s||(this.G||this.v||this.l?tp(this):this.kb())},zl.kb=function(){tp(this)},zl.isActive=function(){return!!this.g},zl.da=function(){try{return 2<ip(this)?this.g.status:-1}catch(Fd){return-1}},zl.ja=function(){try{return this.g?this.g.responseText:""}catch(Fd){return""}},zl.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Qd(t)}},zl.Ia=function(){return this.m},zl.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(zl=cp.prototype).ra=8,zl.H=1,zl.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;var t=new qh(this,this.l,e),n=this.s;if(this.U&&(n?Lf(n=Df(n),this.U):n=this.U),null!==this.o||this.O||(t.I=n,n=null),this.P)e:{for(var r=0,i=0;i<this.j.length;i++){var a=this.j[i];if(void 0===(a="__data__"in a.map&&"string"===typeof(a=a.map.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.j.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=mp(this,t,r),hd(i=sd(this.I),"RID",e),hd(i,"CVER",22),this.F&&hd(i,"X-HTTP-Session-Id",this.F),vp(this,i),n&&(this.O?r="headers="+encodeURIComponent(String(op(n)))+"&"+r:this.o&&up(i,this.o,n)),Od(this.i,t),this.bb&&hd(i,"TYPE","init"),this.P?(hd(i,"$req",r),hd(i,"SID","null"),t.aa=!0,Qh(t,i,null)):Qh(t,i,r),this.H=2}}else 3==this.H&&(e?pp(this,e):0==this.j.length||Pd(this.i)||pp(this))},zl.Ma=function(){if(this.u=null,wp(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=Rh(Jl(this.jb,this),e)}},zl.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Ah(10),fp(this),wp(this))},zl.ib=function(){null!=this.v&&(this.v=null,fp(this),gp(this),Ah(19))},zl.pb=function(e){e?(this.l.info("Successfully pinged google.com"),Ah(2)):(this.l.info("Failed to ping google.com"),Ah(1))},zl.isActive=function(){return!!this.h&&this.h.isActive(this)},(zl=Cp.prototype).Ba=function(){},zl.Aa=function(){},zl.za=function(){},zl.ya=function(){},zl.isActive=function(){return!0},zl.Va=function(){},Np.prototype.g=function(e,t){return new Ap(e,t)},ef(Ap,Xf),Ap.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;Ah(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=Sp(e,null,e.Y),dp(e)},Ap.prototype.close=function(){lp(this.g)},Ap.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=eh(e),e=n);t.j.push(new Cd(t.fb++,e)),3==t.H&&dp(t)},Ap.prototype.N=function(){this.g.h=null,delete this.j,lp(this.g),delete this.g,Ap.$.N.call(this)},ef(Pp,jh),ef(Rp,zh),ef(Dp,Cp),Dp.prototype.Ba=function(){Jf(this.g,"a")},Dp.prototype.Aa=function(e){Jf(this.g,new Pp(e))},Dp.prototype.za=function(e){Jf(this.g,new Rp)},Dp.prototype.ya=function(){Jf(this.g,"b")},ef(Op,(function(){this.blockSize=-1})),Op.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Op.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,a=0;a<t;){if(0==i)for(;a<=n;)Lp(this,e,a),a+=this.blockSize;if("string"===typeof e){for(;a<t;)if(r[i++]=e.charCodeAt(a++),i==this.blockSize){Lp(this,r),i=0;break}}else for(;a<t;)if(r[i++]=e[a++],i==this.blockSize){Lp(this,r),i=0;break}}this.h=i,this.i+=t},Op.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var Fp={};function Up(e){return-128<=e&&128>e?function(e,t){var n=Fp;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new Mp([0|e],0>e?-1:0)})):new Mp([0|e],0>e?-1:0)}function Vp(e){if(isNaN(e)||!isFinite(e))return zp;if(0>e)return Hp(Vp(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=jp;return new Mp(t,0)}var jp=4294967296,zp=Up(0),Bp=Up(1),qp=Up(16777216);function Kp(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function Gp(e){return-1==e.h}function Hp(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new Mp(n,~e.h).add(Bp)}function Wp(e,t){return e.add(Hp(t))}function Qp(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function Yp(e,t){this.g=e,this.h=t}function $p(e,t){if(Kp(t))throw Error("division by zero");if(Kp(e))return new Yp(zp,zp);if(Gp(e))return t=$p(Hp(e),t),new Yp(Hp(t.g),Hp(t.h));if(Gp(t))return t=$p(e,Hp(t)),new Yp(Hp(t.g),t.h);if(30<e.g.length){if(Gp(e)||Gp(t))throw Error("slowDivide_ only works with positive integers.");for(var n=Bp,r=t;0>=r.X(e);)n=Xp(n),r=Xp(r);var i=Jp(n,1),a=Jp(r,1);for(r=Jp(r,2),n=Jp(n,2);!Kp(r);){var o=a.add(r);0>=o.X(e)&&(i=i.add(n),a=o),r=Jp(r,1),n=Jp(n,1)}return t=Wp(e,i.R(t)),new Yp(i,t)}for(i=zp;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(a=Vp(n)).R(t);Gp(o)||0<o.X(e);)o=(a=Vp(n-=r)).R(t);Kp(a)&&(a=Bp),i=i.add(a),e=Wp(e,o)}return new Yp(i,e)}function Xp(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new Mp(n,e.h)}function Jp(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],a=0;a<r;a++)i[a]=0<t?e.D(a+n)>>>t|e.D(a+n+1)<<32-t:e.D(a+n);return new Mp(i,e.h)}(zl=Mp.prototype).ea=function(){if(Gp(this))return-Hp(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:jp+r)*t,t*=jp}return e},zl.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(Kp(this))return"0";if(Gp(this))return"-"+Hp(this).toString(e);for(var t=Vp(Math.pow(e,6)),n=this,r="";;){var i=$p(n,t).g,a=((0<(n=Wp(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(Kp(n=i))return a+r;for(;6>a.length;)a="0"+a;r=a+r}},zl.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},zl.X=function(e){return Gp(e=Wp(this,e))?-1:Kp(e)?0:1},zl.abs=function(){return Gp(this)?Hp(this):this},zl.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var a=r+(65535&this.D(i))+(65535&e.D(i)),o=(a>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=o>>>16,a&=65535,o&=65535,n[i]=o<<16|a}return new Mp(n,-2147483648&n[n.length-1]?-1:0)},zl.R=function(e){if(Kp(this)||Kp(e))return zp;if(Gp(this))return Gp(e)?Hp(this).R(Hp(e)):Hp(Hp(this).R(e));if(Gp(e))return Hp(this.R(Hp(e)));if(0>this.X(qp)&&0>e.X(qp))return Vp(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var a=this.D(r)>>>16,o=65535&this.D(r),u=e.D(i)>>>16,s=65535&e.D(i);n[2*r+2*i]+=o*s,Qp(n,2*r+2*i),n[2*r+2*i+1]+=a*s,Qp(n,2*r+2*i+1),n[2*r+2*i+1]+=o*u,Qp(n,2*r+2*i+1),n[2*r+2*i+2]+=a*u,Qp(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new Mp(n,0)},zl.gb=function(e){return $p(this,e).h},zl.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new Mp(n,this.h&e.h)},zl.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new Mp(n,this.h|e.h)},zl.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new Mp(n,this.h^e.h)},Np.prototype.createWebChannel=Np.prototype.g,Ap.prototype.send=Ap.prototype.u,Ap.prototype.open=Ap.prototype.m,Ap.prototype.close=Ap.prototype.close,Dh.NO_ERROR=0,Dh.TIMEOUT=8,Dh.HTTP_ERROR=6,Oh.COMPLETE="complete",Fh.EventType=Vh,Vh.OPEN="a",Vh.CLOSE="b",Vh.ERROR="c",Vh.MESSAGE="d",Xf.prototype.listen=Xf.prototype.O,Yd.prototype.listenOnce=Yd.prototype.P,Yd.prototype.getLastError=Yd.prototype.Sa,Yd.prototype.getLastErrorCode=Yd.prototype.Ia,Yd.prototype.getStatus=Yd.prototype.da,Yd.prototype.getResponseJson=Yd.prototype.Wa,Yd.prototype.getResponseText=Yd.prototype.ja,Yd.prototype.send=Yd.prototype.ha,Yd.prototype.setWithCredentials=Yd.prototype.Oa,Op.prototype.digest=Op.prototype.l,Op.prototype.reset=Op.prototype.reset,Op.prototype.update=Op.prototype.j,Mp.prototype.add=Mp.prototype.add,Mp.prototype.multiply=Mp.prototype.R,Mp.prototype.modulo=Mp.prototype.gb,Mp.prototype.compare=Mp.prototype.X,Mp.prototype.toNumber=Mp.prototype.ea,Mp.prototype.toString=Mp.prototype.toString,Mp.prototype.getBits=Mp.prototype.D,Mp.fromNumber=Vp,Mp.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return Hp(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=Vp(Math.pow(n,8)),i=zp,a=0;a<t.length;a+=8){var o=Math.min(8,t.length-a),u=parseInt(t.substring(a,a+o),n);8>o?(o=Vp(Math.pow(n,o)),i=i.R(o).add(Vp(u))):i=(i=i.R(r)).add(Vp(u))}return i};var Zp=ql.createWebChannelTransport=function(){return new Np},ev=ql.getStatEventTarget=function(){return Sh()},tv=ql.ErrorCode=Dh,nv=ql.EventType=Oh,rv=ql.Event=Ih,iv=ql.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},av=(ql.FetchXmlHttpFactory=Bd,ql.WebChannel=Fh),ov=ql.XhrIo=Yd,uv=ql.Md5=Op,sv=ql.Integer=Mp,cv="@firebase/firestore",lv=function(){function e(t){d(this,e),this.uid=t}return y(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();lv.UNAUTHENTICATED=new lv(null),lv.GOOGLE_CREDENTIALS=new lv("google-credentials-uid"),lv.FIRST_PARTY=new lv("first-party-uid"),lv.MOCK_USER=new lv("mock-user");var fv="10.4.0",hv=new zt("@firebase/firestore");function dv(){return hv.logLevel}function pv(e){if(hv.logLevel<=Ot.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(yv);hv.debug.apply(hv,["Firestore (".concat(fv,"): ").concat(e)].concat(h(i)))}}function vv(e){if(hv.logLevel<=Ot.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(yv);hv.error.apply(hv,["Firestore (".concat(fv,"): ").concat(e)].concat(h(i)))}}function mv(e){if(hv.logLevel<=Ot.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(yv);hv.warn.apply(hv,["Firestore (".concat(fv,"): ").concat(e)].concat(h(i)))}}function yv(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function gv(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(fv,") INTERNAL ASSERTION FAILED: ")+e;throw vv(t),new Error(t)}function kv(e,t){e||gv()}function wv(e,t){return e}var bv={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},xv=function(e){k(n,e);var t=_(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return y(n)}(dt),_v=y((function e(){var t=this;d(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),Iv=y((function e(t,n){d(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),Ev=function(){function e(){d(this,e)}return y(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(lv.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),Sv=function(){function e(t){d(this,e),this.token=t,this.changeListener=null}return y(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),Tv=function(){function e(t){d(this,e),this.t=t,this.currentUser=lv.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return y(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new _v;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new _v,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(Nt(Tt().mark((function e(){return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},u=function(e){pv("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return u(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?u(e):(pv("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new _v)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(pv("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(kv("string"==typeof n.accessToken),new Iv(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return kv(null===e||"string"==typeof e),new lv(e)}}]),e}(),Cv=function(){function e(t,n,r){d(this,e),this.l=t,this.h=n,this.P=r,this.type="FirstParty",this.user=lv.FIRST_PARTY,this.I=new Map}return y(e,[{key:"T",value:function(){return this.P?this.P():null}},{key:"headers",get:function(){this.I.set("X-Goog-AuthUser",this.l);var e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}]),e}(),Nv=function(){function e(t,n,r){d(this,e),this.l=t,this.h=n,this.P=r}return y(e,[{key:"getToken",value:function(){return Promise.resolve(new Cv(this.l,this.h,this.P))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(lv.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),Av=y((function e(t){d(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),Pv=function(){function e(t){d(this,e),this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}return y(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&pv("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.R;return n.R=e.token,pv("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){pv("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.A.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.A.getImmediate({optional:!0});e?i(e):pv("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(kv("string"==typeof t.token),e.R=t.token,new Av(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}();function Rv(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var Dv=function(){function e(){d(this,e)}return y(e,null,[{key:"V",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62),n="";n.length<20;)for(var r=Rv(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62));return n}}]),e}();function Ov(e,t){return e<t?-1:e>t?1:0}function Lv(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function Mv(e){return e+"\0"}var Fv=function(){function e(t,n){if(d(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new xv(bv.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new xv(bv.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new xv(bv.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new xv(bv.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return y(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?Ov(this.nanoseconds,e.nanoseconds):Ov(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),Uv=function(){function e(t){d(this,e),this.timestamp=t}return y(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new Fv(0,0))}},{key:"max",value:function(){return new e(new Fv(253402300799,999999999))}}]),e}(),Vv=function(){function e(t,n,r){d(this,e),void 0===n?n=0:n>t.length&&gv(),void 0===r?r=t.length-n:r>t.length-n&&gv(),this.segments=t,this.offset=n,this.len=r}return y(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),jv=function(e){k(n,e);var t=_(n);function n(){return d(this,n),t.apply(this,arguments)}return y(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];if(u.indexOf("//")>=0)throw new xv(bv.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,h(u.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Vv),zv=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Bv=function(e){k(n,e);var t=_(n);function n(){return d(this,n),t.apply(this,arguments)}return y(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return zv.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new xv(bv.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new xv(bv.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new xv(bv.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new xv(bv.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Vv),qv=function(){function e(t){d(this,e),this.path=t}return y(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===jv.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(jv.fromString(t))}},{key:"fromName",value:function(t){return new e(jv.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(jv.emptyPath())}},{key:"comparator",value:function(e,t){return jv.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new jv(t.slice()))}}]),e}(),Kv=y((function e(t,n,r,i){d(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));function Gv(e){return e.fields.find((function(e){return 2===e.kind}))}function Hv(e){return e.fields.filter((function(e){return 2!==e.kind}))}Kv.UNKNOWN_ID=-1;var Wv=y((function e(t,n){d(this,e),this.fieldPath=t,this.kind=n}));var Qv=function(){function e(t,n){d(this,e),this.sequenceNumber=t,this.offset=n}return y(e,null,[{key:"empty",value:function(){return new e(0,Xv.min())}}]),e}();function Yv(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Uv.fromTimestamp(1e9===r?new Fv(n+1,0):new Fv(n,r));return new Xv(i,qv.empty(),t)}function $v(e){return new Xv(e.readTime,e.key,-1)}var Xv=function(){function e(t,n,r){d(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return y(e,null,[{key:"min",value:function(){return new e(Uv.min(),qv.empty(),-1)}},{key:"max",value:function(){return new e(Uv.max(),qv.empty(),-1)}}]),e}();function Jv(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=qv.comparator(e.documentKey,t.documentKey))?n:Ov(e.largestBatchId,t.largestBatchId)}var Zv="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",em=function(){function e(){d(this,e),this.onCommittedListeners=[]}return y(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}();function tm(e){return nm.apply(this,arguments)}function nm(){return(nm=Nt(Tt().mark((function e(t){return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===bv.FAILED_PRECONDITION&&t.message===Zv){e.next=2;break}throw t;case 2:pv("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var rm=function(){function e(t){var n=this;d(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return y(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&gv(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=T(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}},{key:"mapArray",value:function(t,n){return new e((function(e,r){for(var i=t.length,a=new Array(i),o=0,u=function(){var u=s;n(t[u]).next((function(t){a[u]=t,++o===i&&e(a)}),(function(e){return r(e)}))},s=0;s<i;s++)u()}))}},{key:"doWhile",value:function(t,n){return new e((function(e,r){!function i(){!0===t()?n().next((function(){i()}),r):e()}()}))}}]),e}(),im=function(){function e(t,n){var r=this;d(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.m=new _v,this.transaction.oncomplete=function(){r.m.resolve()},this.transaction.onabort=function(){n.error?r.m.reject(new um(t,n.error)):r.m.resolve()},this.transaction.onerror=function(e){var n=hm(e.target.error);r.m.reject(new um(t,n))}}return y(e,[{key:"g",get:function(){return this.m.promise}},{key:"abort",value:function(e){e&&this.m.reject(e),this.aborted||(pv("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"p",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new cm(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new um(n,t)}}}]),e}(),am=function(){function e(t,n,r){d(this,e),this.name=t,this.version=n,this.S=r,12.2===e.D(ut())&&vv("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return y(e,[{key:"N",value:function(){var e=Nt(Tt().mark((function e(t){var n=this;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return pv("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new um(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new xv(bv.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new xv(bv.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new um(t,n))},i.onupgradeneeded=function(e){pv("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.S.B(t,i.transaction,e.oldVersion,n.version).next((function(){pv("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.L&&(this.db.onversionchange=function(e){return n.L(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"k",value:function(e){this.L=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=Nt(Tt().mark((function e(t,n,r,i){var a,o,u,s,c=this;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0,u=Tt().mark((function e(){var n,u,s,l;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return++o,e.prev=1,e.next=4,c.N(t);case 4:return c.db=e.sent,n=im.open(c.db,t,a?"readonly":"readwrite",r),u=i(n).next((function(e){return n.p(),e})).catch((function(e){return n.abort(e),rm.reject(e)})).toPromise(),u.catch((function(){})),e.next=9,n.g;case 9:return e.t0=u,e.abrupt("return",{v:e.t0});case 13:if(e.prev=13,e.t1=e.catch(1),s=e.t1,l="FirebaseError"!==s.name&&o<3,pv("SimpleDb","Transaction failed with error:",s.message,"Retrying:",l),c.close(),l){e.next=18;break}return e.abrupt("return",{v:Promise.reject(s)});case 18:case"end":return e.stop()}}),e,null,[[1,13]])}));case 3:return e.delegateYield(u(),"t0",4);case 4:if("object"!==typeof(s=e.t0)){e.next=7;break}return e.abrupt("return",s.v);case 7:e.next=3;break;case 9:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return pv("SimpleDb","Removing database:",e),lm(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"C",value:function(){if(!ht())return!1;if(e.v())return!0;var t=ut(),n=e.D(t),r=0<n&&n<10,i=e.F(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"v",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.M)}},{key:"O",value:function(e,t){return e.store(t)}},{key:"D",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"F",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),om=function(){function e(t){d(this,e),this.q=t,this.K=!1,this.$=null}return y(e,[{key:"isDone",get:function(){return this.K}},{key:"U",get:function(){return this.$}},{key:"cursor",set:function(e){this.q=e}},{key:"done",value:function(){this.K=!0}},{key:"W",value:function(e){this.$=e}},{key:"delete",value:function(){return lm(this.q.delete())}}]),e}(),um=function(e){k(n,e);var t=_(n);function n(e,r){var i;return d(this,n),(i=t.call(this,bv.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return y(n)}(xv);function sm(e){return"IndexedDbTransactionError"===e.name}var cm=function(){function e(t){d(this,e),this.store=t}return y(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(pv("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(pv("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),lm(n)}},{key:"add",value:function(e){return pv("SimpleDb","ADD",this.store.name,e,e),lm(this.store.add(e))}},{key:"get",value:function(e){var t=this;return lm(this.store.get(e)).next((function(n){return void 0===n&&(n=null),pv("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return pv("SimpleDb","DELETE",this.store.name,e),lm(this.store.delete(e))}},{key:"count",value:function(){return pv("SimpleDb","COUNT",this.store.name),lm(this.store.count())}},{key:"G",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.j(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new rm((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"H",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new rm((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"J",value:function(e,t){pv("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.Y=!1;var r=this.cursor(n);return this.j(r,(function(e,t,n){return n.delete()}))}},{key:"Z",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.j(r,t)}},{key:"X",value:function(e){var t=this.cursor({});return new rm((function(n,r){t.onerror=function(e){var t=hm(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"j",value:function(e,t){var n=[];return new rm((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new om(i),o=t(i.primaryKey,i.value,a);if(o instanceof rm){var u=o.catch((function(e){return a.done(),rm.reject(e)}));n.push(u)}a.isDone?r():null===a.U?i.continue():i.continue(a.U)}else r()}})).next((function(){return rm.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.Y?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function lm(e){return new rm((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=hm(e.target.error);n(t)}}))}var fm=!1;function hm(e){var t=am.D(ut());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new xv("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return fm||(fm=!0,setTimeout((function(){throw r}),0)),r}}return e}var dm=function(){function e(t,n){d(this,e),this.asyncQueue=t,this.ee=n,this.task=null}return y(e,[{key:"start",value:function(){this.te(15e3)}},{key:"stop",value:function(){this.task&&(this.task.cancel(),this.task=null)}},{key:"started",get:function(){return null!==this.task}},{key:"te",value:function(e){var t=this;pv("IndexBackiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,Nt(Tt().mark((function e(){return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.task=null,e.prev=1,e.t0=pv,e.t1="Documents written: ",e.next=6,t.ee.ne();case 6:e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),(0,e.t0)("IndexBackiller",e.t3),e.next=19;break;case 11:if(e.prev=11,e.t4=e.catch(1),!sm(e.t4)){e.next=17;break}pv("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e.t4),e.next=19;break;case 17:return e.next=19,tm(e.t4);case 19:return e.next=21,t.te(6e4);case 21:case"end":return e.stop()}}),e,null,[[1,11]])}))))}}]),e}(),pm=function(){function e(t,n){d(this,e),this.localStore=t,this.persistence=n}return y(e,[{key:"ne",value:function(){var e=Nt(Tt().mark((function e(){var t,n=this,r=arguments;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:50,e.abrupt("return",this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(function(e){return n.re(e,t)})));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"re",value:function(e,t){var n=this,r=new Set,i=t,a=!0;return rm.doWhile((function(){return!0===a&&i>0}),(function(){return n.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((function(t){if(null!==t&&!r.has(t))return pv("IndexBackiller","Processing collection: ".concat(t)),n.ie(e,t,i).next((function(e){i-=e,r.add(t)}));a=!1}))})).next((function(){return t-i}))}},{key:"ie",value:function(e,t,n){var r=this;return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((function(i){return r.localStore.localDocuments.getNextDocuments(e,t,i,n).next((function(n){var a=n.changes;return r.localStore.indexManager.updateIndexEntries(e,a).next((function(){return r.se(i,n)})).next((function(n){return pv("IndexBackiller","Updating offset: ".concat(n)),r.localStore.indexManager.updateCollectionGroup(e,t,n)})).next((function(){return a.size}))}))}))}},{key:"se",value:function(e,t){var n=e;return t.changes.forEach((function(e,t){var r=$v(t);Jv(r,n)>0&&(n=r)})),new Xv(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}]),e}(),vm=function(){function e(t,n){var r=this;d(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.oe(e)},this._e=function(e){return n.writeSequenceNumber(e)})}return y(e,[{key:"oe",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this._e&&this._e(e),e}}]),e}();function mm(e){return null==e}function ym(e){return 0===e&&1/e==-1/0}function gm(e){return"number"==typeof e&&Number.isInteger(e)&&!ym(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function km(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=bm(t)),t=wm(e.get(n),t);return bm(t)}function wm(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function bm(e){return e+"\x01\x01"}function xm(e){var t=e.length;if(kv(t>=2),2===t)return kv("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),jv.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&gv(),e.charAt(o+1)){case"\x01":var u=e.substring(a,o),s=void 0;0===i.length?s=u:(s=i+=u,i=""),r.push(s);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:gv()}a=o+2}return new jv(r)}vm.ae=-1;var _m=["userId","batchId"];function Im(e,t){return[e,km(t)]}function Em(e,t,n){return[e,km(t),n]}var Sm={},Tm=["prefixPath","collectionGroup","readTime","documentId"],Cm=["prefixPath","collectionGroup","documentId"],Nm=["collectionGroup","readTime","prefixPath","documentId"],Am=["canonicalId","targetId"],Pm=["targetId","path"],Rm=["path","targetId"],Dm=["collectionId","parent"],Om=["indexId","uid"],Lm=["uid","sequenceNumber"],Mm=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Fm=["indexId","uid","orderedDocumentKey"],Um=["userId","collectionPath","documentId"],Vm=["userId","collectionPath","largestBatchId"],jm=["userId","collectionGroup","largestBatchId"],zm=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),Bm=[].concat(h(zm),["documentOverlays"]),qm=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Km=qm,Gm=[].concat(Km,["indexConfiguration","indexState","indexEntries"]),Hm=function(e){k(n,e);var t=_(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).ue=e,i.currentSequenceNumber=r,i}return y(n)}(em);function Wm(e,t){var n=wv(e);return am.O(n.ue,t)}function Qm(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Ym(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function $m(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var Xm=function(){function e(t,n){d(this,e),this.comparator=t,this.root=n||Zm.EMPTY}return y(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Zm.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Zm.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new Jm(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new Jm(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new Jm(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new Jm(this.root,e,this.comparator,!0)}}]),e}(),Jm=function(){function e(t,n,r,i){d(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return y(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),Zm=function(){function e(t,n,r,i,a){d(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return y(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw gv();if(this.right.isRed())throw gv();var e=this.left.check();if(e!==this.right.check())throw gv();return e+(this.isRed()?0:1)}}]),e}();Zm.EMPTY=null,Zm.RED=!0,Zm.BLACK=!1,Zm.EMPTY=new(function(){function e(){d(this,e),this.size=0}return y(e,[{key:"key",get:function(){throw gv()}},{key:"value",get:function(){throw gv()}},{key:"color",get:function(){throw gv()}},{key:"left",get:function(){throw gv()}},{key:"right",get:function(){throw gv()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new Zm(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var ey=function(){function e(t){d(this,e),this.comparator=t,this.data=new Xm(this.comparator)}return y(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new ty(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new ty(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),ty=function(){function e(t){d(this,e),this.iter=t}return y(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function ny(e){return e.hasNext()?e.getNext():void 0}var ry=function(){function e(t){d(this,e),this.fields=t,t.sort(Bv.comparator)}return y(e,[{key:"unionWith",value:function(t){var n,r=new ey(Bv.comparator),i=T(this.fields);try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r.add(a)}}catch(c){i.e(c)}finally{i.f()}var o,u=T(t);try{for(u.s();!(o=u.n()).done;){var s=o.value;r=r.add(s)}}catch(c){u.e(c)}finally{u.f()}return new e(r.toArray())}},{key:"covers",value:function(e){var t,n=T(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return Lv(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}],[{key:"empty",value:function(){return new e([])}}]),e}(),iy=function(e){k(n,e);var t=_(n);function n(){var e;return d(this,n),(e=t.apply(this,arguments)).name="Base64DecodeError",e}return y(n)}(E(Error));var ay=function(e){function t(e){d(this,t),this.binaryString=e}return y(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return Ov(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){var n=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new iy("Invalid base64 string: "+e):e}}(e);return new t(n)}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();ay.EMPTY_BYTE_STRING=new ay("");var oy=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function uy(e){if(kv(!!e),"string"==typeof e){var t=0,n=oy.exec(e);if(kv(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:sy(e.seconds),nanos:sy(e.nanos)}}function sy(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function cy(e){return"string"==typeof e?ay.fromBase64String(e):ay.fromUint8Array(e)}function ly(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function fy(e){var t=e.mapValue.fields.__previous_value__;return ly(t)?fy(t):t}function hy(e){var t=uy(e.mapValue.fields.__local_write_time__.timestampValue);return new Fv(t.seconds,t.nanos)}var dy=y((function e(t,n,r,i,a,o,u,s,c){d(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.longPollingOptions=s,this.useFetchStreams=c})),py=function(){function e(t,n){d(this,e),this.projectId=t,this.database=n||"(default)"}return y(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}(),vy={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},my={nullValue:"NULL_VALUE"};function yy(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?ly(e)?4:Py(e)?9007199254740991:10:gv()}function gy(e,t){if(e===t)return!0;var n=yy(e);if(n!==yy(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return hy(e).isEqual(hy(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=uy(e.timestampValue),r=uy(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return cy(e.bytesValue).isEqual(cy(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return sy(e.geoPointValue.latitude)===sy(t.geoPointValue.latitude)&&sy(e.geoPointValue.longitude)===sy(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return sy(e.integerValue)===sy(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=sy(e.doubleValue),r=sy(t.doubleValue);return n===r?ym(n)===ym(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Lv(e.arrayValue.values||[],t.arrayValue.values||[],gy);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Qm(n)!==Qm(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!gy(n[i],r[i])))return!1;return!0}(e,t);default:return gv()}}function ky(e,t){return void 0!==(e.values||[]).find((function(e){return gy(e,t)}))}function wy(e,t){if(e===t)return 0;var n=yy(e),r=yy(t);if(n!==r)return Ov(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ov(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=sy(e.integerValue||e.doubleValue),r=sy(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return by(e.timestampValue,t.timestampValue);case 4:return by(hy(e),hy(t));case 5:return Ov(e.stringValue,t.stringValue);case 6:return function(e,t){var n=cy(e),r=cy(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=Ov(n[i],r[i]);if(0!==a)return a}return Ov(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=Ov(sy(e.latitude),sy(t.latitude));return 0!==n?n:Ov(sy(e.longitude),sy(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=wy(n[i],r[i]);if(a)return a}return Ov(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===vy.mapValue&&t===vy.mapValue)return 0;if(e===vy.mapValue)return 1;if(t===vy.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var u=Ov(r[o],a[o]);if(0!==u)return u;var s=wy(n[r[o]],i[a[o]]);if(0!==s)return s}return Ov(r.length,a.length)}(e.mapValue,t.mapValue);default:throw gv()}}function by(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Ov(e,t);var n=uy(e),r=uy(t),i=Ov(n.seconds,r.seconds);return 0!==i?i:Ov(n.nanos,r.nanos)}function xy(e){return _y(e)}function _y(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=uy(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return cy(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return qv.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){var t,n="[",r=!0,i=T(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=_y(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=T(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(_y(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):gv()}function Iy(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Ey(e){return!!e&&"integerValue"in e}function Sy(e){return!!e&&"arrayValue"in e}function Ty(e){return!!e&&"nullValue"in e}function Cy(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Ny(e){return!!e&&"mapValue"in e}function Ay(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return Ym(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=Ay(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=Ay(e.arrayValue.values[r]);return n}return Object.assign({},e)}function Py(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function Ry(e){return"nullValue"in e?my:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?Iy(py.empty(),qv.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:gv()}function Dy(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?Iy(py.empty(),qv.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?vy:gv()}function Oy(e,t){var n=wy(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function Ly(e,t){var n=wy(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}var My=function(){function e(t){d(this,e),this.value=t}return y(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!Ny(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ay(t)}},{key:"setAll",value:function(e){var t=this,n=Bv.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=Ay(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());Ny(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return gy(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];Ny(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){Ym(t,(function(t,n){return e[t]=n}));var r,i=T(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(Ay(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function Fy(e){var t=[];return Ym(e.fields,(function(e,n){var r=new Bv([e]);if(Ny(n)){var i=Fy(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=T(i);try{for(o.s();!(a=o.n()).done;){var u=a.value;t.push(r.child(u))}}catch(s){o.e(s)}finally{o.f()}}}else t.push(r)})),new ry(t)}var Uy=function(){function e(t,n,r,i,a,o,u){d(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=o,this.documentState=u}return y(e,[{key:"convertToFoundDocument",value:function(e,t){return!this.createTime.isEqual(Uv.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=My.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=My.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=Uv.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,Uv.min(),Uv.min(),Uv.min(),My.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r,i){return new e(t,1,n,Uv.min(),r,i,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,Uv.min(),Uv.min(),My.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,Uv.min(),Uv.min(),My.empty(),2)}}]),e}(),Vy=y((function e(t,n){d(this,e),this.position=t,this.inclusive=n}));function jy(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?qv.comparator(qv.fromName(o.referenceValue),n.key):wy(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function zy(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!gy(e.position[n],t.position[n]))return!1;return!0}var By=y((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";d(this,e),this.field=t,this.dir=n}));function qy(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}var Ky=y((function e(){d(this,e)})),Gy=function(e){k(n,e);var t=_(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return y(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(wy(t,this.value)):null!==t&&yy(this.value)===yy(t)&&this.matchesComparison(wy(t,this.value))}},{key:"matchesComparison",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return gv()}}},{key:"isInequality",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}},{key:"getFlattenedFilters",value:function(){return[this]}},{key:"getFilters",value:function(){return[this]}},{key:"getFirstInequalityField",value:function(){return this.isInequality()?this.field:null}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new tg(e,t,r):"array-contains"===t?new ag(e,r):"in"===t?new og(e,r):"not-in"===t?new ug(e,r):"array-contains-any"===t?new sg(e,r):new n(e,t,r)}},{key:"createKeyFieldInFilter",value:function(e,t,n){return"in"===t?new ng(e,n):new rg(e,n)}}]),n}(Ky),Hy=function(e){k(n,e);var t=_(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).filters=e,i.op=r,i.ce=null,i}return y(n,[{key:"matches",value:function(e){return Wy(this)?void 0===this.filters.find((function(t){return!t.matches(e)})):void 0!==this.filters.find((function(t){return t.matches(e)}))}},{key:"getFlattenedFilters",value:function(){return null!==this.ce||(this.ce=this.filters.reduce((function(e,t){return e.concat(t.getFlattenedFilters())}),[])),this.ce}},{key:"getFilters",value:function(){return Object.assign([],this.filters)}},{key:"getFirstInequalityField",value:function(){var e=this.le((function(e){return e.isInequality()}));return null!==e?e.field:null}},{key:"le",value:function(e){var t,n=T(this.getFlattenedFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(e(r))return r}}catch(i){n.e(i)}finally{n.f()}return null}}],[{key:"create",value:function(e,t){return new n(e,t)}}]),n}(Ky);function Wy(e){return"and"===e.op}function Qy(e){return"or"===e.op}function Yy(e){return $y(e)&&Wy(e)}function $y(e){var t,n=T(e.filters);try{for(n.s();!(t=n.n()).done;){if(t.value instanceof Hy)return!1}}catch(r){n.e(r)}finally{n.f()}return!0}function Xy(e){if(e instanceof Gy)return e.field.canonicalString()+e.op.toString()+xy(e.value);if(Yy(e))return e.filters.map((function(e){return Xy(e)})).join(",");var t=e.filters.map((function(e){return Xy(e)})).join(",");return"".concat(e.op,"(").concat(t,")")}function Jy(e,t){return e instanceof Gy?function(e,t){return t instanceof Gy&&e.op===t.op&&e.field.isEqual(t.field)&&gy(e.value,t.value)}(e,t):e instanceof Hy?function(e,t){return t instanceof Hy&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((function(e,n,r){return e&&Jy(n,t.filters[r])}),!0)}(e,t):void gv()}function Zy(e,t){var n=e.filters.concat(t);return Hy.create(n,e.op)}function eg(e){return e instanceof Gy?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(xy(e.value))}(e):e instanceof Hy?function(e){return e.op.toString()+" {"+e.getFilters().map(eg).join(" ,")+"}"}(e):"Filter"}var tg=function(e){k(n,e);var t=_(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this,e,r,i)).key=qv.fromName(i.referenceValue),a}return y(n,[{key:"matches",value:function(e){var t=qv.comparator(e.key,this.key);return this.matchesComparison(t)}}]),n}(Gy),ng=function(e){k(n,e);var t=_(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,"in",r)).keys=ig("in",r),i}return y(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Gy),rg=function(e){k(n,e);var t=_(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,"not-in",r)).keys=ig("not-in",r),i}return y(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Gy);function ig(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return qv.fromName(e.referenceValue)}))}var ag=function(e){k(n,e);var t=_(n);function n(e,r){return d(this,n),t.call(this,e,"array-contains",r)}return y(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return Sy(t)&&ky(t.arrayValue,this.value)}}]),n}(Gy),og=function(e){k(n,e);var t=_(n);function n(e,r){return d(this,n),t.call(this,e,"in",r)}return y(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&ky(this.value.arrayValue,t)}}]),n}(Gy),ug=function(e){k(n,e);var t=_(n);function n(e,r){return d(this,n),t.call(this,e,"not-in",r)}return y(n,[{key:"matches",value:function(e){if(ky(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!ky(this.value.arrayValue,t)}}]),n}(Gy),sg=function(e){k(n,e);var t=_(n);function n(e,r){return d(this,n),t.call(this,e,"array-contains-any",r)}return y(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!Sy(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return ky(t.value.arrayValue,e)}))}}]),n}(Gy),cg=y((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;d(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=u,this.he=null}));function lg(e){return new cg(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function fg(e){var t=wv(e);if(null===t.he){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return Xy(e)})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),mm(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return xy(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return xy(e)})).join(",")),t.he=n}return t.he}function hg(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!qy(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(!Jy(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!zy(e.startAt,t.startAt)&&zy(e.endAt,t.endAt)}function dg(e){return qv.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function pg(e,t){return e.filters.filter((function(e){return e instanceof Gy&&e.field.isEqual(t)}))}function vg(e,t,n){var r,i=my,a=!0,o=T(pg(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=my,c=!0;switch(u.op){case"<":case"<=":s=Ry(u.value);break;case"==":case"in":case">=":s=u.value;break;case">":s=u.value,c=!1;break;case"!=":case"not-in":s=my}Oy({value:i,inclusive:a},{value:s,inclusive:c})<0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];Oy({value:i,inclusive:a},{value:f,inclusive:n.inclusive})<0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}function mg(e,t,n){var r,i=vy,a=!0,o=T(pg(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=vy,c=!0;switch(u.op){case">=":case">":s=Dy(u.value),c=!1;break;case"==":case"in":case"<=":s=u.value;break;case"<":s=u.value,c=!1;break;case"!=":case"not-in":s=vy}Ly({value:i,inclusive:a},{value:s,inclusive:c})>0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];Ly({value:i,inclusive:a},{value:f,inclusive:n.inclusive})>0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}var yg=y((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;d(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=u,this.endAt=s,this.Pe=null,this.Ie=null,this.de=null,this.startAt,this.endAt}));function gg(e,t,n,r,i,a,o,u){return new yg(e,t,n,r,i,a,o,u)}function kg(e){return new yg(e)}function wg(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function bg(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function xg(e){var t,n=T(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value.getFirstInequalityField();if(null!==r)return r}}catch(i){n.e(i)}finally{n.f()}return null}function _g(e){return null!==e.collectionGroup}function Ig(e){var t=wv(e);if(null===t.Pe){t.Pe=[];var n=xg(t),r=bg(t);if(null!==n&&null===r)n.isKeyField()||t.Pe.push(new By(n)),t.Pe.push(new By(Bv.keyField(),"asc"));else{var i,a=!1,o=T(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var u=i.value;t.Pe.push(u),u.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.Pe.push(new By(Bv.keyField(),s))}}}return t.Pe}function Eg(e){var t=wv(e);return t.Ie||(t.Ie=Sg(t,Ig(e))),t.Ie}function Sg(e,t){if("F"===e.limitType)return lg(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);t=t.map((function(e){var t="desc"===e.dir?"asc":"desc";return new By(e.field,t)}));var n=e.endAt?new Vy(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Vy(e.startAt.position,e.startAt.inclusive):null;return lg(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}function Tg(e,t){t.getFirstInequalityField(),xg(e);var n=e.filters.concat([t]);return new yg(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Cg(e,t,n){return new yg(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Ng(e,t){return hg(Eg(e),Eg(t))&&e.limitType===t.limitType}function Ag(e){return"".concat(fg(Eg(e)),"|lt:").concat(e.limitType)}function Pg(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return eg(e)})).join(", "),"]")),mm(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return xy(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return xy(e)})).join(",")),"Target(".concat(t,")")}(Eg(e)),"; limitType=").concat(e.limitType,")")}function Rg(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):qv.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=T(Ig(e));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=T(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=jy(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Ig(e),t))&&!(e.endAt&&!function(e,t,n){var r=jy(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Ig(e),t))}(e,t)}function Dg(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Og(e){return function(t,n){var r,i=!1,a=T(Ig(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,u=Lg(o,t,n);if(0!==u)return u;i=i||o.field.isKeyField()}}catch(s){a.e(s)}finally{a.f()}return 0}}function Lg(e,t,n){var r=e.field.isKeyField()?qv.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?wy(r,i):gv()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return gv()}}var Mg=function(){function e(t,n){d(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return y(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=T(n);try{for(i.s();!(r=i.n()).done;){var a=l(r.value,2),o=a[0],u=a[1];if(this.equalsFn(o,e))return u}}catch(s){i.e(s)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){Ym(this.inner,(function(t,n){var r,i=T(n);try{for(i.s();!(r=i.n()).done;){var a=l(r.value,2),o=a[0],u=a[1];e(o,u)}}catch(s){i.e(s)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return $m(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),Fg=new Xm(qv.comparator);function Ug(){return Fg}var Vg=new Xm(qv.comparator);function jg(){for(var e=Vg,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function zg(e){var t=Vg;return e.forEach((function(e,n){return t=t.insert(e,n.overlayedDocument)})),t}function Bg(){return Kg()}function qg(){return Kg()}function Kg(){return new Mg((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var Gg=new Xm(qv.comparator),Hg=new ey(qv.comparator);function Wg(){for(var e=Hg,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var Qg=new ey(Ov);function Yg(){return Qg}function $g(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ym(t)?"-0":t}}function Xg(e){return{integerValue:""+e}}function Jg(e,t){return gm(t)?Xg(t):$g(e,t)}var Zg=y((function e(){d(this,e),this._=void 0}));function ek(e,t,n){return e instanceof rk?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&ly(t)&&(t=fy(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof ik?ak(e,t):e instanceof ok?uk(e,t):function(e,t){var n=nk(e,t),r=ck(n)+ck(e.Te);return Ey(n)&&Ey(e.Te)?Xg(r):$g(e.serializer,r)}(e,t)}function tk(e,t,n){return e instanceof ik?ak(e,t):e instanceof ok?uk(e,t):n}function nk(e,t){return e instanceof sk?function(e){return Ey(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}var rk=function(e){k(n,e);var t=_(n);function n(){return d(this,n),t.apply(this,arguments)}return y(n)}(Zg),ik=function(e){k(n,e);var t=_(n);function n(e){var r;return d(this,n),(r=t.call(this)).elements=e,r}return y(n)}(Zg);function ak(e,t){var n,r=lk(t),i=T(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return gy(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var ok=function(e){k(n,e);var t=_(n);function n(e){var r;return d(this,n),(r=t.call(this)).elements=e,r}return y(n)}(Zg);function uk(e,t){var n,r=lk(t),i=T(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!gy(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var sk=function(e){k(n,e);var t=_(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).serializer=e,i.Te=r,i}return y(n)}(Zg);function ck(e){return sy(e.integerValue||e.doubleValue)}function lk(e){return Sy(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var fk=y((function e(t,n){d(this,e),this.field=t,this.transform=n}));var hk=y((function e(t,n){d(this,e),this.version=t,this.transformResults=n})),dk=function(){function e(t,n){d(this,e),this.updateTime=t,this.exists=n}return y(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function pk(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var vk=y((function e(){d(this,e)}));function mk(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Ck(e.key,dk.none()):new bk(e.key,e.data,dk.none());var n,r=e.data,i=My.empty(),a=new ey(Bv.comparator),o=T(t.fields);try{for(o.s();!(n=o.n()).done;){var u=n.value;if(!a.has(u)){var s=r.field(u);null===s&&u.length>1&&(u=u.popLast(),s=r.field(u)),null===s?i.delete(u):i.set(u,s),a=a.add(u)}}}catch(c){o.e(c)}finally{o.f()}return new xk(e.key,i,new ry(a.toArray()),dk.none())}function yk(e,t,n){e instanceof bk?function(e,t,n){var r=e.value.clone(),i=Ik(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof xk?function(e,t,n){if(pk(e.precondition,t)){var r=Ik(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(_k(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function gk(e,t,n,r){return e instanceof bk?function(e,t,n,r){if(!pk(e.precondition,t))return n;var i=e.value.clone(),a=Ek(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof xk?function(e,t,n,r){if(!pk(e.precondition,t))return n;var i=Ek(e.fieldTransforms,r,t),a=t.data;return a.setAll(_k(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((function(e){return e.field})))}(e,t,n,r):function(e,t,n){return pk(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function kk(e,t){var n,r=null,i=T(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),u=nk(a.transform,o||null);null!=u&&(null===r&&(r=My.empty()),r.set(a.field,u))}}catch(s){i.e(s)}finally{i.f()}return r||null}function wk(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Lv(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof ik&&t instanceof ik||e instanceof ok&&t instanceof ok?Lv(e.elements,t.elements,gy):e instanceof sk&&t instanceof sk?gy(e.Te,t.Te):e instanceof rk&&t instanceof rk}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var bk=function(e){k(n,e);var t=_(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return d(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return y(n,[{key:"getFieldMask",value:function(){return null}}]),n}(vk),xk=function(e){k(n,e);var t=_(n);function n(e,r,i,a){var o,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return d(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=u,o.type=1,o}return y(n,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),n}(vk);function _k(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function Ik(e,t,n){var r=new Map;kv(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,u=t.data.field(a.field);r.set(a.field,tk(o,u,n[i]))}return r}function Ek(e,t,n){var r,i=new Map,a=T(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o.transform,s=n.data.field(o.field);i.set(o.field,ek(u,s,t))}}catch(c){a.e(c)}finally{a.f()}return i}var Sk,Tk,Ck=function(e){k(n,e);var t=_(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return y(n,[{key:"getFieldMask",value:function(){return null}}]),n}(vk),Nk=function(e){k(n,e);var t=_(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return y(n,[{key:"getFieldMask",value:function(){return null}}]),n}(vk),Ak=function(){function e(t,n,r,i){d(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return y(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&yk(i,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n,r=T(this.baseMutations);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.key.isEqual(e.key)&&(t=gk(i,e,t,this.localWriteTime))}}catch(s){r.e(s)}finally{r.f()}var a,o=T(this.mutations);try{for(o.s();!(a=o.n()).done;){var u=a.value;u.key.isEqual(e.key)&&(t=gk(u,e,t,this.localWriteTime))}}catch(s){o.e(s)}finally{o.f()}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=qg();return this.mutations.forEach((function(i){var a=e.get(i.key),o=a.overlayedDocument,u=n.applyToLocalView(o,a.mutatedFields),s=mk(o,u=t.has(i.key)?null:u);null!==s&&r.set(i.key,s),o.isValidDocument()||o.convertToNoDocument(Uv.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),Wg())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&Lv(this.mutations,e.mutations,(function(e,t){return wk(e,t)}))&&Lv(this.baseMutations,e.baseMutations,(function(e,t){return wk(e,t)}))}}]),e}(),Pk=function(){function e(t,n,r,i){d(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return y(e,null,[{key:"from",value:function(t,n,r){kv(t.mutations.length===r.length);for(var i=Gg,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),Rk=function(){function e(t,n){d(this,e),this.largestBatchId=t,this.mutation=n}return y(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),Dk=y((function e(t,n){d(this,e),this.count=t,this.unchangedNames=n}));function Ok(e){switch(e){default:return gv();case bv.CANCELLED:case bv.UNKNOWN:case bv.DEADLINE_EXCEEDED:case bv.RESOURCE_EXHAUSTED:case bv.INTERNAL:case bv.UNAVAILABLE:case bv.UNAUTHENTICATED:return!1;case bv.INVALID_ARGUMENT:case bv.NOT_FOUND:case bv.ALREADY_EXISTS:case bv.PERMISSION_DENIED:case bv.FAILED_PRECONDITION:case bv.ABORTED:case bv.OUT_OF_RANGE:case bv.UNIMPLEMENTED:case bv.DATA_LOSS:return!0}}function Lk(e){if(void 0===e)return vv("GRPC error has no .code"),bv.UNKNOWN;switch(e){case Sk.OK:return bv.OK;case Sk.CANCELLED:return bv.CANCELLED;case Sk.UNKNOWN:return bv.UNKNOWN;case Sk.DEADLINE_EXCEEDED:return bv.DEADLINE_EXCEEDED;case Sk.RESOURCE_EXHAUSTED:return bv.RESOURCE_EXHAUSTED;case Sk.INTERNAL:return bv.INTERNAL;case Sk.UNAVAILABLE:return bv.UNAVAILABLE;case Sk.UNAUTHENTICATED:return bv.UNAUTHENTICATED;case Sk.INVALID_ARGUMENT:return bv.INVALID_ARGUMENT;case Sk.NOT_FOUND:return bv.NOT_FOUND;case Sk.ALREADY_EXISTS:return bv.ALREADY_EXISTS;case Sk.PERMISSION_DENIED:return bv.PERMISSION_DENIED;case Sk.FAILED_PRECONDITION:return bv.FAILED_PRECONDITION;case Sk.ABORTED:return bv.ABORTED;case Sk.OUT_OF_RANGE:return bv.OUT_OF_RANGE;case Sk.UNIMPLEMENTED:return bv.UNIMPLEMENTED;case Sk.DATA_LOSS:return bv.DATA_LOSS;default:return gv()}}(Tk=Sk||(Sk={}))[Tk.OK=0]="OK",Tk[Tk.CANCELLED=1]="CANCELLED",Tk[Tk.UNKNOWN=2]="UNKNOWN",Tk[Tk.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Tk[Tk.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Tk[Tk.NOT_FOUND=5]="NOT_FOUND",Tk[Tk.ALREADY_EXISTS=6]="ALREADY_EXISTS",Tk[Tk.PERMISSION_DENIED=7]="PERMISSION_DENIED",Tk[Tk.UNAUTHENTICATED=16]="UNAUTHENTICATED",Tk[Tk.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Tk[Tk.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Tk[Tk.ABORTED=10]="ABORTED",Tk[Tk.OUT_OF_RANGE=11]="OUT_OF_RANGE",Tk[Tk.UNIMPLEMENTED=12]="UNIMPLEMENTED",Tk[Tk.INTERNAL=13]="INTERNAL",Tk[Tk.UNAVAILABLE=14]="UNAVAILABLE",Tk[Tk.DATA_LOSS=15]="DATA_LOSS";var Mk=null;function Fk(){return new TextEncoder}var Uk=new sv([4294967295,4294967295],0);function Vk(e){var t=Fk().encode(e),n=new uv;return n.update(t),new Uint8Array(n.digest())}function jk(e){var t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),a=t.getUint32(12,!0);return[new sv([n,r],0),new sv([i,a],0)]}var zk=function(){function e(t,n,r){if(d(this,e),this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Bk("Invalid padding: ".concat(n));if(r<0)throw new Bk("Invalid hash count: ".concat(r));if(t.length>0&&0===this.hashCount)throw new Bk("Invalid hash count: ".concat(r));if(0===t.length&&0!==n)throw new Bk("Invalid padding when bitmap length is 0: ".concat(n));this.Ae=8*t.length-n,this.Re=sv.fromNumber(this.Ae)}return y(e,[{key:"Ve",value:function(e,t,n){var r=e.add(t.multiply(sv.fromNumber(n)));return 1===r.compare(Uk)&&(r=new sv([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Re).toNumber()}},{key:"me",value:function(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}},{key:"mightContain",value:function(e){if(0===this.Ae)return!1;for(var t=l(jk(Vk(e)),2),n=t[0],r=t[1],i=0;i<this.hashCount;i++){var a=this.Ve(n,r,i);if(!this.me(a))return!1}return!0}},{key:"insert",value:function(e){if(0!==this.Ae)for(var t=l(jk(Vk(e)),2),n=t[0],r=t[1],i=0;i<this.hashCount;i++){var a=this.Ve(n,r,i);this.fe(a)}}},{key:"fe",value:function(e){var t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}],[{key:"create",value:function(t,n,r){var i=t%8==0?0:8-t%8,a=new e(new Uint8Array(Math.ceil(t/8)),i,n);return r.forEach((function(e){return a.insert(e)})),a}}]),e}(),Bk=function(e){k(n,e);var t=_(n);function n(){var e;return d(this,n),(e=t.apply(this,arguments)).name="BloomFilterError",e}return y(n)}(E(Error)),qk=function(){function e(t,n,r,i,a){d(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return y(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n,r){var i=new Map;return i.set(t,Kk.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new e(Uv.min(),i,new Xm(Ov),Ug(),Wg())}}]),e}(),Kk=function(){function e(t,n,r,i,a){d(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return y(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n,r){return new e(r,n,Wg(),Wg(),Wg())}}]),e}(),Gk=y((function e(t,n,r,i){d(this,e),this.ge=t,this.removedTargetIds=n,this.key=r,this.pe=i})),Hk=y((function e(t,n){d(this,e),this.targetId=t,this.ye=n})),Wk=y((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ay.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;d(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),Qk=function(){function e(){d(this,e),this.we=0,this.Se=Xk(),this.be=ay.EMPTY_BYTE_STRING,this.De=!1,this.Ce=!0}return y(e,[{key:"current",get:function(){return this.De}},{key:"resumeToken",get:function(){return this.be}},{key:"ve",get:function(){return 0!==this.we}},{key:"Fe",get:function(){return this.Ce}},{key:"Me",value:function(e){e.approximateByteSize()>0&&(this.Ce=!0,this.be=e)}},{key:"xe",value:function(){var e=Wg(),t=Wg(),n=Wg();return this.Se.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:gv()}})),new Kk(this.be,this.De,e,t,n)}},{key:"Oe",value:function(){this.Ce=!1,this.Se=Xk()}},{key:"Ne",value:function(e,t){this.Ce=!0,this.Se=this.Se.insert(e,t)}},{key:"Be",value:function(e){this.Ce=!0,this.Se=this.Se.remove(e)}},{key:"Le",value:function(){this.we+=1}},{key:"ke",value:function(){this.we-=1}},{key:"qe",value:function(){this.Ce=!0,this.De=!0}}]),e}(),Yk=function(){function e(t){d(this,e),this.Qe=t,this.Ke=new Map,this.$e=Ug(),this.Ue=$k(),this.We=new Xm(Ov)}return y(e,[{key:"Ge",value:function(e){var t,n=T(e.ge);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.pe&&e.pe.isFoundDocument()?this.ze(r,e.pe):this.je(r,e.key,e.pe)}}catch(u){n.e(u)}finally{n.f()}var i,a=T(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.je(o,e.key,e.pe)}}catch(u){a.e(u)}finally{a.f()}}},{key:"He",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.Je(n);switch(e.state){case 0:t.Ye(n)&&r.Me(e.resumeToken);break;case 1:r.ke(),r.ve||r.Oe(),r.Me(e.resumeToken);break;case 2:r.ke(),r.ve||t.removeTarget(n);break;case 3:t.Ye(n)&&(r.qe(),r.Me(e.resumeToken));break;case 4:t.Ye(n)&&(t.Ze(n),r.Me(e.resumeToken));break;default:gv()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.Ke.forEach((function(e,r){n.Ye(r)&&t(r)}))}},{key:"Xe",value:function(e){var t=e.targetId,n=e.ye.count,r=this.et(t);if(r){var i=r.target;if(dg(i))if(0===n){var a=new qv(i.path);this.je(t,a,Uy.newNoDocument(a,Uv.min()))}else kv(1===n);else{var o=this.tt(t);if(o!==n){var u=this.nt(e),s=u?this.rt(u,e,o):1;if(0!==s){this.Ze(t);var c=2===s?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.We=this.We.insert(t,c)}null==Mk||Mk.it(function(e,t,n,r,i){var a,o,u,s,c,l,f={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},h=t.unchangedNames;return h&&(f.bloomFilter={applied:0===i,hashCount:null!==(a=null==h?void 0:h.hashCount)&&void 0!==a?a:0,bitmapLength:null!==(s=null===(u=null===(o=null==h?void 0:h.bits)||void 0===o?void 0:o.bitmap)||void 0===u?void 0:u.length)&&void 0!==s?s:0,padding:null!==(l=null===(c=null==h?void 0:h.bits)||void 0===c?void 0:c.padding)&&void 0!==l?l:0,mightContain:function(e){var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),f}(o,e.ye,this.Qe.st(),u,s))}}}}},{key:"nt",value:function(e){var t=e.ye.unchangedNames;if(!t||!t.bits)return null;var n,r,i=t.bits,a=i.bitmap,o=void 0===a?"":a,u=i.padding,s=void 0===u?0:u,c=t.hashCount,l=void 0===c?0:c;try{n=cy(o).toUint8Array()}catch(e){if(e instanceof iy)return mv("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{r=new zk(n,s,l)}catch(e){return mv(e instanceof Bk?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===r.Ae?null:r}},{key:"rt",value:function(e,t,n){return t.ye.count===n-this.ot(e,t.targetId)?0:2}},{key:"ot",value:function(e,t){var n=this,r=this.Qe.getRemoteKeysForTarget(t),i=0;return r.forEach((function(r){var a=n.Qe.st(),o="projects/".concat(a.projectId,"/databases/").concat(a.database,"/documents/").concat(r.path.canonicalString());e.mightContain(o)||(n.je(t,r,null),i++)})),i}},{key:"_t",value:function(e){var t=this,n=new Map;this.Ke.forEach((function(r,i){var a=t.et(i);if(a){if(r.current&&dg(a.target)){var o=new qv(a.target.path);null!==t.$e.get(o)||t.ut(i,o)||t.je(i,o,Uy.newNoDocument(o,e))}r.Fe&&(n.set(i,r.xe()),r.Oe())}}));var r=Wg();this.Ue.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.et(e);return!n||"TargetPurposeLimboResolution"===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.$e.forEach((function(t,n){return n.setReadTime(e)}));var i=new qk(e,n,this.We,this.$e,r);return this.$e=Ug(),this.Ue=$k(),this.We=new Xm(Ov),i}},{key:"ze",value:function(e,t){if(this.Ye(e)){var n=this.ut(e,t.key)?2:0;this.Je(e).Ne(t.key,n),this.$e=this.$e.insert(t.key,t),this.Ue=this.Ue.insert(t.key,this.ct(t.key).add(e))}}},{key:"je",value:function(e,t,n){if(this.Ye(e)){var r=this.Je(e);this.ut(e,t)?r.Ne(t,1):r.Be(t),this.Ue=this.Ue.insert(t,this.ct(t).delete(e)),n&&(this.$e=this.$e.insert(t,n))}}},{key:"removeTarget",value:function(e){this.Ke.delete(e)}},{key:"tt",value:function(e){var t=this.Je(e).xe();return this.Qe.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Le",value:function(e){this.Je(e).Le()}},{key:"Je",value:function(e){var t=this.Ke.get(e);return t||(t=new Qk,this.Ke.set(e,t)),t}},{key:"ct",value:function(e){var t=this.Ue.get(e);return t||(t=new ey(Ov),this.Ue=this.Ue.insert(e,t)),t}},{key:"Ye",value:function(e){var t=null!==this.et(e);return t||pv("WatchChangeAggregator","Detected inactive target",e),t}},{key:"et",value:function(e){var t=this.Ke.get(e);return t&&t.ve?null:this.Qe.lt(e)}},{key:"Ze",value:function(e){var t=this;this.Ke.set(e,new Qk),this.Qe.getRemoteKeysForTarget(e).forEach((function(n){t.je(e,n,null)}))}},{key:"ut",value:function(e,t){return this.Qe.getRemoteKeysForTarget(e).has(t)}}]),e}();function $k(){return new Xm(qv.comparator)}function Xk(){return new Xm(qv.comparator)}var Jk={asc:"ASCENDING",desc:"DESCENDING"},Zk={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ew={and:"AND",or:"OR"},tw=y((function e(t,n){d(this,e),this.databaseId=t,this.useProto3Json=n}));function nw(e,t){return e.useProto3Json||mm(t)?t:{value:t}}function rw(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function iw(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function aw(e,t){return rw(e,t.toTimestamp())}function ow(e){return kv(!!e),Uv.fromTimestamp(function(e){var t=uy(e);return new Fv(t.seconds,t.nanos)}(e))}function uw(e,t){return function(e){return new jv(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function sw(e){var t=jv.fromString(e);return kv(Pw(t)),t}function cw(e,t){return uw(e.databaseId,t.path)}function lw(e,t){var n=sw(t);if(n.get(1)!==e.databaseId.projectId)throw new xv(bv.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new xv(bv.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new qv(pw(n))}function fw(e,t){return uw(e.databaseId,t)}function hw(e){var t=sw(e);return 4===t.length?jv.emptyPath():pw(t)}function dw(e){return new jv(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function pw(e){return kv(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function vw(e,t,n){return{name:cw(e,t),fields:n.value.mapValue.fields}}function mw(e,t,n){var r=lw(e,t.name),i=ow(t.updateTime),a=t.createTime?ow(t.createTime):Uv.min(),o=new My({mapValue:{fields:t.fields}}),u=Uy.newFoundDocument(r,i,a,o);return n&&u.setHasCommittedMutations(),n?u.setHasCommittedMutations():u}function yw(e,t){return"found"in t?function(e,t){kv(!!t.found),t.found.name,t.found.updateTime;var n=lw(e,t.found.name),r=ow(t.found.updateTime),i=t.found.createTime?ow(t.found.createTime):Uv.min(),a=new My({mapValue:{fields:t.found.fields}});return Uy.newFoundDocument(n,r,i,a)}(e,t):"missing"in t?function(e,t){kv(!!t.missing),kv(!!t.readTime);var n=lw(e,t.missing),r=ow(t.readTime);return Uy.newNoDocument(n,r)}(e,t):gv()}function gw(e,t){var n;if(t instanceof bk)n={update:vw(e,t.key,t.value)};else if(t instanceof Ck)n={delete:cw(e,t.key)};else if(t instanceof xk)n={update:vw(e,t.key,t.data),updateMask:Aw(t.fieldMask)};else{if(!(t instanceof Nk))return gv();n={verify:cw(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof rk)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof ik)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof ok)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof sk)return{fieldPath:t.field.canonicalString(),increment:n.Te};throw gv()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:aw(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:gv()}(e,t.precondition)),n}function kw(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?dk.updateTime(ow(e.updateTime)):void 0!==e.exists?dk.exists(e.exists):dk.none()}(t.currentDocument):dk.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)kv("REQUEST_TIME"===t.setToServerValue),n=new rk;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new ik(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new ok(i)}else"increment"in t?n=new sk(e,t.increment):gv();var a=Bv.fromServerFormat(t.fieldPath);return new fk(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=lw(e,t.update.name),a=new My({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new ry(t.map((function(e){return Bv.fromServerFormat(e)})))}(t.updateMask);return new xk(i,a,o,n,r)}return new bk(i,a,n,r)}if(t.delete){var u=lw(e,t.delete);return new Ck(u,n)}if(t.verify){var s=lw(e,t.verify);return new Nk(s,n)}return gv()}function ww(e,t){return{documents:[fw(e,t.path)]}}function bw(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=fw(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=fw(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length)return Nw(Hy.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:Tw(e.field),direction:Iw(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o=nw(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function xw(e){var t=hw(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){kv(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=function(e){var t=_w(e);return t instanceof Hy&&Yy(t)?t.getFilters():[t]}(n.where));var u=[];n.orderBy&&(u=function(e){return e.map((function(e){return function(e){return new By(Cw(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)}))}(n.orderBy));var s=null;n.limit&&(s=function(e){var t;return mm(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new Vy(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new Vy(n,t)}(n.endAt)),gg(t,i,u,o,s,"F",c,l)}function _w(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":var t=Cw(e.unaryFilter.field);return Gy.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=Cw(e.unaryFilter.field);return Gy.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Cw(e.unaryFilter.field);return Gy.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Cw(e.unaryFilter.field);return Gy.create(i,"!=",{nullValue:"NULL_VALUE"});default:return gv()}}(e):void 0!==e.fieldFilter?function(e){return Gy.create(Cw(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return gv()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Hy.create(e.compositeFilter.filters.map((function(e){return _w(e)})),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return gv()}}(e.compositeFilter.op))}(e):gv()}function Iw(e){return Jk[e]}function Ew(e){return Zk[e]}function Sw(e){return ew[e]}function Tw(e){return{fieldPath:e.canonicalString()}}function Cw(e){return Bv.fromServerFormat(e.fieldPath)}function Nw(e){return e instanceof Gy?function(e){if("=="===e.op){if(Cy(e.value))return{unaryFilter:{field:Tw(e.field),op:"IS_NAN"}};if(Ty(e.value))return{unaryFilter:{field:Tw(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Cy(e.value))return{unaryFilter:{field:Tw(e.field),op:"IS_NOT_NAN"}};if(Ty(e.value))return{unaryFilter:{field:Tw(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Tw(e.field),op:Ew(e.op),value:e.value}}}(e):e instanceof Hy?function(e){var t=e.getFilters().map((function(e){return Nw(e)}));return 1===t.length?t[0]:{compositeFilter:{op:Sw(e.op),filters:t}}}(e):gv()}function Aw(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function Pw(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}var Rw=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Uv.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Uv.min(),u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:ay.EMPTY_BYTE_STRING,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;d(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u,this.expectedCount=s}return y(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}},{key:"withExpectedCount",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}]),e}(),Dw=y((function e(t){d(this,e),this.ht=t}));function Ow(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Lw(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:cw(e,t.key),fields:t.data.value.mapValue.fields,updateTime:rw(e,t.version.toTimestamp()),createTime:rw(e,t.createTime.toTimestamp())}}(e.ht,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Mw(t.version)};else{if(!t.isUnknownDocument())return gv();r.unknownDocument={path:n.path.toArray(),version:Mw(t.version)}}return r}function Lw(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function Mw(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Fw(e){var t=new Fv(e.seconds,e.nanoseconds);return Uv.fromTimestamp(t)}function Uw(e,t){for(var n=(t.baseMutations||[]).map((function(t){return kw(e.ht,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return kw(e.ht,t)})),u=Fv.fromMillis(t.localWriteTimeMs);return new Ak(t.batchId,u,n,o)}function Vw(e){var t,n=Fw(e.readTime),r=void 0!==e.lastLimboFreeSnapshotVersion?Fw(e.lastLimboFreeSnapshotVersion):Uv.min();return t=function(e){return void 0!==e.documents}(e.query)?function(e){return kv(1===e.documents.length),Eg(kg(hw(e.documents[0])))}(e.query):function(e){return Eg(xw(e))}(e.query),new Rw(t,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,n,r,ay.fromBase64String(e.resumeToken))}function jw(e,t){var n,r=Mw(t.snapshotVersion),i=Mw(t.lastLimboFreeSnapshotVersion);n=dg(t.target)?ww(e.ht,t.target):bw(e.ht,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:fg(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function zw(e){var t=xw({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Cg(t,t.limit,"L"):t}function Bw(e,t){return new Rk(t.largestBatchId,kw(e.ht,t.overlayMutation))}function qw(e,t){var n=t.path.lastSegment();return[e,km(t.path.popLast()),n]}function Kw(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:Mw(r.readTime),documentKey:km(r.documentKey.path),largestBatchId:r.largestBatchId}}var Gw=function(){function e(){d(this,e)}return y(e,[{key:"getBundleMetadata",value:function(e,t){return Hw(e).get(t).next((function(e){if(e)return function(e){return{id:e.bundleId,createTime:Fw(e.createTime),version:e.version}}(e)}))}},{key:"saveBundleMetadata",value:function(e,t){return Hw(e).put(function(e){return{bundleId:e.id,createTime:Mw(ow(e.createTime)),version:e.version}}(t))}},{key:"getNamedQuery",value:function(e,t){return Ww(e).get(t).next((function(e){if(e)return function(e){return{name:e.name,query:zw(e.bundledQuery),readTime:Fw(e.readTime)}}(e)}))}},{key:"saveNamedQuery",value:function(e,t){return Ww(e).put(function(e){return{name:e.name,readTime:Mw(ow(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function Hw(e){return Wm(e,"bundles")}function Ww(e){return Wm(e,"namedQueries")}var Qw=function(){function e(t,n){d(this,e),this.serializer=t,this.userId=n}return y(e,[{key:"getOverlay",value:function(e,t){var n=this;return Yw(e).get(qw(this.userId,t)).next((function(e){return e?Bw(n.serializer,e):null}))}},{key:"getOverlays",value:function(e,t){var n=this,r=Bg();return rm.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new Rk(t,a);i.push(r.It(e,o))})),rm.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(km(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(Yw(e).J("collectionPathOverlayIndex",i))})),rm.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=Bg(),a=km(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return Yw(e).G("collectionPathOverlayIndex",o).next((function(e){var t,n=T(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=Bw(r.serializer,a);i.set(o.getKey(),o)}}catch(u){n.e(u)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=Bg(),u=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Yw(e).Z({index:"collectionGroupOverlayIndex",range:u},(function(e,t,n){var u=Bw(a.serializer,t);o.size()<r||u.largestBatchId===i?(o.set(u.getKey(),u),i=u.largestBatchId):n.done()})).next((function(){return o}))}},{key:"It",value:function(e,t){return Yw(e).put(function(e,t,n){var r=l(qw(t,n.mutation.key),3);r[0];return{userId:t,collectionPath:r[1],documentId:r[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:gw(e.ht,n.mutation)}}(this.serializer,this.userId,t))}}],[{key:"Pt",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function Yw(e){return Wm(e,"documentOverlays")}var $w=function(){function e(){d(this,e)}return y(e,[{key:"dt",value:function(e,t){this.Tt(e,t),t.Et()}},{key:"Tt",value:function(e,t){if("nullValue"in e)this.At(t,5);else if("booleanValue"in e)this.At(t,10),t.Rt(e.booleanValue?1:0);else if("integerValue"in e)this.At(t,15),t.Rt(sy(e.integerValue));else if("doubleValue"in e){var n=sy(e.doubleValue);isNaN(n)?this.At(t,13):(this.At(t,15),ym(n)?t.Rt(0):t.Rt(n))}else if("timestampValue"in e){var r=e.timestampValue;this.At(t,20),"string"==typeof r?t.Vt(r):(t.Vt("".concat(r.seconds||"")),t.Rt(r.nanos||0))}else if("stringValue"in e)this.ft(e.stringValue,t),this.gt(t);else if("bytesValue"in e)this.At(t,30),t.yt(cy(e.bytesValue)),this.gt(t);else if("referenceValue"in e)this.wt(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.At(t,45),t.Rt(i.latitude||0),t.Rt(i.longitude||0)}else"mapValue"in e?Py(e)?this.At(t,Number.MAX_SAFE_INTEGER):(this.St(e.mapValue,t),this.gt(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.gt(t)):gv()}},{key:"ft",value:function(e,t){this.At(t,25),this.Dt(e,t)}},{key:"Dt",value:function(e,t){t.Vt(e)}},{key:"St",value:function(e,t){var n=e.fields||{};this.At(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.ft(a,t),this.Tt(n[a],t)}}},{key:"bt",value:function(e,t){var n=e.values||[];this.At(t,50);var r,i=T(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.Tt(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"wt",value:function(e,t){var n=this;this.At(t,37),qv.fromName(e).path.forEach((function(e){n.At(t,60),n.Dt(e,t)}))}},{key:"At",value:function(e,t){e.Rt(t)}},{key:"gt",value:function(e){e.Rt(2)}}]),e}();function Xw(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function Jw(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=Xw(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}$w.Ct=new $w;var Zw=function(){function e(){d(this,e),this.buffer=new Uint8Array(1024),this.position=0}return y(e,[{key:"vt",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Ft(n.value),n=t.next();this.Mt()}},{key:"xt",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Ot(n.value),n=t.next();this.Nt()}},{key:"Bt",value:function(e){var t,n=T(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Ft(i);else if(i<2048)this.Ft(960|i>>>6),this.Ft(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Ft(480|i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i);else{var a=r.codePointAt(0);this.Ft(240|a>>>18),this.Ft(128|63&a>>>12),this.Ft(128|63&a>>>6),this.Ft(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Mt()}},{key:"Lt",value:function(e){var t,n=T(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Ot(i);else if(i<2048)this.Ot(960|i>>>6),this.Ot(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Ot(480|i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i);else{var a=r.codePointAt(0);this.Ot(240|a>>>18),this.Ot(128|63&a>>>12),this.Ot(128|63&a>>>6),this.Ot(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Nt()}},{key:"kt",value:function(e){var t=this.qt(e),n=Jw(t);this.Qt(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"Kt",value:function(e){var t=this.qt(e),n=Jw(t);this.Qt(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"$t",value:function(){this.Ut(255),this.Ut(255)}},{key:"Wt",value:function(){this.Gt(255),this.Gt(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"zt",value:function(){return this.buffer.slice(0,this.position)}},{key:"qt",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"Ft",value:function(e){var t=255&e;0===t?(this.Ut(0),this.Ut(255)):255===t?(this.Ut(255),this.Ut(0)):this.Ut(t)}},{key:"Ot",value:function(e){var t=255&e;0===t?(this.Gt(0),this.Gt(255)):255===t?(this.Gt(255),this.Gt(0)):this.Gt(e)}},{key:"Mt",value:function(){this.Ut(0),this.Ut(1)}},{key:"Nt",value:function(){this.Gt(0),this.Gt(1)}},{key:"Ut",value:function(e){this.Qt(1),this.buffer[this.position++]=e}},{key:"Gt",value:function(e){this.Qt(1),this.buffer[this.position++]=~e}},{key:"Qt",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),eb=function(){function e(t){d(this,e),this.jt=t}return y(e,[{key:"yt",value:function(e){this.jt.vt(e)}},{key:"Vt",value:function(e){this.jt.Bt(e)}},{key:"Rt",value:function(e){this.jt.kt(e)}},{key:"Et",value:function(){this.jt.$t()}}]),e}(),tb=function(){function e(t){d(this,e),this.jt=t}return y(e,[{key:"yt",value:function(e){this.jt.xt(e)}},{key:"Vt",value:function(e){this.jt.Lt(e)}},{key:"Rt",value:function(e){this.jt.Kt(e)}},{key:"Et",value:function(){this.jt.Wt()}}]),e}(),nb=function(){function e(){d(this,e),this.jt=new Zw,this.Ht=new eb(this.jt),this.Jt=new tb(this.jt)}return y(e,[{key:"seed",value:function(e){this.jt.seed(e)}},{key:"Yt",value:function(e){return 0===e?this.Ht:this.Jt}},{key:"zt",value:function(){return this.jt.zt()}},{key:"reset",value:function(){this.jt.reset()}}]),e}(),rb=function(){function e(t,n,r,i){d(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return y(e,[{key:"Zt",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function ib(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=ab(e.arrayValue,t.arrayValue))?n:0!==(n=ab(e.directionalValue,t.directionalValue))?n:qv.comparator(e.documentKey,t.documentKey)}function ab(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var ob=function(){function e(t){d(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Xt=t.orderBy,this.en=[];var n,r=T(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.isInequality()?this.tn=i:this.en.push(i)}}catch(a){r.e(a)}finally{r.f()}}return y(e,[{key:"nn",value:function(e){kv(e.collectionGroup===this.collectionId);var t=Gv(e);if(void 0!==t&&!this.rn(t))return!1;for(var n=Hv(e),r=new Set,i=0,a=0;i<n.length&&this.rn(n[i]);++i)r=r.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(void 0!==this.tn){if(!r.has(this.tn.field.canonicalString())){var o=n[i];if(!this.sn(this.tn,o)||!this.on(this.Xt[a++],o))return!1}++i}for(;i<n.length;++i){var u=n[i];if(a>=this.Xt.length||!this.on(this.Xt[a++],u))return!1}return!0}},{key:"_n",value:function(){var e,t=new ey(Bv.comparator),n=[],r=T(this.en);try{for(r.s();!(e=r.n()).done;){var i=e.value;if(!i.field.isKeyField())if("array-contains"===i.op||"array-contains-any"===i.op)n.push(new Wv(i.field,2));else{if(t.has(i.field))continue;t=t.add(i.field),n.push(new Wv(i.field,0))}}}catch(s){r.e(s)}finally{r.f()}var a,o=T(this.Xt);try{for(o.s();!(a=o.n()).done;){var u=a.value;u.field.isKeyField()||t.has(u.field)||(t=t.add(u.field),n.push(new Wv(u.field,"asc"===u.dir?0:1)))}}catch(s){o.e(s)}finally{o.f()}return new Kv(Kv.UNKNOWN_ID,this.collectionId,n,Qv.empty())}},{key:"rn",value:function(e){var t,n=T(this.en);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.sn(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"sn",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"on",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}();function ub(e){var t,n;if(kv(e instanceof Gy||e instanceof Hy),e instanceof Gy){if(e instanceof og){var r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((function(t){return Gy.create(e.field,"==",t)})))||[];return Hy.create(r,"or")}return e}var i=e.filters.map((function(e){return ub(e)}));return Hy.create(i,e.op)}function sb(e){if(0===e.getFilters().length)return[];var t=hb(ub(e));return kv(fb(t)),cb(t)||lb(t)?[t]:t.getFilters()}function cb(e){return e instanceof Gy}function lb(e){return e instanceof Hy&&Yy(e)}function fb(e){return cb(e)||lb(e)||function(e){if(e instanceof Hy&&Qy(e)){var t,n=T(e.getFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(!cb(r)&&!lb(r))return!1}}catch(i){n.e(i)}finally{n.f()}return!0}return!1}(e)}function hb(e){if(kv(e instanceof Gy||e instanceof Hy),e instanceof Gy)return e;if(1===e.filters.length)return hb(e.filters[0]);var t=e.filters.map((function(e){return hb(e)})),n=Hy.create(t,e.op);return fb(n=vb(n))?n:(kv(n instanceof Hy),kv(Wy(n)),kv(n.filters.length>1),n.filters.reduce((function(e,t){return db(e,t)})))}function db(e,t){var n;return kv(e instanceof Gy||e instanceof Hy),kv(t instanceof Gy||t instanceof Hy),n=e instanceof Gy?t instanceof Gy?function(e,t){return Hy.create([e,t],"and")}(e,t):pb(e,t):t instanceof Gy?pb(t,e):function(e,t){if(kv(e.filters.length>0&&t.filters.length>0),Wy(e)&&Wy(t))return Zy(e,t.getFilters());var n=Qy(e)?e:t,r=Qy(e)?t:e,i=n.filters.map((function(e){return db(e,r)}));return Hy.create(i,"or")}(e,t),vb(n)}function pb(e,t){if(Wy(t))return Zy(t,e.getFilters());var n=t.filters.map((function(t){return db(e,t)}));return Hy.create(n,"or")}function vb(e){if(kv(e instanceof Gy||e instanceof Hy),e instanceof Gy)return e;var t=e.getFilters();if(1===t.length)return vb(t[0]);if($y(e))return e;var n=t.map((function(e){return vb(e)})),r=[];return n.forEach((function(t){t instanceof Gy?r.push(t):t instanceof Hy&&(t.op===e.op?r.push.apply(r,h(t.filters)):r.push(t))})),1===r.length?r[0]:Hy.create(r,e.op)}var mb=function(){function e(){d(this,e),this.an=new yb}return y(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.an.add(t),rm.resolve()}},{key:"getCollectionParents",value:function(e,t){return rm.resolve(this.an.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return rm.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return rm.resolve()}},{key:"deleteAllFieldIndexes",value:function(e){return rm.resolve()}},{key:"createTargetIndexes",value:function(e,t){return rm.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return rm.resolve(null)}},{key:"getIndexType",value:function(e,t){return rm.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return rm.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return rm.resolve(null)}},{key:"getMinOffset",value:function(e,t){return rm.resolve(Xv.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return rm.resolve(Xv.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return rm.resolve()}},{key:"updateIndexEntries",value:function(e,t){return rm.resolve()}}]),e}(),yb=function(){function e(){d(this,e),this.index={}}return y(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new ey(jv.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new ey(jv.comparator)).toArray()}}]),e}(),gb=new Uint8Array(0),kb=function(){function e(t,n){d(this,e),this.user=t,this.databaseId=n,this.un=new yb,this.cn=new Mg((function(e){return fg(e)}),(function(e,t){return hg(e,t)})),this.uid=t.uid||""}return y(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.un.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.un.add(t)}));var a={collectionId:r,parent:km(i)};return wb(e).put(a)}return rm.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[Mv(t),""],!1,!0);return wb(e).G(r).next((function(e){var r,i=T(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(xm(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=this,r=xb(e),i=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);delete i.indexId;var a=r.add(i);if(t.indexState){var o=_b(e);return a.next((function(e){o.put(Kw(e,n.user,t.indexState.sequenceNumber,t.indexState.offset))}))}return a.next()}},{key:"deleteFieldIndex",value:function(e,t){var n=xb(e),r=_b(e),i=bb(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"deleteAllFieldIndexes",value:function(e){var t=xb(e),n=bb(e),r=_b(e);return t.J().next((function(){return n.J()})).next((function(){return r.J()}))}},{key:"createTargetIndexes",value:function(e,t){var n=this;return rm.forEach(this.ln(t),(function(t){return n.getIndexType(e,t).next((function(r){if(0===r||1===r){var i=new ob(t);return n.addFieldIndex(e,i._n())}}))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=bb(e),i=!0,a=new Map;return rm.forEach(this.ln(t),(function(t){return n.hn(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=Wg(),o=[];return rm.forEach(a,(function(i,a){pv("IndexedDbIndexManager","Using index ".concat(function(e){return"id=".concat(e.indexId,"|cg=").concat(e.collectionGroup,"|f=").concat(e.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(","))}(i)," to execute ").concat(fg(t)));var u=function(e,t){var n=Gv(t);if(void 0===n)return null;var r,i=T(pg(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){i.e(o)}finally{i.f()}return null}(a,i),s=function(e,t){var n,r=new Map,i=T(Hv(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,u=T(pg(e,o.fieldPath));try{for(u.s();!(a=u.n()).done;){var s=a.value;switch(s.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),s.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),s.value),Array.from(r.values())}}}catch(c){u.e(c)}finally{u.f()}}}catch(c){i.e(c)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r=[],i=!0,a=T(Hv(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?vg(e,o.fieldPath,e.startAt):mg(e,o.fieldPath,e.startAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new Vy(r,i)}(a,i),l=function(e,t){var n,r=[],i=!0,a=T(Hv(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?mg(e,o.fieldPath,e.endAt):vg(e,o.fieldPath,e.endAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new Vy(r,i)}(a,i),f=n.Pn(i,a,c),h=n.Pn(i,a,l),d=n.In(i,a,s),p=n.dn(i.indexId,u,f,c.inclusive,h,l.inclusive,d);return rm.forEach(p,(function(n){return r.H(n,t.limit).next((function(t){t.forEach((function(t){var n=qv.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),o.push(n))}))}))}))})).next((function(){return o}))}return rm.resolve(null)}))}},{key:"ln",value:function(e){var t=this.cn.get(e);return t||(t=0===e.filters.length?[e]:sb(Hy.create(e.filters,"and")).map((function(t){return lg(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt)})),this.cn.set(e,t),t)}},{key:"dn",value:function(e,t,n,r,i,a,o){for(var u=this,s=(null!=t?t.length:1)*Math.max(n.length,i.length),c=s/(null!=t?t.length:1),l=[],f=function(){var s=t?u.Tn(t[d/c]):gb,f=u.En(e,s,n[d%c],r),p=u.An(e,s,i[d%c],a),v=o.map((function(t){return u.En(e,s,t,!0)}));l.push.apply(l,h(u.createRange(f,p,v)))},d=0;d<s;++d)f();return l}},{key:"En",value:function(e,t,n,r){var i=new rb(e,qv.empty(),t,n);return r?i:i.Zt()}},{key:"An",value:function(e,t,n,r){var i=new rb(e,qv.empty(),t,n);return r?i.Zt():i}},{key:"hn",value:function(e,t){var n=new ob(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t,r=null,i=T(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.nn(a)&&(!r||a.fields.length>r.fields.length)&&(r=a)}}catch(o){i.e(o)}finally{i.f()}return r}))}},{key:"getIndexType",value:function(e,t){var n=this,r=2,i=this.ln(t);return rm.forEach(i,(function(t){return n.hn(e,t).next((function(e){e?0!==r&&e.fields.length<function(e){var t,n=new ey(Bv.comparator),r=!1,i=T(e.filters);try{for(i.s();!(t=i.n()).done;){var a,o=T(t.value.getFlattenedFilters());try{for(o.s();!(a=o.n()).done;){var u=a.value;u.field.isKeyField()||("array-contains"===u.op||"array-contains-any"===u.op?r=!0:n=n.add(u.field))}}catch(f){o.e(f)}finally{o.f()}}}catch(f){i.e(f)}finally{i.f()}var s,c=T(e.orderBy);try{for(c.s();!(s=c.n()).done;){var l=s.value;l.field.isKeyField()||(n=n.add(l.field))}}catch(f){c.e(f)}finally{c.f()}return n.size+(r?1:0)}(t)&&(r=1):r=0}))})).next((function(){return function(e){return null!==e.limit}(t)&&i.length>1&&2===r?1:r}))}},{key:"Rn",value:function(e,t){var n,r=new nb,i=T(Hv(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var u=r.Yt(a.kind);$w.Ct.dt(o,u)}}catch(s){i.e(s)}finally{i.f()}return r.zt()}},{key:"Tn",value:function(e){var t=new nb;return $w.Ct.dt(e,t.Yt(0)),t.zt()}},{key:"Vn",value:function(e,t){var n=new nb;return $w.Ct.dt(Iy(this.databaseId,t),n.Yt(function(e){var t=Hv(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.zt()}},{key:"In",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new nb);var i,a=0,o=T(Hv(e));try{for(o.s();!(i=o.n()).done;){var u,s=i.value,c=n[a++],l=T(r);try{for(l.s();!(u=l.n()).done;){var f=u.value;if(this.mn(t,s.fieldPath)&&Sy(c))r=this.fn(r,s,c);else{var h=f.Yt(s.kind);$w.Ct.dt(c,h)}}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}return this.gn(r)}},{key:"Pn",value:function(e,t,n){return this.In(e,t,n.position)}},{key:"gn",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].zt();return t}},{key:"fn",value:function(e,t,n){var r,i=h(e),a=[],o=T(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var u,s=r.value,c=T(i);try{for(c.s();!(u=c.n()).done;){var l=u.value,f=new nb;f.seed(l.zt()),$w.Ct.dt(s,f.Yt(t.kind)),a.push(f)}}catch(d){c.e(d)}finally{c.f()}}}catch(d){o.e(d)}finally{o.f()}return a}},{key:"mn",value:function(e,t){return!!e.filters.find((function(e){return e instanceof Gy&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=xb(e),i=_b(e);return(t?r.G("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.G()).next((function(e){var t=[];return rm.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new Qv(t.sequenceNumber,new Xv(Fw(t.readTime),new qv(xm(t.documentKey)),t.largestBatchId)):Qv.empty(),r=e.fields.map((function(e){var t=l(e,2),n=t[0],r=t[1];return new Wv(Bv.fromServerFormat(n),r)}));return new Kv(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:Ov(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=xb(e),a=_b(e);return this.pn(e).next((function(e){return i.G("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return rm.forEach(t,(function(t){return a.put(Kw(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return rm.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?rm.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),rm.forEach(a,(function(r){return n.yn(e,t,r).next((function(t){var a=n.wn(i,r);return t.isEqual(a)?rm.resolve():n.Sn(e,i,r,t,a)}))}))}))}))}},{key:"bn",value:function(e,t,n,r){return bb(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.Vn(n,t.key),documentKey:t.key.path.toArray()})}},{key:"Dn",value:function(e,t,n,r){return bb(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.Vn(n,t.key),t.key.path.toArray()])}},{key:"yn",value:function(e,t,n){var r=bb(e),i=new ey(ib);return r.Z({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.Vn(n,t)])},(function(e,r){i=i.add(new rb(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"wn",value:function(e,t){var n=new ey(ib),r=this.Rn(t,e);if(null==r)return n;var i=Gv(t);if(null!=i){var a=e.data.field(i.fieldPath);if(Sy(a)){var o,u=T(a.arrayValue.values||[]);try{for(u.s();!(o=u.n()).done;){var s=o.value;n=n.add(new rb(t.indexId,e.key,this.Tn(s),r))}}catch(c){u.e(c)}finally{u.f()}}}else n=n.add(new rb(t.indexId,e.key,gb,r));return n}},{key:"Sn",value:function(e,t,n,r,i){var a=this;pv("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var o=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),u=ny(a),s=ny(o);u||s;){var c=!1,l=!1;if(u&&s){var f=n(u,s);f<0?l=!0:f>0&&(c=!0)}else null!=u?l=!0:c=!0;c?(r(s),s=ny(o)):l?(i(u),u=ny(a)):(u=ny(a),s=ny(o))}}(r,i,ib,(function(r){o.push(a.bn(e,t,n,r))}),(function(r){o.push(a.Dn(e,t,n,r))})),rm.waitFor(o)}},{key:"pn",value:function(e){var t=1;return _b(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return ib(e,t)})).filter((function(e,t,n){return!t||0!==ib(e,n[t-1])}));var r=[];r.push(e);var i,a=T(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,u=ib(o,e),s=ib(o,t);if(0===u)r[0]=e.Zt();else if(u>0&&s<0)r.push(o),r.push(o.Zt());else if(s>0)break}}catch(d){a.e(d)}finally{a.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2){if(this.Cn(r[l],r[l+1]))return[];var f=[r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,gb,[]],h=[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,gb,[]];c.push(IDBKeyRange.bound(f,h))}return c}},{key:"Cn",value:function(e,t){return ib(e,t)>0}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return this.getFieldIndexes(e,t).next(Ib)}},{key:"getMinOffset",value:function(e,t){var n=this;return rm.mapArray(this.ln(t),(function(t){return n.hn(e,t).next((function(e){return e||gv()}))})).next(Ib)}}]),e}();function wb(e){return Wm(e,"collectionParents")}function bb(e){return Wm(e,"indexEntries")}function xb(e){return Wm(e,"indexConfiguration")}function _b(e){return Wm(e,"indexState")}function Ib(e){kv(0!==e.length);for(var t=e[0].indexState.offset,n=t.largestBatchId,r=1;r<e.length;r++){var i=e[r].indexState.offset;Jv(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Xv(t.readTime,t.documentKey,n)}var Eb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Sb=function(){function e(t,n,r){d(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return y(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function Tb(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),u=0,s=r.Z({range:o},(function(e,t,n){return u++,n.delete()}));a.push(s.next((function(){kv(1===u)})));var c,l=[],f=T(n.mutations);try{for(f.s();!(c=f.n()).done;){var h=c.value,d=Em(t,h.key.path,n.batchId);a.push(i.delete(d)),l.push(h.key)}}catch(p){f.e(p)}finally{f.f()}return rm.waitFor(a).next((function(){return l}))}function Cb(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw gv();t=e.noDocument}return JSON.stringify(t).length}Sb.DEFAULT_COLLECTION_PERCENTILE=10,Sb.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Sb.DEFAULT=new Sb(41943040,Sb.DEFAULT_COLLECTION_PERCENTILE,Sb.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Sb.DISABLED=new Sb(-1,0,0);var Nb=function(){function e(t,n,r,i){d(this,e),this.userId=t,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.vn={}}return y(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Pb(e).Z({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=Rb(e),o=Pb(e);return o.add({}).next((function(u){kv("number"==typeof u);var s,c=new Ak(u,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return gw(e.ht,t)})),i=n.mutations.map((function(t){return gw(e.ht,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.serializer,i.userId,c),f=[],h=new ey((function(e,t){return Ov(e.canonicalString(),t.canonicalString())})),d=T(r);try{for(d.s();!(s=d.n()).done;){var p=s.value,v=Em(i.userId,p.key.path,u);h=h.add(p.key.path.popLast()),f.push(o.put(l)),f.push(a.put(v,Sm))}}catch(m){d.e(m)}finally{d.f()}return h.forEach((function(t){f.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.vn[u]=c.keys()})),rm.waitFor(f).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return Pb(e).get(t).next((function(e){return e?(kv(e.userId===n.userId),Uw(n.serializer,e)):null}))}},{key:"Fn",value:function(e,t){var n=this;return this.vn[t]?rm.resolve(this.vn[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.vn[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return Pb(e).Z({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&(kv(t.batchId>=r),a=Uw(n.serializer,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Pb(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Pb(e).G("userMutationsIndex",n).next((function(e){return e.map((function(e){return Uw(t.serializer,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=Im(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return Rb(e).Z({range:i},(function(r,i,o){var u=l(r,3),s=u[0],c=u[1],f=u[2],h=xm(c);if(s===n.userId&&t.path.isEqual(h))return Pb(e).get(f).next((function(e){if(!e)throw gv();kv(e.userId===n.userId),a.push(Uw(n.serializer,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new ey(Ov),i=[];return t.forEach((function(t){var a=Im(n.userId,t.path),o=IDBKeyRange.lowerBound(a),u=Rb(e).Z({range:o},(function(e,i,a){var o=l(e,3),u=o[0],s=o[1],c=o[2],f=xm(s);u===n.userId&&t.path.isEqual(f)?r=r.add(c):a.done()}));i.push(u)})),rm.waitFor(i).next((function(){return n.Mn(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=Im(this.userId,r),o=IDBKeyRange.lowerBound(a),u=new ey(Ov);return Rb(e).Z({range:o},(function(e,t,a){var o=l(e,3),s=o[0],c=o[1],f=o[2],h=xm(c);s===n.userId&&r.isPrefixOf(h)?h.length===i&&(u=u.add(f)):a.done()})).next((function(){return n.Mn(e,u)}))}},{key:"Mn",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(Pb(e).get(t).next((function(e){if(null===e)throw gv();kv(e.userId===n.userId),r.push(Uw(n.serializer,e))})))})),rm.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return Tb(e.ue,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.xn(t.batchId)})),rm.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"xn",value:function(e){delete this.vn[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return rm.resolve();var r=IDBKeyRange.lowerBound(function(e){return[e]}(t.userId)),i=[];return Rb(e).Z({range:r},(function(e,n,r){if(e[0]===t.userId){var a=xm(e[1]);i.push(a)}else r.done()})).next((function(){kv(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return Ab(e,this.userId,t)}},{key:"On",value:function(e){var t=this;return Db(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"Pt",value:function(t,n,r,i){return kv(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function Ab(e,t,n){var r=Im(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return Rb(e).Z({range:a,Y:!0},(function(e,n,r){var a=l(e,3),u=a[0],s=a[1];a[2];u===t&&s===i&&(o=!0),r.done()})).next((function(){return o}))}function Pb(e){return Wm(e,"mutations")}function Rb(e){return Wm(e,"documentMutations")}function Db(e){return Wm(e,"mutationQueues")}var Ob=function(){function e(t){d(this,e),this.Nn=t}return y(e,[{key:"next",value:function(){return this.Nn+=2,this.Nn}}],[{key:"Bn",value:function(){return new e(0)}},{key:"Ln",value:function(){return new e(-1)}}]),e}(),Lb=function(){function e(t,n){d(this,e),this.referenceDelegate=t,this.serializer=n}return y(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.kn(e).next((function(n){var r=new Ob(n.highestTargetId);return n.highestTargetId=r.next(),t.qn(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.kn(e).next((function(e){return Uv.fromTimestamp(new Fv(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.kn(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.kn(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.qn(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.Qn(e,t).next((function(){return n.kn(e).next((function(r){return r.targetCount+=1,n.Kn(t,r),n.qn(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.Qn(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return Mb(e).delete(t.targetId)})).next((function(){return n.kn(e)})).next((function(t){return kv(t.targetCount>0),t.targetCount-=1,n.qn(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return Mb(e).Z((function(o,u){var s=Vw(u);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(i++,a.push(r.removeTargetData(e,s)))})).next((function(){return rm.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return Mb(e).Z((function(e,n){var r=Vw(n);t(r)}))}},{key:"kn",value:function(e){return Fb(e).get("targetGlobalKey").next((function(e){return kv(null!==e),e}))}},{key:"qn",value:function(e,t){return Fb(e).put("targetGlobalKey",t)}},{key:"Qn",value:function(e,t){return Mb(e).put(jw(this.serializer,t))}},{key:"Kn",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.kn(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=fg(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Mb(e).Z({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=Vw(n);hg(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=Ub(e);return t.forEach((function(t){var o=km(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),rm.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=Ub(e);return rm.forEach(t,(function(t){var a=km(t.path);return rm.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=Ub(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Ub(e),i=Wg();return r.Z({range:n,Y:!0},(function(e,t,n){var r=xm(e[1]),a=new qv(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=km(t.path),r=IDBKeyRange.bound([n],[Mv(n)],!1,!0),i=0;return Ub(e).Z({index:"documentTargetsIndex",Y:!0,range:r},(function(e,t,n){var r=l(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"lt",value:function(e,t){return Mb(e).get(t).next((function(e){return e?Vw(e):null}))}}]),e}();function Mb(e){return Wm(e,"targets")}function Fb(e){return Wm(e,"targetGlobal")}function Ub(e){return Wm(e,"targetDocuments")}function Vb(e,t){var n=l(e,2),r=n[0],i=n[1],a=l(t,2),o=a[0],u=a[1],s=Ov(r,o);return 0===s?Ov(i,u):s}var jb=function(){function e(t){d(this,e),this.$n=t,this.buffer=new ey(Vb),this.Un=0}return y(e,[{key:"Wn",value:function(){return++this.Un}},{key:"Gn",value:function(e){var t=[e,this.Wn()];if(this.buffer.size<this.$n)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();Vb(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),zb=function(){function e(t,n,r){d(this,e),this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.zn=null}return y(e,[{key:"start",value:function(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.jn(6e4)}},{key:"stop",value:function(){this.zn&&(this.zn.cancel(),this.zn=null)}},{key:"started",get:function(){return null!==this.zn}},{key:"jn",value:function(e){var t=this;pv("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.zn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,Nt(Tt().mark((function e(){return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.zn=null,e.prev=1,e.next=4,t.localStore.collectGarbage(t.garbageCollector);case 4:e.next=14;break;case 6:if(e.prev=6,e.t0=e.catch(1),!sm(e.t0)){e.next=12;break}pv("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e.t0),e.next=14;break;case 12:return e.next=14,tm(e.t0);case 14:return e.next=16,t.jn(3e5);case 16:case"end":return e.stop()}}),e,null,[[1,6]])}))))}}]),e}(),Bb=function(){function e(t,n){d(this,e),this.Hn=t,this.params=n}return y(e,[{key:"calculateTargetCount",value:function(e,t){return this.Hn.Jn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return rm.resolve(vm.ae);var r=new jb(t);return this.Hn.forEachTarget(e,(function(e){return r.Gn(e.sequenceNumber)})).next((function(){return n.Hn.Yn(e,(function(e){return r.Gn(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.Hn.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.Hn.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(pv("LruGarbageCollector","Garbage collection skipped; disabled"),rm.resolve(Eb)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(pv("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),Eb):n.Zn(e,t)}))}},{key:"getCacheSize",value:function(e){return this.Hn.getCacheSize(e)}},{key:"Zn",value:function(e,t){var n,r,i,a,o,u,s,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(pv("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,u=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return s=Date.now(),dv()<=Ot.DEBUG&&pv("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(u-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(s-u)+"ms\n"+"Total Duration: ".concat(s-l,"ms")),rm.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}();function qb(e,t){return new Bb(e,t)}var Kb=function(){function e(t,n){d(this,e),this.db=t,this.garbageCollector=qb(this,n)}return y(e,[{key:"Jn",value:function(e){var t=this.Xn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"Xn",value:function(e){var t=0;return this.Yn(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"Yn",value:function(e,t){return this.er(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return Gb(e,n)}},{key:"removeReference",value:function(e,t,n){return Gb(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return Gb(e,t)}},{key:"tr",value:function(e,t){return function(e,t){var n=!1;return Db(e).X((function(r){return Ab(e,r,t).next((function(e){return e&&(n=!0),rm.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.er(e,(function(o,u){if(u<=t){var s=n.tr(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,Uv.min()),Ub(e).delete(function(e){return[0,km(e.path)]}(o))}))}));i.push(s)}})).next((function(){return rm.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return Gb(e,t)}},{key:"er",value:function(e,t){var n,r=Ub(e),i=vm.ae;return r.Z({index:"documentTargetsIndex"},(function(e,r){var a=l(e,2),o=a[0],u=(a[1],r.path),s=r.sequenceNumber;0===o?(i!==vm.ae&&t(new qv(xm(n)),i),i=s,n=u):i=vm.ae})).next((function(){i!==vm.ae&&t(new qv(xm(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function Gb(e,t){return Ub(e).put(function(e,t){return{targetId:0,path:km(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var Hb=function(){function e(){d(this,e),this.changes=new Mg((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return y(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,Uy.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?rm.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),Wb=function(){function e(t){d(this,e),this.serializer=t}return y(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return Xb(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return Xb(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],Lw(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.nr(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=Uy.newInvalidDocument(t);return Xb(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Jb(t))},(function(e,i){r=n.rr(t,i)})).next((function(){return r}))}},{key:"ir",value:function(e,t){var n=this,r={size:0,document:Uy.newInvalidDocument(t)};return Xb(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Jb(t))},(function(e,i){r={document:n.rr(t,i),size:Cb(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=Ug();return this.sr(e,t,(function(e,t){var i=n.rr(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"_r",value:function(e,t){var n=this,r=Ug(),i=new Xm(qv.comparator);return this.sr(e,t,(function(e,t){var a=n.rr(e,t);r=r.insert(e,a),i=i.insert(e,Cb(t))})).next((function(){return{documents:r,ar:i}}))}},{key:"sr",value:function(e,t,n){if(t.isEmpty())return rm.resolve();var r=new ey(ex);t.forEach((function(e){return r=r.add(e)}));var i=IDBKeyRange.bound(Jb(r.first()),Jb(r.last())),a=r.getIterator(),o=a.getNext();return Xb(e).Z({index:"documentKeyIndex",range:i},(function(e,t,r){for(var i=qv.fromSegments([].concat(h(t.prefixPath),[t.collectionGroup,t.documentId]));o&&ex(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.W(Jb(o)):r.done()})).next((function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r,i){var a=this,o=t.path,u=[o.popLast().toArray(),o.lastSegment(),Lw(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],s=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Xb(e).G(IDBKeyRange.bound(u,s,!0)).next((function(e){null==i||i.incrementDocumentReadCount(e.length);var n,o=Ug(),u=T(e);try{for(u.s();!(n=u.n()).done;){var s=n.value,c=a.rr(qv.fromSegments(s.prefixPath.concat(s.collectionGroup,s.documentId)),s);c.isFoundDocument()&&(Rg(t,c)||r.has(c.key))&&(o=o.insert(c.key,c))}}catch(l){u.e(l)}finally{u.f()}return o}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=Ug(),o=Zb(t,n),u=Zb(t,Xv.max());return Xb(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,u,!0)},(function(e,t,n){var o=i.rr(qv.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new Yb(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return $b(e).get("remoteDocumentGlobalKey").next((function(e){return kv(!!e),e}))}},{key:"nr",value:function(e,t){return $b(e).put("remoteDocumentGlobalKey",t)}},{key:"rr",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=mw(e.ht,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=qv.fromSegments(t.noDocument.path),i=Fw(t.noDocument.readTime);n=Uy.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return gv();var a=qv.fromSegments(t.unknownDocument.path),o=Fw(t.unknownDocument.version);n=Uy.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new Fv(e[0],e[1]);return Uv.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!n.isNoDocument()||!n.version.isEqual(Uv.min()))return n}return Uy.newInvalidDocument(e)}}]),e}();function Qb(e){return new Wb(e)}var Yb=function(e){k(n,e);var t=_(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).ur=e,i.trackRemovals=r,i.cr=new Mg((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return y(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new ey((function(e,t){return Ov(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var u=t.cr.get(a);if(n.push(t.ur.removeEntry(e,a,u.readTime)),o.isValidDocument()){var s=Ow(t.ur.serializer,o);i=i.add(a.path.popLast());var c=Cb(s);r+=c-u.size,n.push(t.ur.addEntry(e,a,s))}else if(r-=u.size,t.trackRemovals){var l=Ow(t.ur.serializer,o.convertToNoDocument(Uv.min()));n.push(t.ur.addEntry(e,a,l))}})),i.forEach((function(r){n.push(t.ur.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.ur.updateMetadata(e,r)),rm.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.ur.ir(e,t).next((function(e){return n.cr.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.ur._r(e,t).next((function(e){var t=e.documents;return e.ar.forEach((function(e,r){n.cr.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}(Hb);function $b(e){return Wm(e,"remoteDocumentGlobal")}function Xb(e){return Wm(e,"remoteDocumentsV14")}function Jb(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function Zb(e,t){var n=t.documentKey.path.toArray();return[e,Lw(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function ex(e,t){for(var n=e.path.toArray(),r=t.path.toArray(),i=0,a=0;a<n.length-2&&a<r.length-2;++a)if(i=Ov(n[a],r[a]))return i;return(i=Ov(n.length,r.length))||((i=Ov(n[n.length-2],r[r.length-2]))||Ov(n[n.length-1],r[r.length-1]))}var tx=y((function e(t,n){d(this,e),this.overlayedDocument=t,this.mutatedFields=n})),nx=function(){function e(t,n,r,i){d(this,e),this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}return y(e,[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next((function(i){return r=i,n.remoteDocumentCache.getEntry(e,t)})).next((function(e){return null!==r&&gk(r.mutation,e,ry.empty(),Fv.now()),e}))}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t,Wg()).next((function(){return t}))}))}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Wg(),i=Bg();return this.populateOverlays(e,i,t).next((function(){return n.computeViews(e,t,i,r).next((function(e){var t=jg();return e.forEach((function(e,n){t=t.insert(e,n.overlayedDocument)})),t}))}))}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=Bg();return this.populateOverlays(e,r,t).next((function(){return n.computeViews(e,t,r,Wg())}))}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach((function(e){t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((function(e){e.forEach((function(e,n){t.set(e,n)}))}))}},{key:"computeViews",value:function(e,t,n,r){var i=Ug(),a=Kg(),o=Kg();return t.forEach((function(e,t){var o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof xk)?i=i.insert(t.key,t):void 0!==o?(a.set(t.key,o.mutation.getFieldMask()),gk(o.mutation,t,o.mutation.getFieldMask(),Fv.now())):a.set(t.key,ry.empty())})),this.recalculateAndSaveOverlays(e,i).next((function(e){return e.forEach((function(e,t){return a.set(e,t)})),t.forEach((function(e,t){var n;return o.set(e,new tx(t,null!==(n=a.get(e))&&void 0!==n?n:null))})),o}))}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=Kg(),i=new Xm((function(e,t){return e-t})),a=Wg();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){var n,a=T(e);try{var o=function(){var e=n.value;e.keys().forEach((function(n){var a=t.get(n);if(null!==a){var o=r.get(n)||ry.empty();o=e.applyToLocalView(a,o),r.set(n,o);var u=(i.get(e.batchId)||Wg()).add(n);i=i.insert(e.batchId,u)}}))};for(a.s();!(n=a.n()).done;)o()}catch(u){a.e(u)}finally{a.f()}})).next((function(){for(var o=[],u=i.getReverseIterator(),s=function(){var i=u.getNext(),s=i.key,c=i.value,l=qg();c.forEach((function(e){if(!a.has(e)){var n=mk(t.get(e),r.get(e));null!==n&&l.set(e,n),a=a.add(e)}})),o.push(n.documentOverlayCache.saveOverlays(e,s,l))};u.hasNext();)s();return rm.waitFor(o)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.recalculateAndSaveOverlays(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){return function(e){return qv.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):_g(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}},{key:"getNextDocuments",value:function(e,t,n,r){var i=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((function(a){var o=r-a.size>0?i.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):rm.resolve(Bg()),u=-1,s=a;return o.next((function(t){return rm.forEach(t,(function(t,n){return u<n.largestBatchId&&(u=n.largestBatchId),a.get(t)?rm.resolve():i.remoteDocumentCache.getEntry(e,t).next((function(e){s=s.insert(t,e)}))})).next((function(){return i.populateOverlays(e,t,a)})).next((function(){return i.computeViews(e,s,t,Wg())})).next((function(e){return{batchId:u,changes:zg(e)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new qv(t)).next((function(e){var t=jg();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n,r){var i=this,a=t.collectionGroup,o=jg();return this.indexManager.getCollectionParents(e,a).next((function(u){return rm.forEach(u,(function(u){var s=function(e,t){return new yg(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,u.child(a));return i.getDocumentsMatchingCollectionQuery(e,s,n,r).next((function(e){e.forEach((function(e,t){o=o.insert(e,t)}))}))})).next((function(){return o}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n,r){var i,a=this;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((function(o){return i=o,a.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)})).next((function(e){i.forEach((function(t,n){var r=n.getKey();null===e.get(r)&&(e=e.insert(r,Uy.newInvalidDocument(r)))}));var n=jg();return e.forEach((function(e,r){var a=i.get(e);void 0!==a&&gk(a.mutation,r,ry.empty(),Fv.now()),Rg(t,r)&&(n=n.insert(e,r))})),n}))}}]),e}(),rx=function(){function e(t){d(this,e),this.serializer=t,this.lr=new Map,this.hr=new Map}return y(e,[{key:"getBundleMetadata",value:function(e,t){return rm.resolve(this.lr.get(t))}},{key:"saveBundleMetadata",value:function(e,t){return this.lr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:ow(e.createTime)}}(t)),rm.resolve()}},{key:"getNamedQuery",value:function(e,t){return rm.resolve(this.hr.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.hr.set(t.name,function(e){return{name:e.name,query:zw(e.bundledQuery),readTime:ow(e.readTime)}}(t)),rm.resolve()}}]),e}(),ix=function(){function e(){d(this,e),this.overlays=new Xm(qv.comparator),this.Pr=new Map}return y(e,[{key:"getOverlay",value:function(e,t){return rm.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=Bg();return rm.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.It(e,t,i)})),rm.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.Pr.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.Pr.delete(n)),rm.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=Bg(),i=t.length+1,a=new qv(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var u=o.getNext().value,s=u.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&u.largestBatchId>n&&r.set(u.getKey(),u)}return rm.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new Xm((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var u=i.get(o.largestBatchId);null===u&&(u=Bg(),i=i.insert(o.largestBatchId,u)),u.set(o.getKey(),o)}}for(var s=Bg(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return s.set(e,t)})),!(s.size()>=r)););return rm.resolve(s)}},{key:"It",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var i=this.Pr.get(r.largestBatchId).delete(n.key);this.Pr.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new Rk(t,n));var a=this.Pr.get(t);void 0===a&&(a=Wg(),this.Pr.set(t,a)),this.Pr.set(t,a.add(n.key))}}]),e}(),ax=function(){function e(){d(this,e),this.Ir=new ey(ox.dr),this.Tr=new ey(ox.Er)}return y(e,[{key:"isEmpty",value:function(){return this.Ir.isEmpty()}},{key:"addReference",value:function(e,t){var n=new ox(e,t);this.Ir=this.Ir.add(n),this.Tr=this.Tr.add(n)}},{key:"Ar",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.Rr(new ox(e,t))}},{key:"Vr",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"mr",value:function(e){var t=this,n=new qv(new jv([])),r=new ox(n,e),i=new ox(n,e+1),a=[];return this.Tr.forEachInRange([r,i],(function(e){t.Rr(e),a.push(e.key)})),a}},{key:"gr",value:function(){var e=this;this.Ir.forEach((function(t){return e.Rr(t)}))}},{key:"Rr",value:function(e){this.Ir=this.Ir.delete(e),this.Tr=this.Tr.delete(e)}},{key:"pr",value:function(e){var t=new qv(new jv([])),n=new ox(t,e),r=new ox(t,e+1),i=Wg();return this.Tr.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new ox(e,0),n=this.Ir.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),ox=function(){function e(t,n){d(this,e),this.key=t,this.yr=n}return y(e,null,[{key:"dr",value:function(e,t){return qv.comparator(e.key,t.key)||Ov(e.yr,t.yr)}},{key:"Er",value:function(e,t){return Ov(e.yr,t.yr)||qv.comparator(e.key,t.key)}}]),e}(),ux=function(){function e(t,n){d(this,e),this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.wr=1,this.Sr=new ey(ox.dr)}return y(e,[{key:"checkEmpty",value:function(e){return rm.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.wr;this.wr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var a=new Ak(i,t,n,r);this.mutationQueue.push(a);var o,u=T(r);try{for(u.s();!(o=u.n()).done;){var s=o.value;this.Sr=this.Sr.add(new ox(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast())}}catch(c){u.e(c)}finally{u.f()}return rm.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return rm.resolve(this.br(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.Dr(n),i=r<0?0:r;return rm.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return rm.resolve(0===this.mutationQueue.length?-1:this.wr-1)}},{key:"getAllMutationBatches",value:function(e){return rm.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new ox(t,0),i=new ox(t,Number.POSITIVE_INFINITY),a=[];return this.Sr.forEachInRange([r,i],(function(e){var t=n.br(e.yr);a.push(t)})),rm.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new ey(Ov);return t.forEach((function(e){var t=new ox(e,0),i=new ox(e,Number.POSITIVE_INFINITY);n.Sr.forEachInRange([t,i],(function(e){r=r.add(e.yr)}))})),rm.resolve(this.Cr(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;qv.isDocumentKey(i)||(i=i.child(""));var a=new ox(new qv(i),0),o=new ey(Ov);return this.Sr.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.yr)),!0)}),a),rm.resolve(this.Cr(o))}},{key:"Cr",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.br(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;kv(0===this.vr(t.batchId,"removed")),this.mutationQueue.shift();var r=this.Sr;return rm.forEach(t.mutations,(function(i){var a=new ox(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.Sr=r}))}},{key:"xn",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new ox(t,0),r=this.Sr.firstAfterOrEqual(n);return rm.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,rm.resolve()}},{key:"vr",value:function(e,t){return this.Dr(e)}},{key:"Dr",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"br",value:function(e){var t=this.Dr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}]),e}(),sx=function(){function e(t){d(this,e),this.Fr=t,this.docs=new Xm(qv.comparator),this.size=0}return y(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.Fr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return rm.resolve(n?n.document.mutableCopy():Uy.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=Ug();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():Uy.newInvalidDocument(e))})),rm.resolve(r)}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){for(var i=Ug(),a=t.path,o=new qv(a.child("")),u=this.docs.getIteratorFrom(o);u.hasNext();){var s=u.getNext(),c=s.key,l=s.value.document;if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||Jv($v(l),n)<=0||(r.has(l.key)||Rg(t,l))&&(i=i.insert(l.key,l.mutableCopy()))}return rm.resolve(i)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){gv()}},{key:"Mr",value:function(e,t){return rm.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new cx(this)}},{key:"getSize",value:function(e){return rm.resolve(this.size)}}]),e}(),cx=function(e){k(n,e);var t=_(n);function n(e){var r;return d(this,n),(r=t.call(this)).ur=e,r}return y(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.ur.addEntry(e,i)):t.ur.removeEntry(r)})),rm.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.ur.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.ur.getEntries(e,t)}}]),n}(Hb),lx=function(){function e(t){d(this,e),this.persistence=t,this.Or=new Mg((function(e){return fg(e)}),hg),this.lastRemoteSnapshotVersion=Uv.min(),this.highestTargetId=0,this.Nr=0,this.Br=new ax,this.targetCount=0,this.Lr=Ob.Bn()}return y(e,[{key:"forEachTarget",value:function(e,t){return this.Or.forEach((function(e,n){return t(n)})),rm.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return rm.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return rm.resolve(this.Nr)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Lr.next(),rm.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Nr&&(this.Nr=t),rm.resolve()}},{key:"Qn",value:function(e){this.Or.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Lr=new Ob(t),this.highestTargetId=t),e.sequenceNumber>this.Nr&&(this.Nr=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.Qn(t),this.targetCount+=1,rm.resolve()}},{key:"updateTargetData",value:function(e,t){return this.Qn(t),rm.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Or.delete(t.target),this.Br.mr(t.targetId),this.targetCount-=1,rm.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Or.forEach((function(o,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.Or.delete(o),a.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),rm.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return rm.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Or.get(t)||null;return rm.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.Br.Ar(t,n),rm.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.Br.Vr(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),rm.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.Br.mr(t),rm.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.Br.pr(t);return rm.resolve(n)}},{key:"containsKey",value:function(e,t){return rm.resolve(this.Br.containsKey(t))}}]),e}(),fx=function(){function e(t,n){var r=this;d(this,e),this.kr={},this.overlays={},this.qr=new vm(0),this.Qr=!1,this.Qr=!0,this.referenceDelegate=t(this),this.Kr=new lx(this),this.indexManager=new mb,this.remoteDocumentCache=function(e){return new sx(e)}((function(e){return r.referenceDelegate.$r(e)})),this.serializer=new Dw(n),this.Ur=new rx(this.serializer)}return y(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.Qr=!1,Promise.resolve()}},{key:"started",get:function(){return this.Qr}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new ix,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.kr[e.toKey()];return n||(n=new ux(t,this.referenceDelegate),this.kr[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.Kr}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.Ur}},{key:"runTransaction",value:function(e,t,n){var r=this;pv("MemoryPersistence","Starting transaction:",e);var i=new hx(this.qr.next());return this.referenceDelegate.Wr(),n(i).next((function(e){return r.referenceDelegate.Gr(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"zr",value:function(e,t){return rm.or(Object.values(this.kr).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),hx=function(e){k(n,e);var t=_(n);function n(e){var r;return d(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return y(n)}(em),dx=function(){function e(t){d(this,e),this.persistence=t,this.jr=new ax,this.Hr=null}return y(e,[{key:"Yr",get:function(){if(this.Hr)return this.Hr;throw gv()}},{key:"addReference",value:function(e,t,n){return this.jr.addReference(n,t),this.Yr.delete(n.toString()),rm.resolve()}},{key:"removeReference",value:function(e,t,n){return this.jr.removeReference(n,t),this.Yr.add(n.toString()),rm.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Yr.add(t.toString()),rm.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.jr.mr(t.targetId).forEach((function(e){return n.Yr.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Yr.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"Wr",value:function(){this.Hr=new Set}},{key:"Gr",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return rm.forEach(this.Yr,(function(r){var i=qv.fromPath(r);return t.Zr(e,i).next((function(e){e||n.removeEntry(i,Uv.min())}))})).next((function(){return t.Hr=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Zr(e,t).next((function(e){e?n.Yr.delete(t.toString()):n.Yr.add(t.toString())}))}},{key:"$r",value:function(e){return 0}},{key:"Zr",value:function(e,t){var n=this;return rm.or([function(){return rm.resolve(n.jr.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.zr(e,t)}])}}],[{key:"Jr",value:function(t){return new e(t)}}]),e}(),px=function(){function e(t){d(this,e),this.serializer=t}return y(e,[{key:"B",value:function(e,t,n,r){var i=this,a=new im("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",_m,{unique:!0}),e.createObjectStore("documentMutations")}(e),vx(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=rm.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),vx(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Uv.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").G().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",_m,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return rm.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.ei(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.ti(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.ni(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.ri(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.ii(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:Um});t.createIndex("collectionPathOverlayIndex",Vm,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",jm,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:Tm});t.createIndex("documentKeyIndex",Cm),t.createIndex("collectionGroupIndex",Nm)}(e)})).next((function(){return i.si(e,a)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){return i.oi(e,a)}))),n<15&&r>=15&&(o=o.next((function(){return function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:Om}).createIndex("sequenceNumberIndex",Lm,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:Mm}).createIndex("documentKeyIndex",Fm,{unique:!1})}(e)}))),o}},{key:"ti",value:function(e){var t=0;return e.store("remoteDocuments").Z((function(e,n){t+=Cb(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"ei",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.G().next((function(n){return rm.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.G("userMutationsIndex",i).next((function(r){return rm.forEach(r,(function(r){kv(r.userId===n.userId);var i=Uw(t.serializer,r);return Tb(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"ni",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.Z((function(n,i){var a=new jv(n),o=function(e){return[0,km(e)]}(a);r.push(t.get(o).next((function(n){return n?rm.resolve():function(n){return t.put({targetId:0,path:km(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return rm.waitFor(r)}))}))}},{key:"ri",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:Dm});var n=t.store("collectionParents"),r=new yb,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:km(i)})}};return t.store("remoteDocuments").Z({Y:!0},(function(e,t){var n=new jv(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").Z({Y:!0},(function(e,t){var n=l(e,3),r=(n[0],n[1]),a=(n[2],xm(r));return i(a.popLast())}))}))}},{key:"ii",value:function(e){var t=this,n=e.store("targets");return n.Z((function(e,r){var i=Vw(r),a=jw(t.serializer,i);return n.put(a)}))}},{key:"si",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.Z((function(e,n){var i=t.store("remoteDocumentsV14"),a=function(e){return e.document?new qv(jv.fromString(e.document.name).popFirst(5)):e.noDocument?qv.fromSegments(e.noDocument.path):e.unknownDocument?qv.fromSegments(e.unknownDocument.path):gv()}(n).path.toArray(),o={prefixPath:a.slice(0,a.length-2),collectionGroup:a[a.length-2],documentId:a[a.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(i.put(o))})).next((function(){return rm.waitFor(r)}))}},{key:"oi",value:function(e,t){var n=this,r=t.store("mutations"),i=Qb(this.serializer),a=new fx(dx.Jr,this.serializer.ht);return r.G().next((function(e){var r=new Map;return e.forEach((function(e){var t,i=null!==(t=r.get(e.userId))&&void 0!==t?t:Wg();Uw(n.serializer,e).keys().forEach((function(e){return i=i.add(e)})),r.set(e.userId,i)})),rm.forEach(r,(function(e,r){var o=new lv(r),u=Qw.Pt(n.serializer,o),s=a.getIndexManager(o),c=Nb.Pt(o,n.serializer,s,a.referenceDelegate);return new nx(i,c,u,s).recalculateAndSaveOverlaysForDocumentKeys(new Hm(t,vm.ae),e).next()}))}))}}]),e}();function vx(e){e.createObjectStore("targetDocuments",{keyPath:Pm}).createIndex("documentTargetsIndex",Rm,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Am,{unique:!0}),e.createObjectStore("targetGlobal")}var mx="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",yx=function(){function e(t,n,r,i,a,o,u,s,c,l){var f=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(d(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this._i=a,this.window=o,this.document=u,this.ai=c,this.ui=l,this.ci=f,this.qr=null,this.Qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.li=null,this.inForeground=!1,this.hi=null,this.Pi=null,this.Ii=Number.NEGATIVE_INFINITY,this.di=function(e){return Promise.resolve()},!e.C())throw new xv(bv.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Kb(this,i),this.Ti=n+"main",this.serializer=new Dw(s),this.Ei=new am(this.Ti,this.ci,new px(this.serializer)),this.Kr=new Lb(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Qb(this.serializer),this.Ur=new Gw,this.window&&this.window.localStorage?this.Ai=this.window.localStorage:(this.Ai=null,!1===l&&vv("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return y(e,[{key:"start",value:function(){var e=this;return this.Ri().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new xv(bv.FAILED_PRECONDITION,mx);return e.Vi(),e.mi(),e.fi(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.Kr.getHighestSequenceNumber(t)}))})).then((function(t){e.qr=new vm(t,e.ai)})).then((function(){e.Qr=!0})).catch((function(t){return e.Ei&&e.Ei.close(),Promise.reject(t)}))}},{key:"gi",value:function(e){var t=this;return this.di=function(){var n=Nt(Tt().mark((function n(r){return Tt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.Ei.k(function(){var t=Nt(Tt().mark((function t(n){return Tt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this._i.enqueueAndForget(Nt(Tt().mark((function e(){return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.Ri();case 4:case"end":return e.stop()}}),e)})))))}},{key:"Ri",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return kx(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e.pi(t).next((function(t){t||(e.isPrimary=!1,e._i.enqueueRetryable((function(){return e.di(!1)})))}))})).next((function(){return e.yi(t)})).next((function(n){return e.isPrimary&&!n?e.wi(t).next((function(){return!1})):!!n&&e.Si(t).next((function(){return!0}))}))})).catch((function(t){if(sm(t))return pv("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return pv("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e._i.enqueueRetryable((function(){return e.di(t)})),e.isPrimary=t}))}},{key:"pi",value:function(e){var t=this;return gx(e).get("owner").next((function(e){return rm.resolve(t.bi(e))}))}},{key:"Di",value:function(e){return kx(e).delete(this.clientId)}},{key:"Ci",value:function(){var e=Nt(Tt().mark((function e(){var t,n,r,i,a=this;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.vi(this.Ii,18e5)){e.next=6;break}return this.Ii=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=Wm(e,"clientMetadata");return t.G().next((function(e){var n=a.Fi(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return rm.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this.Ai){n=T(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this.Ai.removeItem(this.Mi(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fi",value:function(){var e=this;this.Pi=this._i.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.Ri().then((function(){return e.Ci()})).then((function(){return e.fi()}))}))}},{key:"bi",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"yi",value:function(e){var t=this;return this.ui?rm.resolve(!0):gx(e).get("owner").next((function(n){if(null!==n&&t.vi(n.leaseTimestampMs,5e3)&&!t.xi(n.ownerId)){if(t.bi(n)&&t.networkEnabled)return!0;if(!t.bi(n)){if(!n.allowTabSynchronization)throw new xv(bv.FAILED_PRECONDITION,mx);return!1}}return!(!t.networkEnabled||!t.inForeground)||kx(e).G().next((function(e){return void 0===t.Fi(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&pv("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=Nt(Tt().mark((function e(){var t=this;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Qr=!1,this.Oi(),this.Pi&&(this.Pi.cancel(),this.Pi=null),this.Ni(),this.Bi(),e.next=7,this.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new Hm(e,vm.ae);return t.wi(n).next((function(){return t.Di(n)}))}));case 7:this.Ei.close(),this.Li();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Fi",value:function(e,t){var n=this;return e.filter((function(e){return n.vi(e.updateTimeMs,t)&&!n.xi(e.clientId)}))}},{key:"ki",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return kx(t).G().next((function(t){return e.Fi(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.Qr}},{key:"getMutationQueue",value:function(e,t){return Nb.Pt(e,this.serializer,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.Kr}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getIndexManager",value:function(e){return new kb(e,this.serializer.ht.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return Qw.Pt(this.serializer,e)}},{key:"getBundleCache",value:function(){return this.Ur}},{key:"runTransaction",value:function(e,t,n){var r=this;pv("IndexedDbPersistence","Starting transaction:",e);var i,a="readonly"===t?"readonly":"readwrite",o=function(e){return 15===e?Gm:14===e?Km:13===e?qm:12===e?Bm:11===e?zm:void gv()}(this.ci);return this.Ei.runTransaction(e,a,o,(function(a){return i=new Hm(a,r.qr?r.qr.next():vm.ae),"readwrite-primary"===t?r.pi(i).next((function(e){return!!e||r.yi(i)})).next((function(t){if(!t)throw vv("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r._i.enqueueRetryable((function(){return r.di(!1)})),new xv(bv.FAILED_PRECONDITION,Zv);return n(i)})).next((function(e){return r.Si(i).next((function(){return e}))})):r.qi(i).next((function(){return n(i)}))})).then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"qi",value:function(e){var t=this;return gx(e).get("owner").next((function(e){if(null!==e&&t.vi(e.leaseTimestampMs,5e3)&&!t.xi(e.ownerId)&&!t.bi(e)&&!(t.ui||t.allowTabSynchronization&&e.allowTabSynchronization))throw new xv(bv.FAILED_PRECONDITION,mx)}))}},{key:"Si",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return gx(e).put("owner",t)}},{key:"wi",value:function(e){var t=this,n=gx(e);return n.get("owner").next((function(e){return t.bi(e)?(pv("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):rm.resolve()}))}},{key:"vi",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(vv("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"Vi",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.hi=function(){e._i.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.Ri()}))},this.document.addEventListener("visibilitychange",this.hi),this.inForeground="visible"===this.document.visibilityState)}},{key:"Ni",value:function(){this.hi&&(this.document.removeEventListener("visibilitychange",this.hi),this.hi=null)}},{key:"mi",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.li=function(){t.Oi();var e=/(?:Version|Mobile)\/1[456]/;!st()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&t._i.enterRestrictedMode(!0),t._i.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.li))}},{key:"Bi",value:function(){this.li&&(this.window.removeEventListener("pagehide",this.li),this.li=null)}},{key:"xi",value:function(e){var t;try{var n=null!==(null===(t=this.Ai)||void 0===t?void 0:t.getItem(this.Mi(e)));return pv("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return vv("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"Oi",value:function(){if(this.Ai)try{this.Ai.setItem(this.Mi(this.clientId),String(Date.now()))}catch(e){vv("Failed to set zombie client id.",e)}}},{key:"Li",value:function(){if(this.Ai)try{this.Ai.removeItem(this.Mi(this.clientId))}catch(e){}}},{key:"Mi",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"C",value:function(){return am.C()}}]),e}();function gx(e){return Wm(e,"owner")}function kx(e){return Wm(e,"clientMetadata")}function wx(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var bx=function(){function e(t,n,r,i){d(this,e),this.targetId=t,this.fromCache=n,this.Qi=r,this.Ki=i}return y(e,null,[{key:"$i",value:function(t,n){var r,i=Wg(),a=Wg(),o=T(n.docChanges);try{for(o.s();!(r=o.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}}}catch(s){o.e(s)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),xx=function(){function e(){d(this,e),this._documentReadCount=0}return y(e,[{key:"documentReadCount",get:function(){return this._documentReadCount}},{key:"incrementDocumentReadCount",value:function(e){this._documentReadCount+=e}}]),e}(),_x=function(){function e(){d(this,e),this.Ui=!1,this.Wi=!1,this.Gi=100,this.zi=8}return y(e,[{key:"initialize",value:function(e,t){this.ji=e,this.indexManager=t,this.Ui=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this,a={result:null};return this.Hi(e,t).next((function(e){a.result=e})).next((function(){if(!a.result)return i.Ji(e,t,r,n).next((function(e){a.result=e}))})).next((function(){if(!a.result){var n=new xx;return i.Yi(e,t,n).next((function(r){if(a.result=r,i.Wi)return i.Zi(e,t,n,r.size)}))}})).next((function(){return a.result}))}},{key:"Zi",value:function(e,t,n,r){return n.documentReadCount<this.Gi?(dv()<=Ot.DEBUG&&pv("QueryEngine","SDK will not create cache indexes for query:",Pg(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Gi,"documents"),rm.resolve()):(dv()<=Ot.DEBUG&&pv("QueryEngine","Query:",Pg(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.zi*r?(dv()<=Ot.DEBUG&&pv("QueryEngine","The SDK decides to create cache indexes for query:",Pg(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Eg(t))):rm.resolve())}},{key:"Hi",value:function(e,t){var n=this;if(wg(t))return rm.resolve(null);var r=Eg(t);return this.indexManager.getIndexType(e,r).next((function(i){return 0===i?null:(null!==t.limit&&1===i&&(t=Cg(t,null,"F"),r=Eg(t)),n.indexManager.getDocumentsMatchingTarget(e,r).next((function(i){var a=Wg.apply(void 0,h(i));return n.ji.getDocuments(e,a).next((function(i){return n.indexManager.getMinOffset(e,r).next((function(r){var o=n.Xi(t,i);return n.es(t,o,a,r.readTime)?n.Hi(e,Cg(t,null,"F")):n.ts(e,o,t,r)}))}))})))}))}},{key:"Ji",value:function(e,t,n,r){var i=this;return wg(t)||r.isEqual(Uv.min())?rm.resolve(null):this.ji.getDocuments(e,n).next((function(a){var o=i.Xi(t,a);return i.es(t,o,n,r)?rm.resolve(null):(dv()<=Ot.DEBUG&&pv("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Pg(t)),i.ts(e,o,t,Yv(r,-1)).next((function(e){return e})))}))}},{key:"Xi",value:function(e,t){var n=new ey(Og(e));return t.forEach((function(t,r){Rg(e,r)&&(n=n.add(r))})),n}},{key:"es",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Yi",value:function(e,t,n){return dv()<=Ot.DEBUG&&pv("QueryEngine","Using full collection scan to execute query:",Pg(t)),this.ji.getDocumentsMatchingQuery(e,t,Xv.min(),n)}},{key:"ts",value:function(e,t,n,r){return this.ji.getDocumentsMatchingQuery(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),Ix=function(){function e(t,n,r,i){d(this,e),this.persistence=t,this.ns=n,this.serializer=i,this.rs=new Xm(Ov),this.ss=new Mg((function(e){return fg(e)}),hg),this.os=new Map,this._s=t.getRemoteDocumentCache(),this.Kr=t.getTargetCache(),this.Ur=t.getBundleCache(),this.us(r)}return y(e,[{key:"us",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new nx(this._s,this.mutationQueue,this.documentOverlayCache,this.indexManager),this._s.setIndexManager(this.indexManager),this.ns.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.rs)}))}}]),e}();function Ex(e,t,n,r){return new Ix(e,t,n,r)}function Sx(e,t){return Tx.apply(this,arguments)}function Tx(){return Tx=Nt(Tt().mark((function e(t,n){var r;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=wv(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.mutationQueue.getAllMutationBatches(e).next((function(i){return t=i,r.us(n),r.mutationQueue.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],u=Wg(),s=T(t);try{for(s.s();!(i=s.n()).done;){var c=i.value;a.push(c.batchId);var l,f=T(c.mutations);try{for(f.s();!(l=f.n()).done;){var h=l.value;u=u.add(h.key)}}catch(k){f.e(k)}finally{f.f()}}}catch(k){s.e(k)}finally{s.f()}var d,p=T(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var m,y=T(v.mutations);try{for(y.s();!(m=y.n()).done;){var g=m.value;u=u.add(g.key)}}catch(k){y.e(k)}finally{y.f()}}}catch(k){p.e(k)}finally{p.f()}return r.localDocuments.getDocuments(e,u).next((function(e){return{cs:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),Tx.apply(this,arguments)}function Cx(e,t){var n=wv(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n._s.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=rm.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);kv(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.mutationQueue.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=Wg(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}function Nx(e){var t=wv(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Kr.getLastRemoteSnapshotVersion(e)}))}function Ax(e,t){var n=wv(e),r=t.snapshotVersion,i=n.rs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n._s.newChangeBuffer({trackRemovals:!0});i=n.rs;var o=[];t.targetChanges.forEach((function(a,u){var s=i.get(u);if(s){o.push(n.Kr.removeMatchingKeys(e,a.removedDocuments,u).next((function(){return n.Kr.addMatchingKeys(e,a.addedDocuments,u)})));var c=s.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(u)?c=c.withResumeToken(ay.EMPTY_BYTE_STRING,Uv.min()).withLastLimboFreeSnapshotVersion(Uv.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(u,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(s,c,a)&&o.push(n.Kr.updateTargetData(e,c))}}));var u=Ug(),s=Wg();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(Px(e,a,t.documentUpdates).next((function(e){u=e.ls,s=e.hs}))),!r.isEqual(Uv.min())){var c=n.Kr.getLastRemoteSnapshotVersion(e).next((function(t){return n.Kr.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(c)}return rm.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(e,u,s)})).next((function(){return u}))})).then((function(e){return n.rs=i,e}))}function Px(e,t,n){var r=Wg(),i=Wg();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=Ug();return n.forEach((function(n,a){var o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(Uv.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||0===a.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):pv("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",a.version)})),{ls:r,hs:i}}))}function Rx(e,t){var n=wv(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)}))}function Dx(e,t){var n=wv(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.Kr.getTargetData(e,t).next((function(i){return i?(r=i,rm.resolve(r)):n.Kr.allocateTargetId(e).next((function(i){return r=new Rw(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Kr.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.rs.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.rs=n.rs.insert(e.targetId,e),n.ss.set(t,e.targetId)),e}))}function Ox(e,t,n){return Lx.apply(this,arguments)}function Lx(){return Lx=Nt(Tt().mark((function e(t,n,r){var i,a,o;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=wv(t),a=i.rs.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),sm(e.t1)){e.next=12;break}throw e.t1;case 12:pv("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.rs=i.rs.remove(n),i.ss.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),Lx.apply(this,arguments)}function Mx(e,t,n){var r=wv(e),i=Uv.min(),a=Wg();return r.persistence.runTransaction("Execute query","readwrite",(function(e){return function(e,t,n){var r=wv(e),i=r.ss.get(n);return void 0!==i?rm.resolve(r.rs.get(i)):r.Kr.getTargetData(t,n)}(r,e,Eg(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.Kr.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.ns.getDocumentsMatchingQuery(e,t,n?i:Uv.min(),n?a:Wg())})).next((function(e){return Vx(r,Dg(t),e),{documents:e,Ps:a}}))}))}function Fx(e,t){var n=wv(e),r=wv(n.Kr),i=n.rs.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.lt(e,t).next((function(e){return e?e.target:null}))}))}function Ux(e,t){var n=wv(e),r=n.os.get(t)||Uv.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n._s.getAllFromCollectionGroup(e,t,Yv(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return Vx(n,t,e),e}))}function Vx(e,t,n){var r=e.os.get(t)||Uv.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.os.set(t,r)}function jx(e,t,n,r){return zx.apply(this,arguments)}function zx(){return zx=Nt(Tt().mark((function e(t,n,r,i){var a,o,u,s,c,l,f,h,d,p;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=wv(t),o=Wg(),u=Ug(),s=T(r);try{for(s.s();!(c=s.n()).done;)l=c.value,f=n.Is(l.metadata.name),l.document&&(o=o.add(f)),(h=n.ds(l)).setReadTime(n.Ts(l.metadata.readTime)),u=u.insert(f,h)}catch(v){s.e(v)}finally{s.f()}return d=a._s.newChangeBuffer({trackRemovals:!0}),e.next=7,Dx(a,function(e){return Eg(kg(jv.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return p=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return Px(e,d,u).next((function(t){return d.apply(e),t})).next((function(t){return a.Kr.removeMatchingKeysForTargetId(e,p.targetId).next((function(){return a.Kr.addMatchingKeys(e,o,p.targetId)})).next((function(){return a.localDocuments.getLocalViewOfDocuments(e,t.ls,t.hs)})).next((function(){return t.ls}))}))})));case 9:case"end":return e.stop()}}),e)}))),zx.apply(this,arguments)}function Bx(e,t){return qx.apply(this,arguments)}function qx(){return qx=Nt(Tt().mark((function e(t,n){var r,i,a,o=arguments;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:Wg(),e.next=3,Dx(t,Eg(zw(n.bundledQuery)));case 3:return i=e.sent,a=wv(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=ow(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a.Ur.saveNamedQuery(e,n);var o=i.withResumeToken(ay.EMPTY_BYTE_STRING,t);return a.rs=a.rs.insert(o.targetId,o),a.Kr.updateTargetData(e,o).next((function(){return a.Kr.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.Kr.addMatchingKeys(e,r,i.targetId)})).next((function(){return a.Ur.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),qx.apply(this,arguments)}function Kx(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function Gx(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function Hx(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var Wx=function(){function e(t,n,r,i){d(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return y(e,[{key:"As",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Es",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new xv(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(vv("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),Qx=function(){function e(t,n,r){d(this,e),this.targetId=t,this.state=n,this.error=r}return y(e,[{key:"As",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Es",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new xv(i.error.code,i.error.message))),a?new e(t,i.state,r):(vv("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),Yx=function(){function e(t,n){d(this,e),this.clientId=t,this.activeTargetIds=n}return y(e,null,[{key:"Es",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=Yg(),o=0;i&&o<r.activeTargetIds.length;++o)i=gm(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(vv("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),$x=function(){function e(t,n){d(this,e),this.clientId=t,this.onlineState=n}return y(e,null,[{key:"Es",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(vv("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),Xx=function(){function e(){d(this,e),this.activeTargetIds=Yg()}return y(e,[{key:"Rs",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"Vs",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"As",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),Jx=function(){function e(t,n,r,i,a){d(this,e),this.window=t,this._i=n,this.persistenceKey=r,this.fs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.gs=this.ps.bind(this),this.ys=new Xm(Ov),this.started=!1,this.ws=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.Ss=Kx(this.persistenceKey,this.fs),this.bs=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.ys=this.ys.insert(this.fs,new Xx),this.Ds=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.Cs=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.vs=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.Fs=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.Ms=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.gs)}return y(e,[{key:"start",value:function(){var e=Nt(Tt().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f,h=this;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.ki();case 2:t=e.sent,n=T(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.fs){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(Kx(this.persistenceKey,i)))&&(o=Yx.Es(i,a))&&(this.ys=this.ys.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this.xs(),(u=this.storage.getItem(this.Fs))&&(s=this.Os(u))&&this.Ns(s),c=T(this.ws);try{for(c.s();!(l=c.n()).done;)f=l.value,this.ps(f)}catch(d){c.e(d)}finally{c.f()}this.ws=[],this.window.addEventListener("pagehide",(function(){return h.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.bs,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.Bs(this.ys)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.ys.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.Ls(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.Ls(e,t,n),this.ks(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(Hx(this.persistenceKey,e));if(n){var r=Qx.Es(e,n);r&&(t=r.state)}}return this.qs.Rs(e),this.xs(),t}},{key:"removeLocalQueryTarget",value:function(e){this.qs.Vs(e),this.xs()}},{key:"isLocalQueryTarget",value:function(e){return this.qs.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(Hx(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.Qs(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.ks(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.Ks(e)}},{key:"notifyBundleLoaded",value:function(e){this.$s(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.gs),this.removeItem(this.Ss),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return pv("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){pv("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){pv("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"ps",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(pv("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Ss)return void vv("Received WebStorage notification for local change. Another client might have garbage-collected our state");this._i.enqueueRetryable(Nt(Tt().mark((function e(){var r,i,a,o,u,s,c;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.Ds.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.Us(n.key),e.abrupt("return",t.Ws(r,null));case 6:if(!(i=t.Gs(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.Ws(i.clientId,i));case 9:e.next=41;break;case 11:if(!t.Cs.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.zs(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.js(a));case 16:e.next=41;break;case 18:if(!t.vs.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.Hs(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.Js(o));case 23:e.next=41;break;case 25:if(n.key!==t.Fs){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(u=t.Os(n.newValue))){e.next=30;break}return e.abrupt("return",t.Ns(u));case 30:e.next=41;break;case 32:if(n.key!==t.bs){e.next=37;break}s=function(e){var t=vm.ae;if(null!=e)try{var n=JSON.parse(e);kv("number"==typeof n),t=n}catch(e){vv("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),s!==vm.ae&&t.sequenceNumberHandler(s),e.next=41;break;case 37:if(n.key!==t.Ms){e.next=41;break}return c=t.Ys(n.newValue),e.next=41,Promise.all(c.map((function(e){return t.syncEngine.Zs(e)})));case 41:e.next=44;break;case 43:t.ws.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"qs",get:function(){return this.ys.get(this.fs)}},{key:"xs",value:function(){this.setItem(this.Ss,this.qs.As())}},{key:"Ls",value:function(e,t,n){var r=new Wx(this.currentUser,e,t,n),i=Gx(this.persistenceKey,this.currentUser,e);this.setItem(i,r.As())}},{key:"ks",value:function(e){var t=Gx(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"Ks",value:function(e){var t={clientId:this.fs,onlineState:e};this.storage.setItem(this.Fs,JSON.stringify(t))}},{key:"Qs",value:function(e,t,n){var r=Hx(this.persistenceKey,e),i=new Qx(e,t,n);this.setItem(r,i.As())}},{key:"$s",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this.Ms,t)}},{key:"Us",value:function(e){var t=this.Ds.exec(e);return t?t[1]:null}},{key:"Gs",value:function(e,t){var n=this.Us(e);return Yx.Es(n,t)}},{key:"zs",value:function(e,t){var n=this.Cs.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Wx.Es(new lv(i),r,t)}},{key:"Hs",value:function(e,t){var n=this.vs.exec(e),r=Number(n[1]);return Qx.Es(r,t)}},{key:"Os",value:function(e){return $x.Es(e)}},{key:"Ys",value:function(e){return JSON.parse(e)}},{key:"js",value:function(){var e=Nt(Tt().mark((function e(t){return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.Xs(t.batchId,t.state,t.error));case 2:pv("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Js",value:function(e){return this.syncEngine.eo(e.targetId,e.state,e.error)}},{key:"Ws",value:function(e,t){var n=this,r=t?this.ys.insert(e,t):this.ys.remove(e),i=this.Bs(this.ys),a=this.Bs(r),o=[],u=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||u.push(e)})),this.syncEngine.no(o,u).then((function(){n.ys=r}))}},{key:"Ns",value:function(e){this.ys.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"Bs",value:function(e){var t=Yg();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"C",value:function(e){return!(!e||!e.localStorage)}}]),e}(),Zx=function(){function e(){d(this,e),this.ro=new Xx,this.io={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return y(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.ro.Rs(e),this.io[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.io[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.ro.Vs(e)}},{key:"isLocalQueryTarget",value:function(e){return this.ro.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.io[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.ro.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.ro.activeTargetIds.has(e)}},{key:"start",value:function(){return this.ro=new Xx,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),e_=function(){function e(){d(this,e)}return y(e,[{key:"so",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),t_=function(){function e(){var t=this;d(this,e),this.oo=function(){return t._o()},this.ao=function(){return t.uo()},this.co=[],this.lo()}return y(e,[{key:"so",value:function(e){this.co.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.oo),window.removeEventListener("offline",this.ao)}},{key:"lo",value:function(){window.addEventListener("online",this.oo),window.addEventListener("offline",this.ao)}},{key:"_o",value:function(){pv("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=T(this.co);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"uo",value:function(){pv("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=T(this.co);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"C",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),n_=null;function r_(){return null===n_?n_=268435456+Math.round(2147483648*Math.random()):n_++,"0x"+n_.toString(16)}var i_={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},a_=function(){function e(t){d(this,e),this.ho=t.ho,this.Po=t.Po}return y(e,[{key:"Io",value:function(e){this.To=e}},{key:"Eo",value:function(e){this.Ao=e}},{key:"onMessage",value:function(e){this.Ro=e}},{key:"close",value:function(){this.Po()}},{key:"send",value:function(e){this.ho(e)}},{key:"Vo",value:function(){this.To()}},{key:"mo",value:function(e){this.Ao(e)}},{key:"fo",value:function(e){this.Ro(e)}}]),e}(),o_="WebChannelConnection",u_=function(e){k(n,e);var t=_(n);function n(e){var r;return d(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r.longPollingOptions=e.longPollingOptions,r}return y(n,[{key:"vo",value:function(e,t,n,r){var i=r_();return new Promise((function(a,o){var u=new ov;u.setWithCredentials(!0),u.listenOnce(nv.COMPLETE,(function(){try{switch(u.getLastErrorCode()){case tv.NO_ERROR:var t=u.getResponseJson();pv(o_,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),a(t);break;case tv.TIMEOUT:pv(o_,"RPC '".concat(e,"' ").concat(i," timed out")),o(new xv(bv.DEADLINE_EXCEEDED,"Request time out"));break;case tv.HTTP_ERROR:var n=u.getStatus();if(pv(o_,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",u.getResponseText()),n>0){var r=u.getResponseJson();Array.isArray(r)&&(r=r[0]);var s=null==r?void 0:r.error;if(s&&s.status&&s.message){var c=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(bv).indexOf(t)>=0?t:bv.UNKNOWN}(s.status);o(new xv(c,s.message))}else o(new xv(bv.UNKNOWN,"Server responded with status "+u.getStatus()))}else o(new xv(bv.UNAVAILABLE,"Connection failed."));break;default:gv()}}finally{pv(o_,"RPC '".concat(e,"' ").concat(i," completed."))}}));var s=JSON.stringify(r);pv(o_,"RPC '".concat(e,"' ").concat(i," sending request:"),r),u.send(t,"POST",s,n,15)}))}},{key:"Mo",value:function(e,t,n){var r=r_(),i=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=Zp(),o=ev(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},s=this.longPollingOptions.timeoutSeconds;void 0!==s&&(u.longPollingTimeout=Math.round(1e3*s)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Co(u.initMessageHeaders,t,n),u.encodeInitMessageHeaders=!0;var c=i.join("");pv(o_,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),u);var l=a.createWebChannel(c,u),f=!1,h=!1,d=new a_({ho:function(t){h?pv(o_,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(f||(pv(o_,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),l.open(),f=!0),pv(o_,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),l.send(t))},Po:function(){return l.close()}}),p=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return p(l,av.EventType.OPEN,(function(){h||pv(o_,"RPC '".concat(e,"' stream ").concat(r," transport opened."))})),p(l,av.EventType.CLOSE,(function(){h||(h=!0,pv(o_,"RPC '".concat(e,"' stream ").concat(r," transport closed")),d.mo())})),p(l,av.EventType.ERROR,(function(t){h||(h=!0,mv(o_,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),d.mo(new xv(bv.UNAVAILABLE,"The operation could not be completed")))})),p(l,av.EventType.MESSAGE,(function(t){var n;if(!h){var i=t.data[0];kv(!!i);var a=i,o=a.error||(null===(n=a[0])||void 0===n?void 0:n.error);if(o){pv(o_,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);var u=o.status,s=function(e){var t=Sk[e];if(void 0!==t)return Lk(t)}(u),c=o.message;void 0===s&&(s=bv.INTERNAL,c="Unknown error status: "+u+" with message "+o.message),h=!0,d.mo(new xv(s,c)),l.close()}else pv(o_,"RPC '".concat(e,"' stream ").concat(r," received:"),i),d.fo(i)}})),p(o,rv.STAT_EVENT,(function(t){t.stat===iv.PROXY?pv(o_,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===iv.NOPROXY&&pv(o_,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((function(){d.Vo()}),0),d}}]),n}(function(){function e(t){d(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.po=n+"://"+t.host,this.yo="projects/".concat(r,"/databases/").concat(i),this.wo="(default)"===this.databaseId.database?"project_id=".concat(r):"project_id=".concat(r,"&database_id=").concat(i)}return y(e,[{key:"So",get:function(){return!1}},{key:"bo",value:function(e,t,n,r,i){var a=r_(),o=this.Do(e,t);pv("RestConnection","Sending RPC '".concat(e,"' ").concat(a,":"),o,n);var u={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Co(u,r,i),this.vo(e,o,u,n).then((function(t){return pv("RestConnection","Received RPC '".concat(e,"' ").concat(a,": "),t),t}),(function(t){throw mv("RestConnection","RPC '".concat(e,"' ").concat(a," failed with error: "),t,"url: ",o,"request:",n),t}))}},{key:"Fo",value:function(e,t,n,r,i,a){return this.bo(e,t,n,r,i)}},{key:"Co",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+fv,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"Do",value:function(e,t){var n=i_[e];return"".concat(this.po,"/v1/").concat(t,":").concat(n)}}]),e}());function s_(){return"undefined"!=typeof window?window:null}function c_(){return"undefined"!=typeof document?document:null}function l_(e){return new tw(e,!0)}var f_=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;d(this,e),this._i=t,this.timerId=n,this.xo=r,this.Oo=i,this.No=a,this.Bo=0,this.Lo=null,this.ko=Date.now(),this.reset()}return y(e,[{key:"reset",value:function(){this.Bo=0}},{key:"qo",value:function(){this.Bo=this.No}},{key:"Qo",value:function(e){var t=this;this.cancel();var n=Math.floor(this.Bo+this.Ko()),r=Math.max(0,Date.now()-this.ko),i=Math.max(0,n-r);i>0&&pv("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.Bo," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.Lo=this._i.enqueueAfterDelay(this.timerId,i,(function(){return t.ko=Date.now(),e()})),this.Bo*=this.Oo,this.Bo<this.xo&&(this.Bo=this.xo),this.Bo>this.No&&(this.Bo=this.No)}},{key:"$o",value:function(){null!==this.Lo&&(this.Lo.skipDelay(),this.Lo=null)}},{key:"cancel",value:function(){null!==this.Lo&&(this.Lo.cancel(),this.Lo=null)}},{key:"Ko",value:function(){return(Math.random()-.5)*this.Bo}}]),e}(),h_=function(){function e(t,n,r,i,a,o,u,s){d(this,e),this._i=t,this.Uo=r,this.Wo=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=s,this.state=0,this.Go=0,this.zo=null,this.jo=null,this.stream=null,this.Ho=new f_(t,n)}return y(e,[{key:"Jo",value:function(){return 1===this.state||5===this.state||this.Yo()}},{key:"Yo",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.Zo()}},{key:"stop",value:function(){var e=Nt(Tt().mark((function e(){return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.Jo(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Xo",value:function(){this.state=0,this.Ho.reset()}},{key:"e_",value:function(){var e=this;this.Yo()&&null===this.zo&&(this.zo=this._i.enqueueAfterDelay(this.Uo,6e4,(function(){return e.t_()})))}},{key:"n_",value:function(e){this.r_(),this.stream.send(e)}},{key:"t_",value:function(){var e=Nt(Tt().mark((function e(){return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.Yo()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"r_",value:function(){this.zo&&(this.zo.cancel(),this.zo=null)}},{key:"i_",value:function(){this.jo&&(this.jo.cancel(),this.jo=null)}},{key:"close",value:function(){var e=Nt(Tt().mark((function e(t,n){return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.r_(),this.i_(),this.Ho.cancel(),this.Go++,4!==t?this.Ho.reset():n&&n.code===bv.RESOURCE_EXHAUSTED?(vv(n.toString()),vv("Using maximum backoff delay to prevent overloading the backend."),this.Ho.qo()):n&&n.code===bv.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.s_(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.Eo(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"s_",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.o_(this.Go),n=this.Go;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=l(t,2),i=r[0],a=r[1];e.Go===n&&e.__(i,a)}),(function(n){t((function(){var t=new xv(bv.UNKNOWN,"Fetching auth token failed: "+n.message);return e.a_(t)}))}))}},{key:"__",value:function(e,t){var n=this,r=this.o_(this.Go);this.stream=this.u_(e,t),this.stream.Io((function(){r((function(){return n.state=2,n.jo=n._i.enqueueAfterDelay(n.Wo,1e4,(function(){return n.Yo()&&(n.state=3),Promise.resolve()})),n.listener.Io()}))})),this.stream.Eo((function(e){r((function(){return n.a_(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"Zo",value:function(){var e=this;this.state=5,this.Ho.Qo(Nt(Tt().mark((function t(){return Tt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"a_",value:function(e){return pv("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"o_",value:function(e){var t=this;return function(n){t._i.enqueueAndForget((function(){return t.Go===e?n():(pv("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),d_=function(e){k(n,e);var t=_(n);function n(e,r,i,a,o,u){var s;return d(this,n),(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,u)).serializer=o,s}return y(n,[{key:"u_",value:function(e,t){return this.connection.Mo("Listen",e,t)}},{key:"onMessage",value:function(e){this.Ho.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:gv()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.useProto3Json?(kv(void 0===t||"string"==typeof t),ay.fromBase64String(t||"")):(kv(void 0===t||t instanceof Uint8Array),ay.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(e){var t=void 0===e.code?bv.UNKNOWN:Lk(e.code);return new xv(t,e.message||"")}(o);n=new Wk(r,i,a,u||null)}else if("documentChange"in t){t.documentChange;var s=t.documentChange;s.document,s.document.name,s.document.updateTime;var c=lw(e,s.document.name),l=ow(s.document.updateTime),f=s.document.createTime?ow(s.document.createTime):Uv.min(),h=new My({mapValue:{fields:s.document.fields}}),d=Uy.newFoundDocument(c,l,f,h),p=s.targetIds||[],v=s.removedTargetIds||[];n=new Gk(p,v,d.key,d)}else if("documentDelete"in t){t.documentDelete;var m=t.documentDelete;m.document;var y=lw(e,m.document),g=m.readTime?ow(m.readTime):Uv.min(),k=Uy.newNoDocument(y,g),w=m.removedTargetIds||[];n=new Gk([],w,k.key,k)}else if("documentRemove"in t){t.documentRemove;var b=t.documentRemove;b.document;var x=lw(e,b.document),_=b.removedTargetIds||[];n=new Gk([],_,x,null)}else{if(!("filter"in t))return gv();t.filter;var I=t.filter;I.targetId;var E=I.count,S=void 0===E?0:E,T=I.unchangedNames,C=new Dk(S,T),N=I.targetId;n=new Hk(N,C)}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Uv.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?Uv.min():t.readTime?ow(t.readTime):Uv.min()}(e);return this.listener.c_(t,n)}},{key:"l_",value:function(e){var t={};t.database=dw(this.serializer),t.addTarget=function(e,t){var n,r=t.target;if((n=dg(r)?{documents:ww(e,r)}:{query:bw(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=iw(e,t.resumeToken);var i=nw(e,t.expectedCount);null!==i&&(n.expectedCount=i)}else if(t.snapshotVersion.compareTo(Uv.min())>0){n.readTime=rw(e,t.snapshotVersion.toTimestamp());var a=nw(e,t.expectedCount);null!==a&&(n.expectedCount=a)}return n}(this.serializer,e);var n=function(e,t){var n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return gv()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.n_(t)}},{key:"h_",value:function(e){var t={};t.database=dw(this.serializer),t.removeTarget=e,this.n_(t)}}]),n}(h_),p_=function(e){k(n,e);var t=_(n);function n(e,r,i,a,o,u){var s;return d(this,n),(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,u)).serializer=o,s.P_=!1,s}return y(n,[{key:"I_",get:function(){return this.P_}},{key:"start",value:function(){this.P_=!1,this.lastStreamToken=void 0,or(w(n.prototype),"start",this).call(this)}},{key:"s_",value:function(){this.P_&&this.d_([])}},{key:"u_",value:function(e,t){return this.connection.Mo("Write",e,t)}},{key:"onMessage",value:function(e){if(kv(!!e.streamToken),this.lastStreamToken=e.streamToken,this.P_){this.Ho.reset();var t=function(e,t){return e&&e.length>0?(kv(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?ow(e.updateTime):ow(t);return n.isEqual(Uv.min())&&(n=ow(t)),new hk(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=ow(e.commitTime);return this.listener.T_(n,t)}return kv(!e.writeResults||0===e.writeResults.length),this.P_=!0,this.listener.E_()}},{key:"A_",value:function(){var e={};e.database=dw(this.serializer),this.n_(e)}},{key:"d_",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return gw(t.serializer,e)}))};this.n_(n)}}]),n}(h_),v_=function(e){k(n,e);var t=_(n);function n(e,r,i,a){var o;return d(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.connection=i,o.serializer=a,o.R_=!1,o}return y(n,[{key:"V_",value:function(){if(this.R_)throw new xv(bv.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"bo",value:function(e,t,n){var r=this;return this.V_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=l(i,2),o=a[0],u=a[1];return r.connection.bo(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===bv.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new xv(bv.UNKNOWN,e.toString())}))}},{key:"Fo",value:function(e,t,n,r){var i=this;return this.V_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var o=l(a,2),u=o[0],s=o[1];return i.connection.Fo(e,t,n,u,s,r)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===bv.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new xv(bv.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.R_=!0}}]),n}(y((function e(){d(this,e)})));var m_=function(){function e(t,n){d(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.f_=0,this.g_=null,this.p_=!0}return y(e,[{key:"y_",value:function(){var e=this;0===this.f_&&(this.w_("Unknown"),this.g_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.g_=null,e.S_("Backend didn't respond within 10 seconds."),e.w_("Offline"),Promise.resolve()})))}},{key:"b_",value:function(e){"Online"===this.state?this.w_("Unknown"):(this.f_++,this.f_>=1&&(this.D_(),this.S_("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.w_("Offline")))}},{key:"set",value:function(e){this.D_(),this.f_=0,"Online"===e&&(this.p_=!1),this.w_(e)}},{key:"w_",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"S_",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.p_?(vv(t),this.p_=!1):pv("OnlineStateTracker",t)}},{key:"D_",value:function(){null!==this.g_&&(this.g_.cancel(),this.g_=null)}}]),e}(),y_=y((function e(t,n,r,i,a){var o=this;d(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.C_=[],this.v_=new Map,this.F_=new Set,this.M_=[],this.x_=a,this.x_.so((function(e){r.enqueueAndForget(Nt(Tt().mark((function e(){return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=C_(o),!e.t0){e.next=5;break}return pv("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=Nt(Tt().mark((function e(t){var n;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=wv(t)).F_.add(4),e.next=4,w_(n);case 4:return n.O_.set("Unknown"),n.F_.delete(4),e.next=8,g_(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this.O_=new m_(r,i)}));function g_(e){return k_.apply(this,arguments)}function k_(){return(k_=Nt(Tt().mark((function e(t){var n,r,i;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!C_(t)){e.next=18;break}n=T(t.M_),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])})))).apply(this,arguments)}function w_(e){return b_.apply(this,arguments)}function b_(){return(b_=Nt(Tt().mark((function e(t){var n,r,i;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=T(t.M_),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])})))).apply(this,arguments)}function x_(e,t){var n=wv(e);n.v_.has(t.targetId)||(n.v_.set(t.targetId,t),T_(n)?S_(n):rI(n).Yo()&&I_(n,t))}function __(e,t){var n=wv(e),r=rI(n);n.v_.delete(t),r.Yo()&&E_(n,t),0===n.v_.size&&(r.Yo()?r.e_():C_(n)&&n.O_.set("Unknown"))}function I_(e,t){if(e.N_.Le(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Uv.min())>0){var n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}rI(e).l_(t)}function E_(e,t){e.N_.Le(t),rI(e).h_(t)}function S_(e){e.N_=new Yk({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},lt:function(t){return e.v_.get(t)||null},st:function(){return e.datastore.serializer.databaseId}}),rI(e).start(),e.O_.y_()}function T_(e){return C_(e)&&!rI(e).Jo()&&e.v_.size>0}function C_(e){return 0===wv(e).F_.size}function N_(e){e.N_=void 0}function A_(e){return P_.apply(this,arguments)}function P_(){return(P_=Nt(Tt().mark((function e(t){return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.v_.forEach((function(e,n){I_(t,e)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R_(e,t){return D_.apply(this,arguments)}function D_(){return(D_=Nt(Tt().mark((function e(t,n){return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:N_(t),T_(t)?(t.O_.b_(n),S_(t)):t.O_.set("Unknown");case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O_(e,t,n){return L_.apply(this,arguments)}function L_(){return L_=Nt(Tt().mark((function e(t,n,r){var i;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.O_.set("Online"),!(n instanceof Wk&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=Nt(Tt().mark((function e(t,n){var r,i,a,o;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=T(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.v_.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.v_.delete(o),t.N_.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),pv("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,M_(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof Gk?t.N_.Ge(n):n instanceof Hk?t.N_.Xe(n):t.N_.He(n),r.isEqual(Uv.min())){e.next=29;break}return e.prev=14,e.next=17,Nx(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.N_._t(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.v_.get(r);i&&e.v_.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t,n){var r=e.v_.get(t);if(r){e.v_.set(t,r.withResumeToken(ay.EMPTY_BYTE_STRING,r.snapshotVersion)),E_(e,t);var i=new Rw(r.target,t,n,r.sequenceNumber);I_(e,i)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),pv("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,M_(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),L_.apply(this,arguments)}function M_(e,t,n){return F_.apply(this,arguments)}function F_(){return(F_=Nt(Tt().mark((function e(t,n,r){return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(sm(n)){e.next=2;break}throw n;case 2:return t.F_.add(1),e.next=5,w_(t);case 5:t.O_.set("Offline"),r||(r=function(){return Nx(t.localStore)}),t.asyncQueue.enqueueRetryable(Nt(Tt().mark((function e(){return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return pv("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.F_.delete(1),e.next=6,g_(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U_(e,t){return t().catch((function(n){return M_(e,n,t)}))}function V_(e){return j_.apply(this,arguments)}function j_(){return j_=Nt(Tt().mark((function e(t){var n,r,i,a;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=wv(t),r=iI(n),i=n.C_.length>0?n.C_[n.C_.length-1].batchId:-1;case 2:if(!z_(n)){e.next=19;break}return e.prev=3,e.next=6,Rx(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.C_.length&&r.e_(),e.abrupt("break",19);case 10:i=a.batchId,B_(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,M_(n,e.t0);case 17:e.next=2;break;case 19:q_(n)&&K_(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),j_.apply(this,arguments)}function z_(e){return C_(e)&&e.C_.length<10}function B_(e,t){e.C_.push(t);var n=iI(e);n.Yo()&&n.I_&&n.d_(t.mutations)}function q_(e){return C_(e)&&!iI(e).Jo()&&e.C_.length>0}function K_(e){iI(e).start()}function G_(e){return H_.apply(this,arguments)}function H_(){return(H_=Nt(Tt().mark((function e(t){return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:iI(t).A_();case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function W_(e){return Q_.apply(this,arguments)}function Q_(){return(Q_=Nt(Tt().mark((function e(t){var n,r,i,a;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=iI(t),r=T(t.C_);try{for(r.s();!(i=r.n()).done;)a=i.value,n.d_(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Y_(e,t,n){return $_.apply(this,arguments)}function $_(){return $_=Nt(Tt().mark((function e(t,n,r){var i,a;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.C_.shift(),a=Pk.from(i,n,r),e.next=3,U_(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,V_(t);case 5:case"end":return e.stop()}}),e)}))),$_.apply(this,arguments)}function X_(e,t){return J_.apply(this,arguments)}function J_(){return J_=Nt(Tt().mark((function e(t,n){return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&iI(t).I_,!e.t0){e.next=4;break}return e.next=4,function(){var e=Nt(Tt().mark((function e(t,n){var r;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!function(e){return Ok(e)&&e!==bv.ABORTED}(n.code)){e.next=7;break}return r=t.C_.shift(),iI(t).Xo(),e.next=5,U_(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,V_(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:q_(t)&&K_(t);case 5:case"end":return e.stop()}}),e)}))),J_.apply(this,arguments)}function Z_(e,t){return eI.apply(this,arguments)}function eI(){return eI=Nt(Tt().mark((function e(t,n){var r,i;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=wv(t)).asyncQueue.verifyOperationInProgress(),pv("RemoteStore","RemoteStore received new credentials"),i=C_(r),r.F_.add(3),e.next=6,w_(r);case 6:return i&&r.O_.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.F_.delete(3),e.next=12,g_(r);case 12:case"end":return e.stop()}}),e)}))),eI.apply(this,arguments)}function tI(e,t){return nI.apply(this,arguments)}function nI(){return(nI=Nt(Tt().mark((function e(t,n){var r;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=wv(t),!n){e.next=7;break}return r.F_.delete(2),e.next=5,g_(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.F_.add(2),e.next=12,w_(r);case 12:r.O_.set("Unknown");case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function rI(e){return e.B_||(e.B_=function(e,t,n){var r=wv(e);return r.V_(),new d_(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Io:A_.bind(null,e),Eo:R_.bind(null,e),c_:O_.bind(null,e)}),e.M_.push(function(){var t=Nt(Tt().mark((function t(n){return Tt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.B_.Xo(),T_(e)?S_(e):e.O_.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.B_.stop();case 6:N_(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.B_}function iI(e){return e.L_||(e.L_=function(e,t,n){var r=wv(e);return r.V_(),new p_(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Io:G_.bind(null,e),Eo:X_.bind(null,e),E_:W_.bind(null,e),T_:Y_.bind(null,e)}),e.M_.push(function(){var t=Nt(Tt().mark((function t(n){return Tt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.L_.Xo(),t.next=4,V_(e);case 4:t.next=9;break;case 6:return t.next=8,e.L_.stop();case 8:e.C_.length>0&&(pv("RemoteStore","Stopping write stream with ".concat(e.C_.length," pending writes")),e.C_=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.L_}var aI=function(){function e(t,n,r,i,a){d(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new _v,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return y(e,[{key:"promise",get:function(){return this.deferred.promise}},{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new xv(bv.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function oI(e,t){if(vv("AsyncQueue","".concat(t,": ").concat(e)),sm(e))return new xv(bv.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var uI=function(){function e(t){d(this,e),this.comparator=t?function(e,n){return t(e,n)||qv.comparator(e.key,n.key)}:function(e,t){return qv.comparator(e.key,t.key)},this.keyedMap=jg(),this.sortedSet=new Xm(this.comparator)}return y(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),sI=function(){function e(){d(this,e),this.k_=new Xm(qv.comparator)}return y(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.k_.get(t);n?0!==e.type&&3===n.type?this.k_=this.k_.insert(t,e):3===e.type&&1!==n.type?this.k_=this.k_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.k_=this.k_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.k_=this.k_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.k_=this.k_.remove(t):1===e.type&&2===n.type?this.k_=this.k_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.k_=this.k_.insert(t,{type:2,doc:e.doc}):gv():this.k_=this.k_.insert(t,e)}},{key:"q_",value:function(){var e=[];return this.k_.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),cI=function(){function e(t,n,r,i,a,o,u,s,c){d(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=s,this.hasCachedResults=c}return y(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ng(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i,a){var o=[];return n.forEach((function(e){o.push({type:0,doc:e})})),new e(t,n,uI.emptySet(n),o,r,i,!0,!1,a)}}]),e}(),lI=y((function e(){d(this,e),this.Q_=void 0,this.listeners=[]})),fI=y((function e(){d(this,e),this.queries=new Mg((function(e){return Ag(e)}),Ng),this.onlineState="Unknown",this.K_=new Set}));function hI(e,t){return dI.apply(this,arguments)}function dI(){return dI=Nt(Tt().mark((function e(t,n){var r,i,a,o,u;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=wv(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new lI),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.Q_=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),u=oI(e.t0,"Initialization of query '".concat(Pg(n.query),"' failed")),e.abrupt("return",void n.onError(u));case 13:r.queries.set(i,o),o.listeners.push(n),n.U_(r.onlineState),o.Q_&&n.W_(o.Q_)&&gI(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),dI.apply(this,arguments)}function pI(e,t){return vI.apply(this,arguments)}function vI(){return vI=Nt(Tt().mark((function e(t,n){var r,i,a,o,u;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=wv(t),i=n.query,a=!1,(o=r.queries.get(i))&&(u=o.listeners.indexOf(n))>=0&&(o.listeners.splice(u,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),vI.apply(this,arguments)}function mI(e,t){var n,r=wv(e),i=!1,a=T(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=o.query,s=r.queries.get(u);if(s){var c,l=T(s.listeners);try{for(l.s();!(c=l.n()).done;){c.value.W_(o)&&(i=!0)}}catch(f){l.e(f)}finally{l.f()}s.Q_=o}}}catch(f){a.e(f)}finally{a.f()}i&&gI(r)}function yI(e,t,n){var r=wv(e),i=r.queries.get(t);if(i){var a,o=T(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(u){o.e(u)}finally{o.f()}}r.queries.delete(t)}function gI(e){e.K_.forEach((function(e){e.next()}))}var kI=function(){function e(t,n,r){d(this,e),this.query=t,this.G_=n,this.z_=!1,this.j_=null,this.onlineState="Unknown",this.options=r||{}}return y(e,[{key:"W_",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=T(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new cI(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}var a=!1;return this.z_?this.H_(e)&&(this.G_.next(e),a=!0):this.J_(e,this.onlineState)&&(this.Y_(e),a=!0),this.j_=e,a}},{key:"onError",value:function(e){this.G_.error(e)}},{key:"U_",value:function(e){this.onlineState=e;var t=!1;return this.j_&&!this.z_&&this.J_(this.j_,e)&&(this.Y_(this.j_),t=!0),t}},{key:"J_",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.Z_||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}},{key:"H_",value:function(e){if(e.docChanges.length>0)return!0;var t=this.j_&&this.j_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"Y_",value:function(e){e=cI.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.z_=!0,this.G_.next(e)}}]),e}(),wI=function(){function e(t,n){d(this,e),this.X_=t,this.byteLength=n}return y(e,[{key:"ea",value:function(){return"metadata"in this.X_}}]),e}(),bI=function(){function e(t){d(this,e),this.serializer=t}return y(e,[{key:"Is",value:function(e){return lw(this.serializer,e)}},{key:"ds",value:function(e){return e.metadata.exists?mw(this.serializer,e.document,!1):Uy.newNoDocument(this.Is(e.metadata.name),this.Ts(e.metadata.readTime))}},{key:"Ts",value:function(e){return ow(e)}}]),e}(),xI=function(){function e(t,n,r){d(this,e),this.ta=t,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=_I(t)}return y(e,[{key:"na",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.X_.namedQuery)this.queries.push(e.X_.namedQuery);else if(e.X_.documentMetadata){this.documents.push({metadata:e.X_.documentMetadata}),e.X_.documentMetadata.exists||++t;var n=jv.fromString(e.X_.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.X_.document&&(this.documents[this.documents.length-1].document=e.X_.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"ra",value:function(e){var t,n=new Map,r=new bI(this.serializer),i=T(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,u=r.Is(a.metadata.name),s=T(a.metadata.queries);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=(n.get(c)||Wg()).add(u);n.set(c,l)}}catch(f){s.e(f)}finally{s.f()}}}}catch(f){i.e(f)}finally{i.f()}return n}},{key:"complete",value:function(){var e=Nt(Tt().mark((function e(){var t,n,r,i,a;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,jx(this.localStore,new bI(this.serializer),this.documents,this.ta.id);case 2:t=e.sent,n=this.ra(this.documents),r=T(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,Bx(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,ia:this.collectionGroups,sa:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function _I(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var II=y((function e(t){d(this,e),this.key=t})),EI=y((function e(t){d(this,e),this.key=t})),SI=function(){function e(t,n){d(this,e),this.query=t,this.oa=n,this._a=null,this.hasCachedResults=!1,this.current=!1,this.aa=Wg(),this.mutatedKeys=Wg(),this.ua=Og(t),this.ca=new uI(this.ua)}return y(e,[{key:"la",get:function(){return this.oa}},{key:"ha",value:function(e,t){var n=this,r=t?t.Pa:new sI,i=t?t.ca:this.ca,a=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,s="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=Rg(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),p=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),p=!0):n.Ia(l,f)||(r.track({type:2,doc:f}),p=!0,(s&&n.ua(f,s)>0||c&&n.ua(f,c)<0)&&(u=!0)):!l&&f?(r.track({type:0,doc:f}),p=!0):l&&!f&&(r.track({type:1,doc:l}),p=!0,(s||c)&&(u=!0)),p&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{ca:o,Pa:r,es:u,mutatedKeys:a}}},{key:"Ia",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.ca;this.ca=e.ca,this.mutatedKeys=e.mutatedKeys;var a=e.Pa.q_();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return gv()}};return n(e)-n(t)}(e.type,t.type)||r.ua(e.doc,t.doc)})),this.da(n);var o=t?this.Ta():[],u=0===this.aa.size&&this.current?1:0,s=u!==this._a;return this._a=u,0!==a.length||s?{snapshot:new cI(this.query,e.ca,i,a,e.mutatedKeys,0===u,s,!1,!!n&&n.resumeToken.approximateByteSize()>0),Ea:o}:{Ea:o}}},{key:"U_",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ca:this.ca,Pa:new sI,mutatedKeys:this.mutatedKeys,es:!1},!1)):{Ea:[]}}},{key:"Aa",value:function(e){return!this.oa.has(e)&&!!this.ca.has(e)&&!this.ca.get(e).hasLocalMutations}},{key:"da",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.oa=t.oa.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.oa=t.oa.delete(e)})),this.current=e.current)}},{key:"Ta",value:function(){var e=this;if(!this.current)return[];var t=this.aa;this.aa=Wg(),this.ca.forEach((function(t){e.Aa(t.key)&&(e.aa=e.aa.add(t.key))}));var n=[];return t.forEach((function(t){e.aa.has(t)||n.push(new EI(t))})),this.aa.forEach((function(e){t.has(e)||n.push(new II(e))})),n}},{key:"Ra",value:function(e){this.oa=e.Ps,this.aa=Wg();var t=this.ha(e.documents);return this.applyChanges(t,!0)}},{key:"Va",value:function(){return cI.fromInitialDocuments(this.query,this.ca,this.mutatedKeys,0===this._a,this.hasCachedResults)}}]),e}(),TI=y((function e(t,n,r){d(this,e),this.query=t,this.targetId=n,this.view=r})),CI=y((function e(t){d(this,e),this.key=t,this.ma=!1})),NI=function(){function e(t,n,r,i,a,o){d(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.fa={},this.ga=new Mg((function(e){return Ag(e)}),Ng),this.pa=new Map,this.ya=new Set,this.wa=new Xm(qv.comparator),this.Sa=new Map,this.ba=new ax,this.Da={},this.Ca=new Map,this.va=Ob.Ln(),this.onlineState="Unknown",this.Fa=void 0}return y(e,[{key:"isPrimaryClient",get:function(){return!0===this.Fa}}]),e}();function AI(e,t){return PI.apply(this,arguments)}function PI(){return PI=Nt(Tt().mark((function e(t,n){var r,i,a,o,u,s;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=_E(t),!(o=r.ga.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.Va(),e.next=15;break;case 6:return e.next=8,Dx(r.localStore,Eg(n));case 8:return u=e.sent,s=r.sharedClientState.addLocalQueryTarget(u.targetId),i=u.targetId,e.next=13,RI(r,n,i,"current"===s,u.resumeToken);case 13:a=e.sent,r.isPrimaryClient&&x_(r.remoteStore,u);case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),PI.apply(this,arguments)}function RI(e,t,n,r,i){return DI.apply(this,arguments)}function DI(){return DI=Nt(Tt().mark((function e(t,n,r,i,a){var o,u,s,c,l,f;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Ma=function(e,n,r){return function(){var e=Nt(Tt().mark((function e(t,n,r,i){var a,o,u;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.ha(r),e.t0=a.es,!e.t0){e.next=6;break}return e.next=5,Mx(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.ha(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),u=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(ZI(t,n.targetId,u.Ea),u.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,Mx(t.localStore,n,!0);case 3:return o=e.sent,u=new SI(n,o.Ps),s=u.ha(o.documents),c=Kk.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState,a),l=u.applyChanges(s,t.isPrimaryClient,c),ZI(t,r,l.Ea),f=new TI(n,r,u),e.abrupt("return",(t.ga.set(n,f),t.pa.has(r)?t.pa.get(r).push(n):t.pa.set(r,[n]),l.snapshot));case 11:case"end":return e.stop()}}),e)}))),DI.apply(this,arguments)}function OI(e,t){return LI.apply(this,arguments)}function LI(){return LI=Nt(Tt().mark((function e(t,n){var r,i,a;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=wv(t),i=r.ga.get(n),!((a=r.pa.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.pa.set(i.targetId,a.filter((function(e){return!Ng(e,n)}))),void r.ga.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,Ox(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),__(r.remoteStore,i.targetId),XI(r,i.targetId)})).catch(tm);case 9:e.next=14;break;case 11:return XI(r,i.targetId),e.next=14,Ox(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),LI.apply(this,arguments)}function MI(e,t,n){return FI.apply(this,arguments)}function FI(){return FI=Nt(Tt().mark((function e(t,n,r){var i,a,o;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=IE(t),e.prev=1,e.next=4,function(e,t){var n,r,i=wv(e),a=Fv.now(),o=t.reduce((function(e,t){return e.add(t.key)}),Wg());return i.persistence.runTransaction("Locally write mutations","readwrite",(function(e){var u=Ug(),s=Wg();return i._s.getEntries(e,o).next((function(e){(u=e).forEach((function(e,t){t.isValidDocument()||(s=s.add(e))}))})).next((function(){return i.localDocuments.getOverlayedDocuments(e,u)})).next((function(r){n=r;var o,u=[],s=T(t);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=kk(c,n.get(c.key).overlayedDocument);null!=l&&u.push(new xk(c.key,l,Fy(l.value.mapValue),dk.exists(!0)))}}catch(f){s.e(f)}finally{s.f()}return i.mutationQueue.addMutationBatch(e,a,u,t)})).next((function(t){r=t;var a=t.applyToLocalDocumentSet(n,s);return i.documentOverlayCache.saveOverlays(e,t.batchId,a)}))})).then((function(){return{batchId:r.batchId,changes:zg(n)}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.Da[e.currentUser.toKey()];r||(r=new Xm(Ov)),r=r.insert(t,n),e.Da[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,nE(i,a.changes);case 9:return e.next=11,V_(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=oI(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),FI.apply(this,arguments)}function UI(e,t){return VI.apply(this,arguments)}function VI(){return VI=Nt(Tt().mark((function e(t,n){var r,i;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=wv(t),e.prev=1,e.next=4,Ax(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.Sa.get(t);n&&(kv(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.ma=!0:e.modifiedDocuments.size>0?kv(n.ma):e.removedDocuments.size>0&&(kv(n.ma),n.ma=!1))})),e.next=8,nE(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,tm(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),VI.apply(this,arguments)}function jI(e,t,n){var r=wv(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.ga.forEach((function(e,n){var r=n.view.U_(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=wv(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=T(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.U_(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&gI(n)}(r.eventManager,t),i.length&&r.fa.c_(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function zI(e,t,n){return BI.apply(this,arguments)}function BI(){return BI=Nt(Tt().mark((function e(t,n,r){var i,a,o,u,s,c;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=wv(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.Sa.get(n),!(o=a&&a.key)){e.next=14;break}return u=(u=new Xm(qv.comparator)).insert(o,Uy.newNoDocument(o,Uv.min())),s=Wg().add(o),c=new qk(Uv.min(),new Map,new Xm(Ov),u,s),e.next=9,UI(i,c);case 9:i.wa=i.wa.remove(o),i.Sa.delete(n),tE(i),e.next=16;break;case 14:return e.next=16,Ox(i.localStore,n,!1).then((function(){return XI(i,n,r)})).catch(tm);case 16:case"end":return e.stop()}}),e)}))),BI.apply(this,arguments)}function qI(e,t){return KI.apply(this,arguments)}function KI(){return KI=Nt(Tt().mark((function e(t,n){var r,i,a;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=wv(t),i=n.batch.batchId,e.prev=1,e.next=4,Cx(r.localStore,n);case 4:return a=e.sent,$I(r,i,null),YI(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,nE(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,tm(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),KI.apply(this,arguments)}function GI(e,t,n){return HI.apply(this,arguments)}function HI(){return HI=Nt(Tt().mark((function e(t,n,r){var i,a;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=wv(t),e.prev=1,e.next=4,function(e,t){var n=wv(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.mutationQueue.lookupMutationBatch(e,t).next((function(t){return kv(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,$I(i,n,r),YI(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,nE(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,tm(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),HI.apply(this,arguments)}function WI(e,t){return QI.apply(this,arguments)}function QI(){return QI=Nt(Tt().mark((function e(t,n){var r,i,a,o;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C_((r=wv(t)).remoteStore)||pv("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=wv(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.mutationQueue.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.Ca.get(i)||[]).push(n),r.Ca.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=oI(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),QI.apply(this,arguments)}function YI(e,t){(e.Ca.get(t)||[]).forEach((function(e){e.resolve()})),e.Ca.delete(t)}function $I(e,t,n){var r=wv(e),i=r.Da[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.Da[r.currentUser.toKey()]=i}}function XI(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=T(e.pa.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.ga.delete(a),n&&e.fa.xa(a,n)}}catch(o){i.e(o)}finally{i.f()}e.pa.delete(t),e.isPrimaryClient&&e.ba.mr(t).forEach((function(t){e.ba.containsKey(t)||JI(e,t)}))}function JI(e,t){e.ya.delete(t.path.canonicalString());var n=e.wa.get(t);null!==n&&(__(e.remoteStore,n),e.wa=e.wa.remove(t),e.Sa.delete(n),tE(e))}function ZI(e,t,n){var r,i=T(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof II?(e.ba.addReference(a.key,t),eE(e,a)):a instanceof EI?(pv("SyncEngine","Document no longer in limbo: "+a.key),e.ba.removeReference(a.key,t),e.ba.containsKey(a.key)||JI(e,a.key)):gv()}}catch(o){i.e(o)}finally{i.f()}}function eE(e,t){var n=t.key,r=n.path.canonicalString();e.wa.get(n)||e.ya.has(r)||(pv("SyncEngine","New document in limbo: "+n),e.ya.add(r),tE(e))}function tE(e){for(;e.ya.size>0&&e.wa.size<e.maxConcurrentLimboResolutions;){var t=e.ya.values().next().value;e.ya.delete(t);var n=new qv(jv.fromString(t)),r=e.va.next();e.Sa.set(r,new CI(n)),e.wa=e.wa.insert(n,r),x_(e.remoteStore,new Rw(Eg(kg(n.path)),r,"TargetPurposeLimboResolution",vm.ae))}}function nE(e,t,n){return rE.apply(this,arguments)}function rE(){return rE=Nt(Tt().mark((function e(t,n,r){var i,a,o,u;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=wv(t),a=[],o=[],u=[],e.t0=i.ga.isEmpty(),e.t0){e.next=9;break}return i.ga.forEach((function(e,t){u.push(i.Ma(t,n,r).then((function(e){if((e||r)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){a.push(e);var n=bx.$i(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(u);case 6:return i.fa.c_(a),e.next=9,function(){var e=Nt(Tt().mark((function e(t,n){var r,i,a,o,u,s,c,l;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=wv(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return rm.forEach(n,(function(t){return rm.forEach(t.Qi,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return rm.forEach(t.Ki,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),sm(e.t0)){e.next=10;break}throw e.t0;case 10:pv("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=T(n);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.targetId,o.fromCache||(s=r.rs.get(u),c=s.snapshotVersion,l=s.withLastLimboFreeSnapshotVersion(c),r.rs=r.rs.insert(u,l))}catch(f){i.e(f)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),rE.apply(this,arguments)}function iE(e,t){return aE.apply(this,arguments)}function aE(){return(aE=Nt(Tt().mark((function e(t,n){var r,i;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=wv(t)).currentUser.isEqual(n)){e.next=11;break}return pv("SyncEngine","User change. New user:",n.toKey()),e.next=5,Sx(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.Ca.forEach((function(e){e.forEach((function(e){e.reject(new xv(bv.CANCELLED,t))}))})),e.Ca.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,nE(r,i.cs);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function oE(e,t){var n=wv(e),r=n.Sa.get(t);if(r&&r.ma)return Wg().add(r.key);var i=Wg(),a=n.pa.get(t);if(!a)return i;var o,u=T(a);try{for(u.s();!(o=u.n()).done;){var s=o.value,c=n.ga.get(s);i=i.unionWith(c.view.la)}}catch(l){u.e(l)}finally{u.f()}return i}function uE(e,t){return sE.apply(this,arguments)}function sE(){return sE=Nt(Tt().mark((function e(t,n){var r,i,a;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=wv(t),e.next=3,Mx(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.Ra(i),e.abrupt("return",(r.isPrimaryClient&&ZI(r,n.targetId,a.Ea),a));case 6:case"end":return e.stop()}}),e)}))),sE.apply(this,arguments)}function cE(e,t){return lE.apply(this,arguments)}function lE(){return(lE=Nt(Tt().mark((function e(t,n){var r;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=wv(t),e.abrupt("return",Ux(r.localStore,n).then((function(e){return nE(r,e)})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fE(e,t,n,r){return hE.apply(this,arguments)}function hE(){return hE=Nt(Tt().mark((function e(t,n,r,i){var a,o;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=wv(t),e.next=3,function(e,t){var n=wv(e),r=wv(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.Fn(e,t).next((function(t){return t?n.localDocuments.getDocuments(e,t):rm.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,V_(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?($I(a,n,i||null),YI(a,n),function(e,t){wv(wv(e).mutationQueue).xn(t)}(a.localStore,n)):gv();case 11:return e.next=13,nE(a,o);case 13:e.next=16;break;case 15:pv("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),hE.apply(this,arguments)}function dE(e,t){return pE.apply(this,arguments)}function pE(){return(pE=Nt(Tt().mark((function e(t,n){var r,i,a,o,u,s,c,l;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(_E(r=wv(t)),IE(r),!0!==n||!0===r.Fa){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,vE(r,i.toArray());case 5:return a=e.sent,r.Fa=!0,e.next=9,tI(r.remoteStore,!0);case 9:o=T(a);try{for(o.s();!(u=o.n()).done;)s=u.value,x_(r.remoteStore,s)}catch(f){o.e(f)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.Fa){e.next=25;break}return c=[],l=Promise.resolve(),r.pa.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return XI(r,t),Ox(r.localStore,t,!0)})),__(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,vE(r,c);case 21:return function(e){var t=wv(e);t.Sa.forEach((function(e,n){__(t.remoteStore,n)})),t.ba.gr(),t.Sa=new Map,t.wa=new Xm(qv.comparator)}(r),r.Fa=!1,e.next=25,tI(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function vE(e,t,n){return mE.apply(this,arguments)}function mE(){return mE=Nt(Tt().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h,d,p,v,m,y;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=wv(t),a=[],o=[],u=T(n),e.prev=2,u.s();case 4:if((s=u.n()).done){e.next=45;break}if(c=s.value,l=void 0,!(f=i.pa.get(c))||0===f.length){e.next=34;break}return e.next=11,Dx(i.localStore,Eg(f[0]));case 11:l=e.sent,h=T(f),e.prev=13,h.s();case 15:if((d=h.n()).done){e.next=24;break}return p=d.value,v=i.ga.get(p),e.next=20,uE(i,v);case 20:(m=e.sent).snapshot&&o.push(m.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),h.e(e.t0);case 29:return e.prev=29,h.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,Fx(i.localStore,c);case 36:return y=e.sent,e.next=39,Dx(i.localStore,y);case 39:return l=e.sent,e.next=42,RI(i,yE(y),c,!1,l.resumeToken);case 42:a.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),u.e(e.t1);case 50:return e.prev=50,u.f(),e.finish(50);case 53:return e.abrupt("return",(i.fa.c_(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),mE.apply(this,arguments)}function yE(e){return gg(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function gE(e){return function(e){return wv(wv(e).persistence).ki()}(wv(e).localStore)}function kE(e,t,n,r){return wE.apply(this,arguments)}function wE(){return wE=Nt(Tt().mark((function e(t,n,r,i){var a,o,u,s;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=wv(t)).Fa){e.next=3;break}return e.abrupt("return",void pv("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((o=a.pa.get(n))&&o.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,Ux(a.localStore,Dg(o[0]));case 10:return u=e.sent,s=qk.createSynthesizedRemoteEventForCurrentChange(n,"current"===r,ay.EMPTY_BYTE_STRING),e.next=14,nE(a,u,s);case 14:return e.abrupt("break",20);case 15:return e.next=17,Ox(a.localStore,n,!0);case 17:return XI(a,n,i),e.abrupt("break",20);case 19:gv();case 20:case"end":return e.stop()}}),e)}))),wE.apply(this,arguments)}function bE(e,t,n){return xE.apply(this,arguments)}function xE(){return xE=Nt(Tt().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=_E(t)).Fa){e.next=45;break}a=T(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(u=o.value,!i.pa.has(u)){e.next=10;break}return pv("SyncEngine","Adding an already active target "+u),e.abrupt("continue",19);case 10:return e.next=12,Fx(i.localStore,u);case 12:return s=e.sent,e.next=15,Dx(i.localStore,s);case 15:return c=e.sent,e.next=18,RI(i,yE(s),c.targetId,!1,c.resumeToken);case 18:x_(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:l=T(r),e.prev=30,h=Tt().mark((function e(){var t;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.value,e.t0=i.pa.has(t),!e.t0){e.next=5;break}return e.next=5,Ox(i.localStore,t,!1).then((function(){__(i.remoteStore,t),XI(i,t)})).catch(tm);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((f=l.n()).done){e.next=37;break}return e.delegateYield(h(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),xE.apply(this,arguments)}function _E(e){var t=wv(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=UI.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=oE.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=zI.bind(null,t),t.fa.c_=mI.bind(null,t.eventManager),t.fa.xa=yI.bind(null,t.eventManager),t}function IE(e){var t=wv(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=qI.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=GI.bind(null,t),t}function EE(e,t,n){var r=wv(e);(function(){var e=Nt(Tt().mark((function e(t,n,r){var i,a,o,u,s;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=wv(e),r=ow(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.Ur.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(_I(i)),a=new xI(i,t.localStore,n.serializer),e.next=15,n.Oa();case 15:o=e.sent;case 16:if(!o){e.next=26;break}return e.next=19,a.na(o);case 19:return(u=e.sent)&&r._updateProgress(u),e.next=23,n.Oa();case 23:o=e.sent;case 24:e.next=16;break;case 26:return e.next=28,a.complete();case 28:return s=e.sent,e.next=31,nE(t,s.sa,void 0);case 31:return e.next=33,function(e,t){var n=wv(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.Ur.saveBundleMetadata(e,t)}))}(t.localStore,i);case 33:return r._completeWith(s.progress),e.abrupt("return",Promise.resolve(s.ia));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(mv("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))}var SE=function(){function e(){d(this,e),this.synchronizeTabs=!1}return y(e,[{key:"initialize",value:function(){var e=Nt(Tt().mark((function e(t){return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.serializer=l_(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),e.next=5,this.persistence.start();case 5:this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createGarbageCollectionScheduler",value:function(e,t){return null}},{key:"createIndexBackfillerScheduler",value:function(e,t){return null}},{key:"createLocalStore",value:function(e){return Ex(this.persistence,new _x,e.initialUser,this.serializer)}},{key:"createPersistence",value:function(e){return new fx(dx.Jr,this.serializer)}},{key:"createSharedClientState",value:function(e){return new Zx}},{key:"terminate",value:function(){var e=Nt(Tt().mark((function e(){return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),TE=function(e){k(n,e);var t=_(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this)).Na=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return y(n,[{key:"initialize",value:function(){var e=Nt(Tt().mark((function e(t){var r=this;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,or(w(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.Na.initialize(this,t);case 4:return e.next=6,IE(this.Na.syncEngine);case 6:return e.next=8,V_(this.Na.remoteStore);case 8:return e.next=10,this.persistence.gi((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createLocalStore",value:function(e){return Ex(this.persistence,new _x,e.initialUser,this.serializer)}},{key:"createGarbageCollectionScheduler",value:function(e,t){var n=this.persistence.referenceDelegate.garbageCollector;return new zb(n,e.asyncQueue,t)}},{key:"createIndexBackfillerScheduler",value:function(e,t){var n=new pm(t,this.persistence);return new dm(e.asyncQueue,n)}},{key:"createPersistence",value:function(e){var t=wx(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Sb.withCacheSize(this.cacheSizeBytes):Sb.DEFAULT;return new yx(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,s_(),c_(),this.serializer,this.sharedClientState,!!this.forceOwnership)}},{key:"createSharedClientState",value:function(e){return new Zx}}]),n}(SE),CE=function(e){k(n,e);var t=_(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,r,!1)).Na=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return y(n,[{key:"initialize",value:function(){var e=Nt(Tt().mark((function e(t){var r,i=this;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,or(w(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.Na.syncEngine,e.t0=this.sharedClientState instanceof Jx,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={Xs:fE.bind(null,r),eo:kE.bind(null,r),no:bE.bind(null,r),ki:gE.bind(null,r),Zs:cE.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.gi(function(){var e=Nt(Tt().mark((function e(t){return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,dE(i.Na.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start():t||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(t&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():t||i.indexBackfillerScheduler.stop());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createSharedClientState",value:function(e){var t=s_();if(!Jx.C(t))throw new xv(bv.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=wx(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Jx(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(TE),NE=function(){function e(){d(this,e)}return y(e,[{key:"initialize",value:function(){var e=Nt(Tt().mark((function e(t,n){var r=this;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return jI(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=iE.bind(null,this.syncEngine),e.next=12,tI(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new fI}},{key:"createDatastore",value:function(e){var t=l_(e.databaseInfo.databaseId),n=function(e){return new u_(e)}(e.databaseInfo);return function(e,t,n,r){return new v_(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}},{key:"createRemoteStore",value:function(e){var t=this;return function(e,t,n,r,i){return new y_(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(function(e){return jI(t.syncEngine,e,0)}),t_.C()?new t_:new e_)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var u=new NI(e,t,n,r,i,a);return o&&(u.Fa=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=Nt(Tt().mark((function e(t){var n;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=wv(t),pv("RemoteStore","RemoteStore shutting down."),n.F_.add(5),e.next=5,w_(n);case 5:n.x_.shutdown(),n.O_.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function AE(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return Nt(Tt().mark((function r(){var i;return Tt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return Nt(Tt().mark((function e(){return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.resolve()}}var PE=function(){function e(t){d(this,e),this.observer=t,this.muted=!1}return y(e,[{key:"next",value:function(e){this.observer.next&&this.Ba(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Ba(this.observer.error,e):vv("Uncaught Error in snapshot listener:",e.toString())}},{key:"La",value:function(){this.muted=!0}},{key:"Ba",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),RE=function(){function e(t,n){var r=this;d(this,e),this.ka=t,this.serializer=n,this.metadata=new _v,this.buffer=new Uint8Array,this.qa=new TextDecoder("utf-8"),this.Qa().then((function(e){e&&e.ea()?r.metadata.resolve(e.X_.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.X_))))}),(function(e){return r.metadata.reject(e)}))}return y(e,[{key:"close",value:function(){return this.ka.cancel()}},{key:"getMetadata",value:function(){var e=Nt(Tt().mark((function e(){return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Oa",value:function(){var e=Nt(Tt().mark((function e(){return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.Qa());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Qa",value:function(){var e=Nt(Tt().mark((function e(){var t,n,r,i;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Ka();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.qa.decode(t),r=Number(n),isNaN(r)&&this.$a("length string (".concat(n,") is not valid number")),e.next=9,this.Ua(r);case 9:return i=e.sent,e.abrupt("return",new wI(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Wa",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"Ka",value:function(){var e=Nt(Tt().mark((function e(){var t,n;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.Wa()<0)){e.next=7;break}return e.next=3,this.Ga();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.Wa())<0&&this.$a("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ua",value:function(){var e=Nt(Tt().mark((function e(t){var n;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.Ga();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.$a("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.qa.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"$a",value:function(e){throw this.ka.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"Ga",value:function(){var e=Nt(Tt().mark((function e(){var t,n;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.ka.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),DE=function(){function e(t){d(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return y(e,[{key:"lookup",value:function(){var e=Nt(Tt().mark((function e(t){var n,r=this;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new xv(bv.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=Nt(Tt().mark((function e(t,n){var r,i,a,o,u,s;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=wv(t),i=dw(r.serializer)+"/documents",a={documents:n.map((function(e){return cw(r.serializer,e)}))},e.next=5,r.Fo("BatchGetDocuments",i,a,n.length);case 5:return o=e.sent,u=new Map,o.forEach((function(e){var t=yw(r.serializer,e);u.set(t.key.toString(),t)})),s=[],e.abrupt("return",(n.forEach((function(e){var t=u.get(e.toString());kv(!!t),s.push(t)})),s));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new Ck(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=Nt(Tt().mark((function e(){var t,n=this;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=qv.fromPath(t);n.mutations.push(new Nk(r,n.precondition(r)))})),e.next=7,function(){var e=Nt(Tt().mark((function e(t,n){var r,i,a;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=wv(t),i=dw(r.serializer)+"/documents",a={writes:n.map((function(e){return gw(r.serializer,e)}))},e.next=3,r.bo("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw gv();t=Uv.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new xv(bv.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Uv.min())?dk.exists(!1):dk.updateTime(t):dk.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Uv.min()))throw new xv(bv.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return dk.updateTime(t)}return dk.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),OE=function(){function e(t,n,r,i,a){d(this,e),this.asyncQueue=t,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=a,this.za=r.maxAttempts,this.Ho=new f_(this.asyncQueue,"transaction_retry")}return y(e,[{key:"run",value:function(){this.za-=1,this.ja()}},{key:"ja",value:function(){var e=this;this.Ho.Qo(Nt(Tt().mark((function t(){var n,r;return Tt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new DE(e.datastore),(r=e.Ha(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.Ja(t)}))}))})).catch((function(t){e.Ja(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"Ha",value:function(e){try{var t=this.updateFunction(e);return!mm(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"Ja",value:function(e){var t=this;this.za>0&&this.Ya(e)?(this.za-=1,this.asyncQueue.enqueueAndForget((function(){return t.ja(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"Ya",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!Ok(t)}return!1}}]),e}(),LE=function(){function e(t,n,r,i){var a=this;d(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=lv.UNAUTHENTICATED,this.clientId=Dv.V(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=Nt(Tt().mark((function e(t){return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return pv("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return pv("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return y(e,[{key:"getConfiguration",value:function(){var e=Nt(Tt().mark((function e(){return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new xv(bv.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new _v;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(Nt(Tt().mark((function n(){var r;return Tt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e._onlineComponents,!n.t0){n.next=5;break}return n.next=5,e._onlineComponents.terminate();case 5:if(n.t1=e._offlineComponents,!n.t1){n.next=9;break}return n.next=9,e._offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=oI(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function ME(e,t){return FE.apply(this,arguments)}function FE(){return FE=Nt(Tt().mark((function e(t,n){var r,i;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),pv("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=Nt(Tt().mark((function e(t){return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,Sx(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t._offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),FE.apply(this,arguments)}function UE(e,t){return VE.apply(this,arguments)}function VE(){return VE=Nt(Tt().mark((function e(t,n){var r,i;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,zE(t);case 3:return r=e.sent,pv("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return Z_(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return Z_(n.remoteStore,t)})),t._onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),VE.apply(this,arguments)}function jE(e){return"FirebaseError"===e.name?e.code===bv.FAILED_PRECONDITION||e.code===bv.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}function zE(e){return BE.apply(this,arguments)}function BE(){return(BE=Nt(Tt().mark((function e(t){var n;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t._offlineComponents){e.next=21;break}if(!t._uninitializedComponentsProvider){e.next=18;break}return pv("FirestoreClient","Using user provided OfflineComponentProvider"),e.prev=3,e.next=6,ME(t,t._uninitializedComponentsProvider._offline);case 6:e.next=16;break;case 8:if(e.prev=8,e.t0=e.catch(3),jE(n=e.t0)){e.next=13;break}throw n;case 13:return mv("Error using user provided cache. Falling back to memory cache: "+n),e.next=16,ME(t,new SE);case 16:e.next=21;break;case 18:return pv("FirestoreClient","Using default OfflineComponentProvider"),e.next=21,ME(t,new SE);case 21:return e.abrupt("return",t._offlineComponents);case 22:case"end":return e.stop()}}),e,null,[[3,8]])})))).apply(this,arguments)}function qE(e){return KE.apply(this,arguments)}function KE(){return(KE=Nt(Tt().mark((function e(t){return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t._onlineComponents,e.t0){e.next=11;break}if(!t._uninitializedComponentsProvider){e.next=8;break}return pv("FirestoreClient","Using user provided OnlineComponentProvider"),e.next=6,UE(t,t._uninitializedComponentsProvider._online);case 6:e.next=11;break;case 8:return pv("FirestoreClient","Using default OnlineComponentProvider"),e.next=11,UE(t,new NE);case 11:return e.abrupt("return",t._onlineComponents);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function GE(e){return zE(e).then((function(e){return e.persistence}))}function HE(e){return zE(e).then((function(e){return e.localStore}))}function WE(e){return qE(e).then((function(e){return e.remoteStore}))}function QE(e){return qE(e).then((function(e){return e.syncEngine}))}function YE(e){return qE(e).then((function(e){return e.datastore}))}function $E(e){return XE.apply(this,arguments)}function XE(){return(XE=Nt(Tt().mark((function e(t){var n,r;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qE(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=AI.bind(null,n.syncEngine),r.onUnlisten=OI.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function JE(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new _v;return e.asyncQueue.enqueueAndForget(Nt(Tt().mark((function i(){return Tt().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new PE({next:function(a){t.enqueueAndForget((function(){return pI(e,o)}));var u=a.docs.has(n);!u&&a.fromCache?i.reject(new xv(bv.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&a.fromCache&&r&&"server"===r.source?i.reject(new xv(bv.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new kI(kg(n.path),a,{includeMetadataChanges:!0,Z_:!0});return hI(e,o)},i.next=3,$E(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function ZE(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new _v;return e.asyncQueue.enqueueAndForget(Nt(Tt().mark((function i(){return Tt().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new PE({next:function(n){t.enqueueAndForget((function(){return pI(e,o)})),n.fromCache&&"server"===r.source?i.reject(new xv(bv.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new kI(n,a,{includeMetadataChanges:!0,Z_:!0});return hI(e,o)},i.next=3,$E(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function eS(e){var t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}var tS=new Map;function nS(e,t,n){if(!n)throw new xv(bv.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function rS(e,t,n,r){if(!0===t&&!0===r)throw new xv(bv.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function iS(e){if(!qv.isDocumentKey(e))throw new xv(bv.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function aS(e){if(qv.isDocumentKey(e))throw new xv(bv.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function oS(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":gv()}function uS(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new xv(bv.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=oS(e);throw new xv(bv.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function sS(e,t){if(t<=0)throw new xv(bv.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var cS=function(){function e(t){var n,r;if(d(this,e),void 0===t.host){if(void 0!==t.ssl)throw new xv(bv.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new xv(bv.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}rS("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===t.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=eS(null!==(r=t.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new xv(bv.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new xv(bv.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new xv(bv.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}return y(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),lS=function(){function e(t,n,r,i){d(this,e),this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new cS({}),this._settingsFrozen=!1}return y(e,[{key:"app",get:function(){if(!this._app)throw new xv(bv.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new xv(bv.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new cS(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Ev;switch(e.type){case"firstParty":return new Nv(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new xv(bv.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=tS.get(e);t&&(pv("ComponentProvider","Removing Datastore"),tS.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function fS(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=uS(e,lS))._getSettings(),o="".concat(t,":").concat(n);if("firestore.googleapis.com"!==a.host&&a.host!==o&&mv("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},a),{host:o,ssl:!1})),i.mockUserToken){var u,s;if("string"==typeof i.mockUserToken)u=i.mockUserToken,s=lv.MOCK_USER;else{u=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[et(JSON.stringify({alg:"none",type:"JWT"})),et(JSON.stringify(a)),""].join(".")}(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var c=i.mockUserToken.sub||i.mockUserToken.user_id;if(!c)throw new xv(bv.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");s=new lv(c)}e._authCredentials=new Sv(new Iv(u,s))}}var hS=function(){function e(t,n,r){d(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return y(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),dS=function(){function e(t,n,r){d(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return y(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new pS(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),pS=function(e){k(n,e);var t=_(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this,e,r,kg(i)))._path=i,a.type="collection",a}return y(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new dS(this.firestore,null,new qv(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(hS);function vS(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=St(e),nS("collection","path",t),e instanceof lS){var a=jv.fromString.apply(jv,[t].concat(r));return aS(a),new pS(e,null,a)}if(!(e instanceof dS||e instanceof pS))throw new xv(bv.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(jv.fromString.apply(jv,[t].concat(r)));return aS(o),new pS(e.firestore,null,o)}function mS(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=St(e),1===arguments.length&&(t=Dv.V()),nS("doc","path",t),e instanceof lS){var a=jv.fromString.apply(jv,[t].concat(r));return iS(a),new dS(e,null,new qv(a))}if(!(e instanceof dS||e instanceof pS))throw new xv(bv.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(jv.fromString.apply(jv,[t].concat(r)));return iS(o),new dS(e.firestore,e instanceof pS?e.converter:null,new qv(o))}function yS(e,t){return e=St(e),t=St(t),(e instanceof dS||e instanceof pS)&&(t instanceof dS||t instanceof pS)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function gS(e,t){return e=St(e),t=St(t),e instanceof hS&&t instanceof hS&&e.firestore===t.firestore&&Ng(e._query,t._query)&&e.converter===t.converter}var kS=function(){function e(){var t=this;d(this,e),this.Za=Promise.resolve(),this.Xa=[],this.eu=!1,this.tu=[],this.nu=null,this.ru=!1,this.iu=!1,this.su=[],this.Ho=new f_(this,"async_queue_retry"),this.ou=function(){var e=c_();e&&pv("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Ho.$o()};var n=c_();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.ou)}return y(e,[{key:"isShuttingDown",get:function(){return this.eu}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this._u(),this.au(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.eu){this.eu=!0,this.iu=e||!1;var t=c_();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.ou)}}},{key:"enqueue",value:function(e){var t=this;if(this._u(),this.eu)return new Promise((function(){}));var n=new _v;return this.au((function(){return t.eu&&t.iu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.Xa.push(e),t.uu()}))}},{key:"uu",value:function(){var e=Nt(Tt().mark((function e(){var t=this;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.Xa.length){e.next=14;break}return e.prev=1,e.next=4,this.Xa[0]();case 4:this.Xa.shift(),this.Ho.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),sm(e.t0)){e.next=12;break}throw e.t0;case 12:pv("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.Xa.length>0&&this.Ho.Qo((function(){return t.uu()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"au",value:function(e){var t=this,n=this.Za.then((function(){return t.ru=!0,e().catch((function(e){t.nu=e,t.ru=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw vv("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.ru=!1,e}))}));return this.Za=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this._u(),this.su.indexOf(e)>-1&&(t=0);var i=aI.createAndSchedule(this,e,t,n,(function(e){return r.cu(e)}));return this.tu.push(i),i}},{key:"_u",value:function(){this.nu&&gv()}},{key:"verifyOperationInProgress",value:function(){}},{key:"lu",value:function(){var e=Nt(Tt().mark((function e(){var t;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Za,e.next=3,t;case 3:if(t!==this.Za){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"hu",value:function(e){var t,n=T(this.tu);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"Pu",value:function(e){var t=this;return this.lu().then((function(){t.tu.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=T(t.tu);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.lu()}))}},{key:"Iu",value:function(e){this.su.push(e)}},{key:"cu",value:function(e){var t=this.tu.indexOf(e);this.tu.splice(t,1)}}]),e}();function wS(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=T(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var bS=function(){function e(){d(this,e),this._progressObserver={},this._taskCompletionResolver=new _v,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return y(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),xS=function(e){k(n,e);var t=_(n);function n(e,r,i,a){var o;return d(this,n),(o=t.call(this,e,r,i,a)).type="firestore",o._queue=new kS,o._persistenceKey=(null==a?void 0:a.name)||"[DEFAULT]",o}return y(n,[{key:"_terminate",value:function(){return this._firestoreClient||IS(this),this._firestoreClient.terminate()}}]),n}(lS);function _S(e){return e._firestoreClient||IS(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function IS(e){var t,n,r,i=e._freezeSettings(),a=function(e,t,n,r){return new dy(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,eS(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new LE(e._authCredentials,e._appCheckCredentials,e._queue,a),(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function ES(e,t,n){var r=new _v;return e.asyncQueue.enqueue(Nt(Tt().mark((function i(){var a;return Tt().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,ME(e,n);case 3:return i.next=5,UE(e,t);case 5:r.resolve(),i.next=14;break;case 8:if(i.prev=8,i.t0=i.catch(0),jE(a=i.t0)){i.next=13;break}throw a;case 13:mv("Error enabling indexeddb cache. Falling back to memory cache: "+a),r.reject(a);case 14:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function SS(e){return function(e){var t=new _v;return e.asyncQueue.enqueueAndForget(Nt(Tt().mark((function n(){return Tt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=WI,n.next=3,QE(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(_S(e=uS(e,xS)))}function TS(e){return function(e){return e.asyncQueue.enqueue(Nt(Tt().mark((function t(){var n,r;return Tt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,GE(e);case 2:return n=t.sent,t.next=5,WE(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=wv(e);return t.F_.delete(0),g_(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(_S(e=uS(e,xS)))}function CS(e){return function(e){return e.asyncQueue.enqueue(Nt(Tt().mark((function t(){var n,r;return Tt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,GE(e);case 2:return n=t.sent,t.next=5,WE(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=Nt(Tt().mark((function e(t){var n;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=wv(t)).F_.add(0),e.next=4,w_(n);case 4:n.O_.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(_S(e=uS(e,xS)))}function NS(e,t){var n=_S(e=uS(e,xS)),r=new bS;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new RE(e,t)}(function(e,t){if(e instanceof Uint8Array)return AE(e,t);if(e instanceof ArrayBuffer)return AE(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?Fk().encode(e):e),t)}(n,l_(t));e.asyncQueue.enqueueAndForget(Nt(Tt().mark((function t(){return Tt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=EE,t.next=3,QE(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function AS(e,t){return function(e,t){return e.asyncQueue.enqueue(Nt(Tt().mark((function n(){return Tt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=wv(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.Ur.getNamedQuery(e,t)}))},n.next=3,HE(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(_S(e=uS(e,xS)),t).then((function(t){return t?new hS(e,null,t.query):null}))}function PS(e){if(e._initialized||e._terminated)throw new xv(bv.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var RS=function(){function e(t){d(this,e),this._byteString=t}return y(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(ay.fromBase64String(t))}catch(t){throw new xv(bv.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(ay.fromUint8Array(t))}}]),e}(),DS=function(){function e(){d(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new xv(bv.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Bv(n)}return y(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var OS=y((function e(t){d(this,e),this._methodName=t})),LS=function(){function e(t,n){if(d(this,e),!isFinite(t)||t<-90||t>90)throw new xv(bv.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new xv(bv.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return y(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return Ov(this._lat,e._lat)||Ov(this._long,e._long)}}]),e}(),MS=/^__.*__$/,FS=function(){function e(t,n,r){d(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return y(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new xk(e,this.data,this.fieldMask,t,this.fieldTransforms):new bk(e,this.data,t,this.fieldTransforms)}}]),e}(),US=function(){function e(t,n,r){d(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return y(e,[{key:"toMutation",value:function(e,t){return new xk(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function VS(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw gv()}}var jS=function(){function e(t,n,r,i,a,o){d(this,e),this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===a&&this.du(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return y(e,[{key:"path",get:function(){return this.settings.path}},{key:"Tu",get:function(){return this.settings.Tu}},{key:"Eu",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"Au",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Eu({path:n,Ru:!1});return r.Vu(e),r}},{key:"mu",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Eu({path:n,Ru:!1});return r.du(),r}},{key:"fu",value:function(e){return this.Eu({path:void 0,Ru:!0})}},{key:"gu",value:function(e){return oT(e,this.settings.methodName,this.settings.pu||!1,this.path,this.settings.yu)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"du",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.Vu(this.path.get(e))}},{key:"Vu",value:function(e){if(0===e.length)throw this.gu("Document fields must not be empty");if(VS(this.Tu)&&MS.test(e))throw this.gu('Document fields cannot begin and end with "__"')}}]),e}(),zS=function(){function e(t,n,r){d(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||l_(t)}return y(e,[{key:"wu",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new jS({Tu:e,methodName:t,yu:n,path:Bv.emptyPath(),Ru:!1,pu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}]),e}();function BS(e){var t=e._freezeSettings(),n=l_(e._databaseId);return new zS(e._databaseId,!!t.ignoreUndefinedProperties,n)}function qS(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.wu(a.merge||a.mergeFields?2:0,t,n,i);nT("Data must be an object, but it was:",o,r);var u,s,c=eT(r,o);if(a.merge)u=new ry(o.fieldMask),s=o.fieldTransforms;else if(a.mergeFields){var l,f=[],h=T(a.mergeFields);try{for(h.s();!(l=h.n()).done;){var d=rT(t,l.value,n);if(!o.contains(d))throw new xv(bv.INVALID_ARGUMENT,"Field '".concat(d,"' is specified in your field mask but missing from your input data."));uT(f,d)||f.push(d)}}catch(p){h.e(p)}finally{h.f()}u=new ry(f),s=o.fieldTransforms.filter((function(e){return u.covers(e.field)}))}else u=null,s=o.fieldTransforms;return new FS(new My(c),u,s)}var KS=function(e){k(n,e);var t=_(n);function n(){return d(this,n),t.apply(this,arguments)}return y(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.Tu)throw 1===e.Tu?e.gu("".concat(this._methodName,"() can only appear at the top level of your update data")):e.gu("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(OS);function GS(e,t,n){return new jS({Tu:3,yu:t.settings.yu,methodName:e._methodName,Ru:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}var HS=function(e){k(n,e);var t=_(n);function n(){return d(this,n),t.apply(this,arguments)}return y(n,[{key:"_toFieldTransform",value:function(e){return new fk(e.path,new rk)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(OS),WS=function(e){k(n,e);var t=_(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e)).Su=r,i}return y(n,[{key:"_toFieldTransform",value:function(e){var t=GS(this,e,!0),n=this.Su.map((function(e){return ZS(e,t)})),r=new ik(n);return new fk(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(OS),QS=function(e){k(n,e);var t=_(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e)).Su=r,i}return y(n,[{key:"_toFieldTransform",value:function(e){var t=GS(this,e,!0),n=this.Su.map((function(e){return ZS(e,t)})),r=new ok(n);return new fk(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(OS),YS=function(e){k(n,e);var t=_(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e)).bu=r,i}return y(n,[{key:"_toFieldTransform",value:function(e){var t=new sk(e.serializer,Jg(e.serializer,this.bu));return new fk(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(OS);function $S(e,t,n,r){var i=e.wu(1,t,n);nT("Data must be an object, but it was:",i,r);var a=[],o=My.empty();Ym(r,(function(e,r){var u=aT(t,e,n);r=St(r);var s=i.mu(u);if(r instanceof KS)a.push(u);else{var c=ZS(r,s);null!=c&&(a.push(u),o.set(u,c))}}));var u=new ry(a);return new US(o,u,i.fieldTransforms)}function XS(e,t,n,r,i,a){var o=e.wu(1,t,n),u=[rT(t,r,n)],s=[i];if(a.length%2!=0)throw new xv(bv.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)u.push(rT(t,a[c])),s.push(a[c+1]);for(var l=[],f=My.empty(),h=u.length-1;h>=0;--h)if(!uT(l,u[h])){var d=u[h],p=s[h];p=St(p);var v=o.mu(d);if(p instanceof KS)l.push(d);else{var m=ZS(p,v);null!=m&&(l.push(d),f.set(d,m))}}var y=new ry(l);return new US(f,y,o.fieldTransforms)}function JS(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return ZS(n,e.wu(r?4:3,t))}function ZS(e,t){if(tT(e=St(e)))return nT("Unsupported field value:",t,e),eT(e,t);if(e instanceof OS)return function(e,t){if(!VS(t.Tu))throw t.gu("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.gu("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Ru&&4!==t.Tu)throw t.gu("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=T(e);try{for(a.s();!(n=a.n()).done;){var o=ZS(n.value,t.fu(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(u){a.e(u)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=St(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Jg(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=Fv.fromDate(e);return{timestampValue:rw(t.serializer,n)}}if(e instanceof Fv){var r=new Fv(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:rw(t.serializer,r)}}if(e instanceof LS)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof RS)return{bytesValue:iw(t.serializer,e._byteString)};if(e instanceof dS){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.gu("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:uw(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.gu("Unsupported field value: ".concat(oS(e)))}(e,t)}function eT(e,t){var n={};return $m(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Ym(e,(function(e,r){var i=ZS(r,t.Au(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function tT(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Fv||e instanceof LS||e instanceof RS||e instanceof dS||e instanceof OS)}function nT(e,t,n){if(!tT(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=oS(n);throw"an object"===r?t.gu(e+" a custom object"):t.gu(e+" "+r)}}function rT(e,t,n){if((t=St(t))instanceof DS)return t._internalPath;if("string"==typeof t)return aT(e,t);throw oT("Field path arguments must be of type string or ",e,!1,void 0,n)}var iT=new RegExp("[~\\*/\\[\\]]");function aT(e,t,n){if(t.search(iT)>=0)throw oT("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return I(DS,h(t.split(".")))._internalPath}catch(ef){throw oT("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function oT(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(a||o)&&(s+=" (found",a&&(s+=" in field ".concat(r)),o&&(s+=" in document ".concat(i)),s+=")"),new xv(bv.INVALID_ARGUMENT,u+e+s)}function uT(e,t){return e.some((function(e){return e.isEqual(t)}))}var sT=function(){function e(t,n,r,i,a){d(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return y(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new dS(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new cT(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(lT("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),cT=function(e){k(n,e);var t=_(n);function n(){return d(this,n),t.apply(this,arguments)}return y(n,[{key:"data",value:function(){return or(w(n.prototype),"data",this).call(this)}}]),n}(sT);function lT(e,t){return"string"==typeof t?aT(e,t):t instanceof DS?t._internalPath:t._delegate._internalPath}function fT(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new xv(bv.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var hT=y((function e(){d(this,e)})),dT=function(e){k(n,e);var t=_(n);function n(){return d(this,n),t.apply(this,arguments)}return y(n)}(hT);function pT(e,t){for(var n=[],r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];t instanceof hT&&n.push(t),function(e){var t=e.filter((function(e){return e instanceof mT})).length,n=e.filter((function(e){return e instanceof vT})).length;if(t>1||t>0&&n>0)throw new xv(bv.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n=n.concat(i));var o,u=T(n);try{for(u.s();!(o=u.n()).done;){e=o.value._apply(e)}}catch(s){u.e(s)}finally{u.f()}return e}var vT=function(e){k(n,e);var t=_(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this))._field=e,a._op=r,a._value=i,a.type="where",a}return y(n,[{key:"_apply",value:function(e){var t=this._parse(e);return CT(e._query,t),new hS(e.firestore,e.converter,Tg(e._query,t))}},{key:"_parse",value:function(e){var t=BS(e.firestore),n=function(e,t,n,r,i,a,o){var u;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new xv(bv.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){TT(o,a);var s,c=[],l=T(o);try{for(l.s();!(s=l.n()).done;){var f=s.value;c.push(ST(r,e,f))}}catch(h){l.e(h)}finally{l.f()}u={arrayValue:{values:c}}}else u=ST(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||TT(o,a),u=JS(n,t,o,"in"===a||"not-in"===a);return Gy.create(i,a,u)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(dT);var mT=function(e){k(n,e);var t=_(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).type=e,i._queryConstraints=r,i}return y(n,[{key:"_parse",value:function(e){var t=this._queryConstraints.map((function(t){return t._parse(e)})).filter((function(e){return e.getFilters().length>0}));return 1===t.length?t[0]:Hy.create(t,this._getOperator())}},{key:"_apply",value:function(e){var t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){var n,r=e,i=T(t.getFlattenedFilters());try{for(i.s();!(n=i.n()).done;){var a=n.value;CT(r,a),r=Tg(r,a)}}catch(o){i.e(o)}finally{i.f()}}(e._query,t),new hS(e.firestore,e.converter,Tg(e._query,t)))}},{key:"_getQueryConstraints",value:function(){return this._queryConstraints}},{key:"_getOperator",value:function(){return"and"===this.type?"and":"or"}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(hT);var yT=function(e){k(n,e);var t=_(n);function n(e,r){var i;return d(this,n),(i=t.call(this))._field=e,i._direction=r,i.type="orderBy",i}return y(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new xv(bv.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new xv(bv.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new By(t,n);return function(e,t){if(null===bg(e)){var n=xg(e);null!==n&&NT(e,n,t.field)}}(e,r),r}(e._query,this._field,this._direction);return new hS(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new yg(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(dT);var gT=function(e){k(n,e);var t=_(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this)).type=e,a._limit=r,a._limitType=i,a}return y(n,[{key:"_apply",value:function(e){return new hS(e.firestore,e.converter,Cg(e._query,this._limit,this._limitType))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(dT);var kT=function(e){k(n,e);var t=_(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this)).type=e,a._docOrFields=r,a._inclusive=i,a}return y(n,[{key:"_apply",value:function(e){var t=ET(e,this.type,this._docOrFields,this._inclusive);return new hS(e.firestore,e.converter,function(e,t){return new yg(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(dT);function wT(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return kT._create("startAt",t,!0)}function bT(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return kT._create("startAfter",t,!1)}var xT=function(e){k(n,e);var t=_(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this)).type=e,a._docOrFields=r,a._inclusive=i,a}return y(n,[{key:"_apply",value:function(e){var t=ET(e,this.type,this._docOrFields,this._inclusive);return new hS(e.firestore,e.converter,function(e,t){return new yg(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(dT);function _T(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return xT._create("endBefore",t,!1)}function IT(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return xT._create("endAt",t,!0)}function ET(e,t,n,r){if(n[0]=St(n[0]),n[0]instanceof sT)return function(e,t,n,r,i){if(!r)throw new xv(bv.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],u=T(Ig(e));try{for(u.s();!(a=u.n()).done;){var s=a.value;if(s.field.isKeyField())o.push(Iy(t,r.key));else{var c=r.data.field(s.field);if(ly(c))throw new xv(bv.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=s.field.canonicalString();throw new xv(bv.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(f){u.e(f)}finally{u.f()}return new Vy(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=BS(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new xv(bv.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var u=[],s=0;s<i.length;s++){var c=i[s];if(o[s].field.isKeyField()){if("string"!=typeof c)throw new xv(bv.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!_g(e)&&-1!==c.indexOf("/"))throw new xv(bv.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(jv.fromString(c));if(!qv.isDocumentKey(l))throw new xv(bv.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var f=new qv(l);u.push(Iy(t,f))}else{var h=JS(n,r,c);u.push(h)}}return new Vy(u,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function ST(e,t,n){if("string"==typeof(n=St(n))){if(""===n)throw new xv(bv.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!_g(t)&&-1!==n.indexOf("/"))throw new xv(bv.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(jv.fromString(n));if(!qv.isDocumentKey(r))throw new xv(bv.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Iy(e,new qv(r))}if(n instanceof dS)return Iy(e,n._key);throw new xv(bv.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(oS(n),"."))}function TT(e,t){if(!Array.isArray(e)||0===e.length)throw new xv(bv.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function CT(e,t){if(t.isInequality()){var n=xg(e),r=t.field;if(null!==n&&!n.isEqual(r))throw new xv(bv.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(r.toString(),"'"));var i=bg(e);null!==i&&NT(e,r,i)}var a=function(e,t){var n,r=T(e);try{for(r.s();!(n=r.n()).done;){var i,a=T(n.value.getFlattenedFilters());try{for(a.s();!(i=a.n()).done;){var o=i.value;if(t.indexOf(o.op)>=0)return o.op}}catch(u){a.e(u)}finally{a.f()}}}catch(u){r.e(u)}finally{r.f()}return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==a)throw a===t.op?new xv(bv.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new xv(bv.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(a.toString(),"' filters."))}function NT(e,t,n){if(!n.isEqual(t))throw new xv(bv.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var AT=function(){function e(){d(this,e)}return y(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(yy(e)){case 0:return null;case 1:return e.booleanValue;case 2:return sy(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(cy(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw gv()}}},{key:"convertObject",value:function(e,t){return this.convertObjectMap(e.fields,t)}},{key:"convertObjectMap",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none",r={};return Ym(e,(function(e,i){r[e]=t.convertValue(i,n)})),r}},{key:"convertGeoPoint",value:function(e){return new LS(sy(e.latitude),sy(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=fy(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(hy(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=uy(e);return new Fv(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=jv.fromString(e);kv(Pw(n));var r=new py(n.get(1),n.get(3)),i=new qv(n.popFirst(5));return r.isEqual(t)||vv("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function PT(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var RT=function(e){k(n,e);var t=_(n);function n(e){var r;return d(this,n),(r=t.call(this)).firestore=e,r}return y(n,[{key:"convertBytes",value:function(e){return new RS(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new dS(this.firestore,null,t)}}]),n}(AT);var DT=function(){function e(t,n){d(this,e),this.hasPendingWrites=t,this.fromCache=n}return y(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),OT=function(e){k(n,e);var t=_(n);function n(e,r,i,a,o,u){var s;return d(this,n),(s=t.call(this,e,r,i,a,u))._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return y(n,[{key:"exists",value:function(){return or(w(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new LT(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(lT("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(sT),LT=function(e){k(n,e);var t=_(n);function n(){return d(this,n),t.apply(this,arguments)}return y(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return or(w(n.prototype),"data",this).call(this,e)}}]),n}(OT),MT=function(){function e(t,n,r,i){d(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new DT(i.hasPendingWrites,i.fromCache),this.query=r}return y(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new LT(n._firestore,n._userDataWriter,r.key,r,new DT(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new xv(bv.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){var r=new LT(e._firestore,e._userDataWriter,t.doc.key,t.doc,new DT(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);return t.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new LT(e._firestore,e._userDataWriter,t.doc.key,t.doc,new DT(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:FT(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}]),e}();function FT(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return gv()}}function UT(e,t){return e instanceof OT&&t instanceof OT?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof MT&&t instanceof MT&&e._firestore===t._firestore&&gS(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}var VT=function(e){k(n,e);var t=_(n);function n(e){var r;return d(this,n),(r=t.call(this)).firestore=e,r}return y(n,[{key:"convertBytes",value:function(e){return new RS(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new dS(this.firestore,null,t)}}]),n}(AT);function jT(e){e=uS(e,dS);var t=uS(e.firestore,xS),n=_S(t),r=new VT(t);return function(e,t){var n=new _v;return e.asyncQueue.enqueueAndForget(Nt(Tt().mark((function r(){return Tt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=Nt(Tt().mark((function e(t,n,r){var i,a;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=wv(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.localDocuments.getDocument(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new xv(bv.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=oI(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,HE(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new OT(t,r,e._key,n,new DT(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function zT(e){e=uS(e,hS);var t=uS(e.firestore,xS),n=_S(t),r=new VT(t);return fT(e._query),ZE(n,e._query).then((function(n){return new MT(t,r,e,n)}))}function BT(e){e=uS(e,hS);var t=uS(e.firestore,xS),n=_S(t),r=new VT(t);return function(e,t){var n=new _v;return e.asyncQueue.enqueueAndForget(Nt(Tt().mark((function r(){return Tt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=Nt(Tt().mark((function e(t,n,r){var i,a,o,u,s;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Mx(t,n,!0);case 3:i=e.sent,a=new SI(n,i.Ps),o=a.ha(i.documents),u=a.applyChanges(o,!1),r.resolve(u.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),s=oI(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(s);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,HE(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new MT(t,r,e,n)}))}function qT(e){e=uS(e,hS);var t=uS(e.firestore,xS),n=_S(t),r=new VT(t);return ZE(n,e._query,{source:"server"}).then((function(n){return new MT(t,r,e,n)}))}function KT(e,t,n){e=uS(e,dS);var r=uS(e.firestore,xS),i=PT(e.converter,t,n);return QT(r,[qS(BS(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,dk.none())])}function GT(e,t,n){e=uS(e,dS);for(var r=uS(e.firestore,xS),i=BS(r),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return QT(r,[("string"==typeof(t=St(t))||t instanceof DS?XS(i,"updateDoc",e._key,t,n,o):$S(i,"updateDoc",e._key,t)).toMutation(e._key,dk.exists(!0))])}function HT(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=St(e);var u={includeMetadataChanges:!1},s=0;"object"!=typeof n[s]||wS(n[s])||(u=n[s],s++);var c,l,f,h={includeMetadataChanges:u.includeMetadataChanges};if(wS(n[s])){var d=n[s];n[s]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[s+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[s+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof dS)l=uS(e.firestore,xS),f=kg(e._key.path),c={next:function(t){n[s]&&n[s](YT(l,e,t))},error:n[s+1],complete:n[s+2]};else{var p=uS(e,hS);l=uS(p.firestore,xS),f=p._query;var v=new VT(l);c={next:function(e){n[s]&&n[s](new MT(l,v,p,e))},error:n[s+1],complete:n[s+2]},fT(e._query)}return function(e,t,n,r){var i=new PE(r),a=new kI(t,i,n);return e.asyncQueue.enqueueAndForget(Nt(Tt().mark((function t(){return Tt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=hI,t.next=3,$E(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.La(),e.asyncQueue.enqueueAndForget(Nt(Tt().mark((function t(){return Tt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=pI,t.next=3,$E(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(_S(l),f,h,c)}function WT(e,t){return function(e,t){var n=new PE(t);return e.asyncQueue.enqueueAndForget(Nt(Tt().mark((function t(){return Tt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){wv(e).K_.add(t),t.next()},t.next=3,$E(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.La(),e.asyncQueue.enqueueAndForget(Nt(Tt().mark((function t(){return Tt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){wv(e).K_.delete(t)},t.next=3,$E(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(_S(e=uS(e,xS)),wS(t)?t:{next:t})}function QT(e,t){return function(e,t){var n=new _v;return e.asyncQueue.enqueueAndForget(Nt(Tt().mark((function r(){return Tt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=MI,r.next=3,QE(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(_S(e),t)}function YT(e,t,n){var r=n.docs.get(t._key),i=new VT(e);return new OT(e,i,t._key,r,new DT(n.hasPendingWrites,n.fromCache),t.converter)}var $T={maxAttempts:5},XT=function(){function e(t,n){d(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=BS(t)}return y(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=JT(e,this._firestore),i=PT(r.converter,t,n),a=qS(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,dk.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=JT(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=St(t))||t instanceof DS?XS(this._dataReader,"WriteBatch.update",i._key,t,n,o):$S(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,dk.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=JT(e,this._firestore);return this._mutations=this._mutations.concat(new Ck(t._key,dk.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new xv(bv.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function JT(e,t){if((e=St(e)).firestore!==t)throw new xv(bv.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var ZT=function(e){k(n,e);var t=_(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,r))._firestore=e,i}return y(n,[{key:"get",value:function(e){var t=this,r=JT(e,this._firestore),i=new VT(this._firestore);return or(w(n.prototype),"get",this).call(this,e).then((function(e){return new OT(t._firestore,i,r._key,e._document,new DT(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){d(this,e),this._firestore=t,this._transaction=n,this._dataReader=BS(t)}return y(e,[{key:"get",value:function(e){var t=this,n=JT(e,this._firestore),r=new RT(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return gv();var i=e[0];if(i.isFoundDocument())return new sT(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new sT(t._firestore,r,n._key,null,n.converter);throw gv()}))}},{key:"set",value:function(e,t,n){var r=JT(e,this._firestore),i=PT(r.converter,t,n),a=qS(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=JT(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=St(t))||t instanceof DS?XS(this._dataReader,"Transaction.update",i._key,t,n,o):$S(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=JT(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function eC(e,t,n){e=uS(e,xS);var r=Object.assign(Object.assign({},$T),n);return function(e){if(e.maxAttempts<1)throw new xv(bv.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){var r=new _v;return e.asyncQueue.enqueueAndForget(Nt(Tt().mark((function i(){var a;return Tt().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,YE(e);case 2:a=i.sent,new OE(e.asyncQueue,a,n,t,r).run();case 4:case"end":return i.stop()}}),i)})))),r.promise}(_S(e),(function(n){return t(new ZT(e,n))}),r)}function tC(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new WS("arrayUnion",t)}function nC(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new QS("arrayRemove",t)}new WeakMap;!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){fv=e}(Tn),wn(new At("firestore",(function(e,n){var r=n.instanceIdentifier,i=n.options,a=e.getProvider("app").getImmediate(),o=new xS(new Tv(e.getProvider("auth-internal")),new Pv(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new xv(bv.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new py(e.options.projectId,t)}(a,r),a);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),Dn(cv,"4.2.0",e),Dn(cv,"4.2.0","esm2017")}();function rC(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new xv("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function iC(){if("undefined"===typeof Uint8Array)throw new xv("unimplemented","Uint8Arrays are not available in this environment.")}function aC(){if("undefined"==typeof atob)throw new xv("unimplemented","Blobs are unavailable in Firestore in this environment.")}var oC=function(){function e(t){d(this,e),this._delegate=t}return y(e,[{key:"toBase64",value:function(){return aC(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return iC(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return aC(),new e(RS.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return iC(),new e(RS.fromUint8Array(t))}}]),e}();function uC(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=T(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var sC=function(){function e(){d(this,e)}return y(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){PS(e=uS(e,xS));var n=_S(e);if(n._uninitializedComponentsProvider)throw new xv(bv.FAILED_PRECONDITION,"SDK cache is already specified.");mv("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");var r=e._freezeSettings(),i=new NE;return ES(n,i,new TE(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){PS(e=uS(e,xS));var t=_S(e);if(t._uninitializedComponentsProvider)throw new xv(bv.FAILED_PRECONDITION,"SDK cache is already specified.");mv("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");var n=e._freezeSettings(),r=new NE;return ES(t,r,new CE(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new xv(bv.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new _v;return e._queue.enqueueAndForgetEvenWhileRestricted(Nt(Tt().mark((function n(){return Tt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=Nt(Tt().mark((function e(t){var n;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(am.C()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,am.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(wx(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),cC=function(){function e(t,n,r){var i=this;d(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof py||(this._appCompat=t)}return y(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||mv("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};fS(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return TS(this._delegate)}},{key:"disableNetwork",value:function(){return CS(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&rS("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return SS(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return WT(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new xv("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new _C(this,vS(this._delegate,e))}catch(t){throw vC(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new pC(this,mS(this._delegate,e))}catch(t){throw vC(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new wC(this,function(e,t){if(e=uS(e,lS),nS("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new xv(bv.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new hS(e,null,function(e){return new yg(jv.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw vC(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return eC(this._delegate,(function(n){return e(new fC(t,n))}))}},{key:"batch",value:function(){var e=this;return _S(this._delegate),new hC(new XT(this._delegate,(function(t){return QT(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return NS(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return AS(this._delegate,e).then((function(e){return e?new wC(t,e):null}))}}]),e}(),lC=function(e){k(n,e);var t=_(n);function n(e){var r;return d(this,n),(r=t.call(this)).firestore=e,r}return y(n,[{key:"convertBytes",value:function(e){return new oC(new RS(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return pC.forKey(t,this.firestore,null)}}]),n}(AT);var fC=function(){function e(t,n){d(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new lC(t)}return y(e,[{key:"get",value:function(e){var t=this,n=IC(e);return this._delegate.get(n).then((function(e){return new gC(t._firestore,new OT(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=IC(e);return n?(rC("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=IC(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=IC(e);return this._delegate.delete(t),this}}]),e}(),hC=function(){function e(t){d(this,e),this._delegate=t}return y(e,[{key:"set",value:function(e,t,n){var r=IC(e);return n?(rC("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=IC(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=IC(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),dC=function(){function e(t,n,r){d(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return y(e,[{key:"fromFirestore",value:function(e,t){var n=new LT(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new kC(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new lC(t),n),i.set(n,a)),a}}]),e}();dC.INSTANCES=new WeakMap;var pC=function(){function e(t,n){d(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new lC(t)}return y(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new _C(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new _C(this.firestore,vS(this._delegate,e))}catch(t){throw vC(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=St(e))instanceof dS&&yS(this._delegate,e)}},{key:"set",value:function(e,t){t=rC("DocumentReference.set",t);try{return t?KT(this._delegate,e,t):KT(this._delegate,e)}catch(n){throw vC(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?GT(this._delegate,e):GT.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw vC(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return QT(uS((e=this._delegate).firestore,xS),[new Ck(e._key,dk.none())]);var e}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=mC(n),a=yC(n,(function(t){return new gC(e.firestore,new OT(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return HT(this._delegate,i,a)}},{key:"get",value:function(e){var t=this;return("cache"===(null===e||void 0===e?void 0:e.source)?jT(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=uS(e,dS);var t=uS(e.firestore,xS);return JE(_S(t),e._key,{source:"server"}).then((function(n){return YT(t,e,n)}))}(this._delegate):function(e){e=uS(e,dS);var t=uS(e.firestore,xS);return JE(_S(t),e._key).then((function(n){return YT(t,e,n)}))}(this._delegate)).then((function(e){return new gC(t.firestore,new OT(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(dC.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new xv("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new dS(n._delegate,r,new qv(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new dS(n._delegate,r,t))}}]),e}();function vC(e,t,n){return e.message=e.message.replace(t,n),e}function mC(e){var t,n=T(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!uC(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function yC(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=uC(e[0])?e[0]:uC(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var gC=function(){function e(t,n){d(this,e),this._firestore=t,this._delegate=n}return y(e,[{key:"ref",get:function(){return new pC(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return UT(this._delegate,e._delegate)}}]),e}(),kC=function(e){k(n,e);var t=_(n);function n(){return d(this,n),t.apply(this,arguments)}return y(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return void 0!==t||gv(),t}}]),n}(gC),wC=function(){function e(t,n){d(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new lC(t)}return y(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,pT(this._delegate,function(e,t,n){var r=t,i=lT("where",e);return vT._create(i,r,n)}(t,n,r)))}catch(i){throw vC(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,pT(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=lT("orderBy",e);return yT._create(n,t)}(t,n)))}catch(r){throw vC(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,pT(this._delegate,(sS("limit",n=t),gT._create("limit",n,"F"))))}catch(n){throw vC(n,"limit()","Query.limit()")}var n}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,pT(this._delegate,(sS("limitToLast",n=t),gT._create("limitToLast",n,"L"))))}catch(n){throw vC(n,"limitToLast()","Query.limitToLast()")}var n}},{key:"startAt",value:function(){try{return new e(this.firestore,pT(this._delegate,wT.apply(void 0,arguments)))}catch(t){throw vC(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,pT(this._delegate,bT.apply(void 0,arguments)))}catch(t){throw vC(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,pT(this._delegate,_T.apply(void 0,arguments)))}catch(t){throw vC(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,pT(this._delegate,IT.apply(void 0,arguments)))}catch(t){throw vC(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return gS(this._delegate,e._delegate)}},{key:"get",value:function(e){var t=this;return("cache"===(null===e||void 0===e?void 0:e.source)?BT(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?qT(this._delegate):zT(this._delegate)).then((function(e){return new xC(t.firestore,new MT(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=mC(n),a=yC(n,(function(t){return new xC(e.firestore,new MT(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return HT(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(dC.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),bC=function(){function e(t,n){d(this,e),this._firestore=t,this._delegate=n}return y(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new kC(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),xC=function(){function e(t,n){d(this,e),this._firestore=t,this._delegate=n}return y(e,[{key:"query",get:function(){return new wC(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new kC(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new bC(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new kC(n._firestore,r))}))}},{key:"isEqual",value:function(e){return UT(this._delegate,e._delegate)}}]),e}(),_C=function(e){k(n,e);var t=_(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return y(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new pC(this.firestore,e):null}},{key:"doc",value:function(e){try{return new pC(this.firestore,void 0===e?mS(this._delegate):mS(this._delegate,e))}catch(t){throw vC(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=uS(e.firestore,xS),r=mS(e),i=PT(e.converter,t);return QT(n,[qS(BS(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,dk.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new pC(t.firestore,e)}))}},{key:"isEqual",value:function(e){return yS(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(dC.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(wC);function IC(e){return uS(e,dS)}var EC=function(){function e(){d(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=I(DS,n)}return y(e,[{key:"isEqual",value:function(e){return(e=St(e))instanceof DS&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(Bv.keyField().canonicalString())}}]),e}(),SC=function(){function e(t){d(this,e),this._delegate=t}return y(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new HS("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new KS("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=tC.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=nC.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=new YS("increment",t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),TC={Firestore:cC,GeoPoint:LS,Timestamp:Fv,Blob:oC,Transaction:fC,WriteBatch:hC,DocumentReference:pC,DocumentSnapshot:gC,Query:wC,QueryDocumentSnapshot:kC,QuerySnapshot:xC,CollectionReference:_C,FieldPath:EC,FieldValue:SC,setLogLevel:function(e){var t;t=e,hv.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new At("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},TC)))}(e,(function(e,t){return new cC(e,t,new sC)})),e.registerVersion("@firebase/firestore-compat","0.3.18")}(ar);var CC={apiKey:"AIzaSyDTg-PLZjl70ZR0_nXKGNRMNeLGdginFTc",authDomain:"my-daily-goals-95c46.firebaseapp.com",projectId:"my-daily-goals-95c46",storageBucket:"my-daily-goals-95c46.appspot.com",messagingSenderId:"344012921139",appId:"1:344012921139:web:3528720ac879ae9023c646"};ar.initializeApp(CC);var NC=ar.auth(),AC=ar.firestore(),PC=n(184);var RC=function(e){var t=e.user,n=be();return(0,PC.jsx)(PC.Fragment,{children:(0,PC.jsxs)("div",{className:"bg-green-700 p-4 flex justify-around items-center w-full header mb-1 shadow-md shadow-black sticky top-0",children:[(0,PC.jsx)(We,{to:"/",className:"text-yellow-400 sm:text-3xl",children:"My Daily Goals"}),(0,PC.jsx)("div",{className:"",children:t?(0,PC.jsxs)(PC.Fragment,{children:[(0,PC.jsx)(We,{to:"/home",className:"text-yellow-400  sm:text-3xl mx-7",children:"My Goals"}),(0,PC.jsx)(We,{to:"/home",onClick:function(){NC.signOut(),n("/home")},className:"text-yellow-400  sm:text-3xl",children:"Logout"})]}):(0,PC.jsxs)(PC.Fragment,{children:[(0,PC.jsx)(We,{to:"/login",className:"text-yellow-400  sm:text-3xl mx-10",children:"Login"}),(0,PC.jsx)(We,{to:"/signup",className:"text-yellow-400  sm:text-3xl",children:"Signup"})]})})]})})},DC={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},OC=r.createContext&&r.createContext(DC),LC=function(){return LC=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},LC.apply(this,arguments)},MC=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};function FC(e){return e&&e.map((function(e,t){return r.createElement(e.tag,LC({key:t},e.attr),FC(e.child))}))}function UC(e){return function(t){return r.createElement(VC,LC({attr:LC({},e.attr)},t),FC(e.child))}}function VC(e){var t=function(t){var n,i=e.attr,a=e.size,o=e.title,u=MC(e,["attr","size","title"]),s=a||t.size||"1em";return t.className&&(n=t.className),e.className&&(n=(n?n+" ":"")+e.className),r.createElement("svg",LC({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,i,u,{className:n,style:LC(LC({color:e.color||t.color},t.style),e.style),height:s,width:s,xmlns:"http://www.w3.org/2000/svg"}),o&&r.createElement("title",null,o),e.children)};return void 0!==OC?r.createElement(OC.Consumer,null,(function(e){return t(e)})):t(DC)}function jC(e){return UC({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M864 256H736v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zm-200 0H360v-72h304v72z"}}]})(e)}function zC(e){return UC({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M12.854.146a.5.5 0 0 0-.707 0L10.5 1.793 14.207 5.5l1.647-1.646a.5.5 0 0 0 0-.708l-3-3zm.646 6.061L9.793 2.5 3.293 9H3.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.207l6.5-6.5zm-7.468 7.468A.5.5 0 0 1 6 13.5V13h-.5a.5.5 0 0 1-.5-.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.5-.5V10h-.5a.499.499 0 0 1-.175-.032l-.179.178a.5.5 0 0 0-.11.168l-2 5a.5.5 0 0 0 .65.65l5-2a.5.5 0 0 0 .168-.11l.178-.178z"}}]})(e)}var BC=function(e){var t=e.title,n=e.description,r=e.editFunc,i=e.edit,a=e.index,o=e.deleteFunc,u=e.item,s=e.createdAt;return(0,PC.jsxs)(PC.Fragment,{children:[(0,PC.jsx)("br",{}),(0,PC.jsxs)("div",{className:" flex items-center border-4 bg-green-100 pl-2  border-lime-300  w-full  shadow-md shadow-black ",children:[(0,PC.jsxs)("div",{className:"w-full  text-xl text-green-600 font-bold py-2 ",children:[(0,PC.jsxs)("span",{className:"text-sm text-blue-400",children:["Created On: \xa0",(0,PC.jsx)("span",{children:s})]}),(0,PC.jsx)("div",{className:"ml-1 overflow-hidden  text-2xl",children:t}),(0,PC.jsx)("div",{className:"text-lg overflow-hidden font-light ml-1 text-yellow-600",children:n})]}),!1===i&&(0,PC.jsxs)(PC.Fragment,{children:[(0,PC.jsx)("div",{className:"",children:(0,PC.jsx)("button",{className:"text-4xl px-2 py-2 text-green-700 focus:outline-none",onClick:function(){return r(u,a)},children:(0,PC.jsx)(zC,{size:20,className:"animate-pulse"})})}),(0,PC.jsxs)("div",{className:"text-green-400",children:[" ",(0,PC.jsx)("button",{className:"text-4xl pr-2 text-red-600 py-2 focus:outline-none",onClick:function(){return o(u.id)},children:(0,PC.jsx)(jC,{size:22,className:"animate-pulse"})})]})]})]})]})};function qC(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function KC(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=KC(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}var GC=function(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=KC(e))&&(r&&(r+=" "),r+=t);return r},HC=["theme","type"],WC=["delay","staleId"],QC=function(e){return"number"==typeof e&&!isNaN(e)},YC=function(e){return"string"==typeof e},$C=function(e){return"function"==typeof e},XC=function(e){return YC(e)||$C(e)?e:null},JC=function(e){return(0,r.isValidElement)(e)||YC(e)||$C(e)||QC(e)};function ZC(e){var t=e.enter,n=e.exit,i=e.appendPosition,a=void 0!==i&&i,o=e.collapse,u=void 0===o||o,s=e.collapseDuration,c=void 0===s?300:s;return function(e){var i=e.children,o=e.position,s=e.preventExitTransition,l=e.done,f=e.nodeRef,d=e.isIn,p=a?"".concat(t,"--").concat(o):t,v=a?"".concat(n,"--").concat(o):n,m=(0,r.useRef)(0);return(0,r.useLayoutEffect)((function(){var e,t=f.current,n=p.split(" "),r=function e(r){var i;r.target===f.current&&(t.dispatchEvent(new Event("d")),t.removeEventListener("animationend",e),t.removeEventListener("animationcancel",e),0===m.current&&"animationcancel"!==r.type&&(i=t.classList).remove.apply(i,h(n)))};(e=t.classList).add.apply(e,h(n)),t.addEventListener("animationend",r),t.addEventListener("animationcancel",r)}),[]),(0,r.useEffect)((function(){var e=f.current,t=function t(){e.removeEventListener("animationend",t),u?function(e,t,n){void 0===n&&(n=300);var r=e.scrollHeight,i=e.style;requestAnimationFrame((function(){i.minHeight="initial",i.height=r+"px",i.transition="all ".concat(n,"ms"),requestAnimationFrame((function(){i.height="0",i.padding="0",i.margin="0",setTimeout(t,n)}))}))}(e,l,c):l()};d||(s?t():(m.current=1,e.className+=" ".concat(v),e.addEventListener("animationend",t)))}),[d]),r.createElement(r.Fragment,null,i)}}function eN(e,t){return null!=e?{content:e.content,containerId:e.props.containerId,id:e.props.toastId,theme:e.props.theme,type:e.props.type,data:e.props.data||{},isLoading:e.props.isLoading,icon:e.props.icon,status:t}:{}}var tN={list:new Map,emitQueue:new Map,on:function(e,t){return this.list.has(e)||this.list.set(e,[]),this.list.get(e).push(t),this},off:function(e,t){if(t){var n=this.list.get(e).filter((function(e){return e!==t}));return this.list.set(e,n),this}return this.list.delete(e),this},cancelEmit:function(e){var t=this.emitQueue.get(e);return t&&(t.forEach(clearTimeout),this.emitQueue.delete(e)),this},emit:function(e){var t=arguments,n=this;this.list.has(e)&&this.list.get(e).forEach((function(r){var i=setTimeout((function(){r.apply(void 0,h([].slice.call(t,1)))}),0);n.emitQueue.has(e)||n.emitQueue.set(e,[]),n.emitQueue.get(e).push(i)}))}},nN=function(e){var t=e.theme,n=e.type,i=qC(e,HC);return r.createElement("svg",qt({viewBox:"0 0 24 24",width:"100%",height:"100%",fill:"colored"===t?"currentColor":"var(--toastify-icon-color-".concat(n,")")},i))},rN={info:function(e){return r.createElement(nN,qt({},e),r.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))},warning:function(e){return r.createElement(nN,qt({},e),r.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))},success:function(e){return r.createElement(nN,qt({},e),r.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))},error:function(e){return r.createElement(nN,qt({},e),r.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))},spinner:function(){return r.createElement("div",{className:"Toastify__spinner"})}};function iN(e){var t=(0,r.useReducer)((function(e){return e+1}),0),n=l(t,2)[1],i=l((0,r.useState)([]),2),a=i[0],o=i[1],u=(0,r.useRef)(null),s=(0,r.useRef)(new Map).current,c=function(e){return-1!==a.indexOf(e)},f=(0,r.useRef)({toastKey:1,displayedToast:0,count:0,queue:[],props:e,containerId:null,isToastActive:c,getToast:function(e){return s.get(e)}}).current;function d(e){var t=e.containerId;!f.props.limit||t&&f.containerId!==t||(f.count-=f.queue.length,f.queue=[])}function p(e){o((function(t){return null==e?[]:t.filter((function(t){return t!==e}))}))}function v(){var e=f.queue.shift();y(e.toastContent,e.toastProps,e.staleId)}function m(e,t){var i=t.delay,a=t.staleId,o=qC(t,WC);if(JC(e)&&!function(e){return!u.current||f.props.enableMultiContainer&&e.containerId!==f.props.containerId||s.has(e.toastId)&&null==e.updateId}(o)){var c=o.toastId,h=o.updateId,d=o.data,m=f.props,g=function(){return p(c)},k=null==h;k&&f.count++;var w,b,x=qt(qt(qt({},m),{},{style:m.toastStyle,key:f.toastKey++},Object.fromEntries(Object.entries(o).filter((function(e){var t=l(e,2);t[0];return null!=t[1]})))),{},{toastId:c,updateId:h,data:d,closeToast:g,isIn:!1,className:XC(o.className||m.toastClassName),bodyClassName:XC(o.bodyClassName||m.bodyClassName),progressClassName:XC(o.progressClassName||m.progressClassName),autoClose:!o.isLoading&&(w=o.autoClose,b=m.autoClose,!1===w||QC(w)&&w>0?w:b),deleteToast:function(){var e=eN(s.get(c),"removed");s.delete(c),tN.emit(4,e);var t=f.queue.length;if(f.count=null==c?f.count-f.displayedToast:f.count-1,f.count<0&&(f.count=0),t>0){var r=null==c?f.props.limit:1;if(1===t||1===r)f.displayedToast++,v();else{var i=r>t?t:r;f.displayedToast=i;for(var a=0;a<i;a++)v()}}else n()}});x.iconOut=function(e){var t=e.theme,n=e.type,i=e.isLoading,a=e.icon,o=null,u={theme:t,type:n};return!1===a||($C(a)?o=a(u):(0,r.isValidElement)(a)?o=(0,r.cloneElement)(a,u):YC(a)||QC(a)?o=a:i?o=rN.spinner():function(e){return e in rN}(n)&&(o=rN[n](u))),o}(x),$C(o.onOpen)&&(x.onOpen=o.onOpen),$C(o.onClose)&&(x.onClose=o.onClose),x.closeButton=m.closeButton,!1===o.closeButton||JC(o.closeButton)?x.closeButton=o.closeButton:!0===o.closeButton&&(x.closeButton=!JC(m.closeButton)||m.closeButton);var _=e;(0,r.isValidElement)(e)&&!YC(e.type)?_=(0,r.cloneElement)(e,{closeToast:g,toastProps:x,data:d}):$C(e)&&(_=e({closeToast:g,toastProps:x,data:d})),m.limit&&m.limit>0&&f.count>m.limit&&k?f.queue.push({toastContent:_,toastProps:x,staleId:a}):QC(i)?setTimeout((function(){y(_,x,a)}),i):y(_,x,a)}}function y(e,t,n){var r=t.toastId;n&&s.delete(n);var i={content:e,props:t};s.set(r,i),o((function(e){return[].concat(h(e),[r]).filter((function(e){return e!==n}))})),tN.emit(4,eN(i,null==i.props.updateId?"added":"updated"))}return(0,r.useEffect)((function(){return f.containerId=e.containerId,tN.cancelEmit(3).on(0,m).on(1,(function(e){return u.current&&p(e)})).on(5,d).emit(2,f),function(){s.clear(),tN.emit(3,f)}}),[]),(0,r.useEffect)((function(){f.props=e,f.isToastActive=c,f.displayedToast=a.length})),{getToastToRender:function(t){var n=new Map,r=Array.from(s.values());return e.newestOnTop&&r.reverse(),r.forEach((function(e){var t=e.props.position;n.has(t)||n.set(t,[]),n.get(t).push(e)})),Array.from(n,(function(e){return t(e[0],e[1])}))},containerRef:u,isToastActive:c}}function aN(e){return e.targetTouches&&e.targetTouches.length>=1?e.targetTouches[0].clientX:e.clientX}function oN(e){return e.targetTouches&&e.targetTouches.length>=1?e.targetTouches[0].clientY:e.clientY}function uN(e){var t=e.closeToast,n=e.theme,i=e.ariaLabel,a=void 0===i?"close":i;return r.createElement("button",{className:"Toastify__close-button Toastify__close-button--".concat(n),type:"button",onClick:function(e){e.stopPropagation(),t(e)},"aria-label":a},r.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},r.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function sN(e){var t=e.delay,n=e.isRunning,i=e.closeToast,a=e.type,o=void 0===a?"default":a,u=e.hide,s=e.className,c=e.style,l=e.controlledProgress,f=e.progress,h=e.rtl,d=e.isIn,p=e.theme,v=u||l&&0===f,m=qt(qt({},c),{},{animationDuration:"".concat(t,"ms"),animationPlayState:n?"running":"paused",opacity:v?0:1});l&&(m.transform="scaleX(".concat(f,")"));var y=GC("Toastify__progress-bar",l?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated","Toastify__progress-bar-theme--".concat(p),"Toastify__progress-bar--".concat(o),{"Toastify__progress-bar--rtl":h}),g=$C(s)?s({rtl:h,type:o,defaultClassName:y}):GC(y,s);return r.createElement("div",$e({role:"progressbar","aria-hidden":v?"true":"false","aria-label":"notification timer",className:g,style:m},l&&f>=1?"onTransitionEnd":"onAnimationEnd",l&&f<1?null:function(){d&&i()}))}var cN=function(e){var t=function(e){var t=l((0,r.useState)(!1),2),n=t[0],i=t[1],a=l((0,r.useState)(!1),2),o=a[0],u=a[1],s=(0,r.useRef)(null),c=(0,r.useRef)({start:0,x:0,y:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,boundingRect:null,didMove:!1}).current,f=(0,r.useRef)(e),h=e.autoClose,d=e.pauseOnHover,p=e.closeToast,v=e.onClick,m=e.closeOnClick;function y(t){if(e.draggable){"touchstart"===t.nativeEvent.type&&t.nativeEvent.preventDefault(),c.didMove=!1,document.addEventListener("mousemove",b),document.addEventListener("mouseup",x),document.addEventListener("touchmove",b),document.addEventListener("touchend",x);var n=s.current;c.canCloseOnClick=!0,c.canDrag=!0,c.boundingRect=n.getBoundingClientRect(),n.style.transition="",c.x=aN(t.nativeEvent),c.y=oN(t.nativeEvent),"x"===e.draggableDirection?(c.start=c.x,c.removalDistance=n.offsetWidth*(e.draggablePercent/100)):(c.start=c.y,c.removalDistance=n.offsetHeight*(80===e.draggablePercent?1.5*e.draggablePercent:e.draggablePercent/100))}}function g(t){if(c.boundingRect){var n=c.boundingRect,r=n.top,i=n.bottom,a=n.left,o=n.right;"touchend"!==t.nativeEvent.type&&e.pauseOnHover&&c.x>=a&&c.x<=o&&c.y>=r&&c.y<=i?w():k()}}function k(){i(!0)}function w(){i(!1)}function b(t){var r=s.current;c.canDrag&&r&&(c.didMove=!0,n&&w(),c.x=aN(t),c.y=oN(t),c.delta="x"===e.draggableDirection?c.x-c.start:c.y-c.start,c.start!==c.x&&(c.canCloseOnClick=!1),r.style.transform="translate".concat(e.draggableDirection,"(").concat(c.delta,"px)"),r.style.opacity=""+(1-Math.abs(c.delta/c.removalDistance)))}function x(){document.removeEventListener("mousemove",b),document.removeEventListener("mouseup",x),document.removeEventListener("touchmove",b),document.removeEventListener("touchend",x);var t=s.current;if(c.canDrag&&c.didMove&&t){if(c.canDrag=!1,Math.abs(c.delta)>c.removalDistance)return u(!0),void e.closeToast();t.style.transition="transform 0.2s, opacity 0.2s",t.style.transform="translate".concat(e.draggableDirection,"(0)"),t.style.opacity="1"}}(0,r.useEffect)((function(){f.current=e})),(0,r.useEffect)((function(){return s.current&&s.current.addEventListener("d",k,{once:!0}),$C(e.onOpen)&&e.onOpen((0,r.isValidElement)(e.children)&&e.children.props),function(){var e=f.current;$C(e.onClose)&&e.onClose((0,r.isValidElement)(e.children)&&e.children.props)}}),[]),(0,r.useEffect)((function(){return e.pauseOnFocusLoss&&(document.hasFocus()||w(),window.addEventListener("focus",k),window.addEventListener("blur",w)),function(){e.pauseOnFocusLoss&&(window.removeEventListener("focus",k),window.removeEventListener("blur",w))}}),[e.pauseOnFocusLoss]);var _={onMouseDown:y,onTouchStart:y,onMouseUp:g,onTouchEnd:g};return h&&d&&(_.onMouseEnter=w,_.onMouseLeave=k),m&&(_.onClick=function(e){v&&v(e),c.canCloseOnClick&&p()}),{playToast:k,pauseToast:w,isRunning:n,preventExitTransition:o,toastRef:s,eventHandlers:_}}(e),n=t.isRunning,i=t.preventExitTransition,a=t.toastRef,o=t.eventHandlers,u=e.closeButton,s=e.children,c=e.autoClose,f=e.onClick,h=e.type,d=e.hideProgressBar,p=e.closeToast,v=e.transition,m=e.position,y=e.className,g=e.style,k=e.bodyClassName,w=e.bodyStyle,b=e.progressClassName,x=e.progressStyle,_=e.updateId,I=e.role,E=e.progress,S=e.rtl,T=e.toastId,C=e.deleteToast,N=e.isIn,A=e.isLoading,P=e.iconOut,R=e.closeOnClick,D=e.theme,O=GC("Toastify__toast","Toastify__toast-theme--".concat(D),"Toastify__toast--".concat(h),{"Toastify__toast--rtl":S},{"Toastify__toast--close-on-click":R}),L=$C(y)?y({rtl:S,position:m,type:h,defaultClassName:O}):GC(O,y),M=!!E||!c,F={closeToast:p,type:h,theme:D},U=null;return!1===u||(U=$C(u)?u(F):(0,r.isValidElement)(u)?(0,r.cloneElement)(u,F):uN(F)),r.createElement(v,{isIn:N,done:C,position:m,preventExitTransition:i,nodeRef:a},r.createElement("div",qt(qt({id:T,onClick:f,className:L},o),{},{style:g,ref:a}),r.createElement("div",qt(qt({},N&&{role:I}),{},{className:$C(k)?k({type:h}):GC("Toastify__toast-body",k),style:w}),null!=P&&r.createElement("div",{className:GC("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!A})},P),r.createElement("div",null,s)),U,r.createElement(sN,qt(qt({},_&&!M?{key:"pb-".concat(_)}:{}),{},{rtl:S,theme:D,delay:c,isRunning:n,isIn:N,closeToast:p,hide:d,type:h,style:x,className:b,controlledProgress:M,progress:E||0}))))},lN=function(e,t){return void 0===t&&(t=!1),{enter:"Toastify--animate Toastify__".concat(e,"-enter"),exit:"Toastify--animate Toastify__".concat(e,"-exit"),appendPosition:t}},fN=ZC(lN("bounce",!0)),hN=(ZC(lN("slide",!0)),ZC(lN("zoom")),ZC(lN("flip")),(0,r.forwardRef)((function(e,t){var n=iN(e),i=n.getToastToRender,a=n.containerRef,o=n.isToastActive,u=e.className,s=e.style,c=e.rtl,l=e.containerId;function f(e){var t=GC("Toastify__toast-container","Toastify__toast-container--".concat(e),{"Toastify__toast-container--rtl":c});return $C(u)?u({position:e,rtl:c,defaultClassName:t}):GC(t,XC(u))}return(0,r.useEffect)((function(){t&&(t.current=a.current)}),[]),r.createElement("div",{ref:a,className:"Toastify",id:l},i((function(e,t){var n=t.length?qt({},s):qt(qt({},s),{},{pointerEvents:"none"});return r.createElement("div",{className:f(e),style:n,key:"container-".concat(e)},t.map((function(e,n){var i=e.content,a=e.props;return r.createElement(cN,qt(qt({},a),{},{isIn:o(a.toastId),style:qt(qt({},a.style),{},{"--nth":n+1,"--len":t.length}),key:"toast-".concat(a.key)}),i)})))})))})));hN.displayName="ToastContainer",hN.defaultProps={position:"top-right",transition:fN,autoClose:5e3,closeButton:uN,pauseOnHover:!0,pauseOnFocusLoss:!0,closeOnClick:!0,draggable:!0,draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light"};var dN,pN=new Map,vN=[],mN=1;function yN(){return""+mN++}function gN(e){return e&&(YC(e.toastId)||QC(e.toastId))?e.toastId:yN()}function kN(e,t){return pN.size>0?tN.emit(0,e,t):vN.push({content:e,options:t}),t.toastId}function wN(e,t){return qt(qt({},t),{},{type:t&&t.type||e,toastId:gN(t)})}function bN(e){return function(t,n){return kN(t,wN(e,n))}}function xN(e,t){return kN(e,wN("default",t))}xN.loading=function(e,t){return kN(e,wN("default",qt({isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1},t)))},xN.promise=function(e,t,n){var r,i=t.pending,a=t.error,o=t.success;i&&(r=YC(i)?xN.loading(i,n):xN.loading(i.render,qt(qt({},n),i)));var u={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},s=function(e,t,i){if(null!=t){var a=qt(qt(qt({type:e},u),n),{},{data:i}),o=YC(t)?{render:t}:t;return r?xN.update(r,qt(qt({},a),o)):xN(o.render,qt(qt({},a),o)),i}xN.dismiss(r)},c=$C(e)?e():e;return c.then((function(e){return s("success",o,e)})).catch((function(e){return s("error",a,e)})),c},xN.success=bN("success"),xN.info=bN("info"),xN.error=bN("error"),xN.warning=bN("warning"),xN.warn=xN.warning,xN.dark=function(e,t){return kN(e,wN("default",qt({theme:"dark"},t)))},xN.dismiss=function(e){pN.size>0?tN.emit(1,e):vN=vN.filter((function(t){return null!=e&&t.options.toastId!==e}))},xN.clearWaitingQueue=function(e){return void 0===e&&(e={}),tN.emit(5,e)},xN.isActive=function(e){var t=!1;return pN.forEach((function(n){n.isToastActive&&n.isToastActive(e)&&(t=!0)})),t},xN.update=function(e,t){void 0===t&&(t={}),setTimeout((function(){var n=function(e,t){var n=t.containerId,r=pN.get(n||dN);return r&&r.getToast(e)}(e,t);if(n){var r=n.props,i=n.content,a=qt(qt(qt({delay:100},r),t),{},{toastId:t.toastId||e,updateId:yN()});a.toastId!==e&&(a.staleId=e);var o=a.render||i;delete a.render,kN(o,a)}}),0)},xN.done=function(e){xN.update(e,{progress:1})},xN.onChange=function(e){return tN.on(4,e),function(){tN.off(4,e)}},xN.POSITION={TOP_LEFT:"top-left",TOP_RIGHT:"top-right",TOP_CENTER:"top-center",BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",BOTTOM_CENTER:"bottom-center"},xN.TYPE={INFO:"info",SUCCESS:"success",WARNING:"warning",ERROR:"error",DEFAULT:"default"},tN.on(2,(function(e){dN=e.containerId||e,pN.set(dN,e),vN.forEach((function(e){tN.emit(0,e.content,e.options)})),vN=[]})).on(3,(function(e){pN.delete(e.containerId||e),0===pN.size&&tN.off(0).off(1).off(5)}));var _N=function(){};var IN=function(e){var t=e.user,n=l((0,r.useState)([]),2),i=n[0],a=n[1],o=l((0,r.useState)(),2),u=o[0],s=o[1],c=l((0,r.useState)(""),2),f=c[0],d=c[1],p=l((0,r.useState)([]),2),v=p[0],m=p[1],y=be(),g=function(){var e=Nt(Tt().mark((function e(n){var r,o;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.preventDefault(),""!==u.trim()&&(r={title:u,description:f,createdAt:(new Date).toLocaleDateString()},o=Math.random().toString(36).substring(7),r.id=o,a([].concat(h(i),[r])),s(""),d(""),t&&(AC.collection("todos").doc(t.uid).set({todos:[].concat(h(v),[r])}),xN.success("Todo Added successfully",{position:"top-left"})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();(0,r.useEffect)((function(){if(t){var e=AC.collection("todos").doc(t.uid);_N=e.onSnapshot((function(e){e.exists&&m(e.data().todos)}))}return function(){_N()}}),[t]);var k=l((0,r.useState)(!1),2),w=k[0],b=k[1],x=l((0,r.useState)(),2),_=x[0],I=x[1],E=function(e,t){b(!0),I(t),s(e.title),d(e.description)};return(0,PC.jsx)(PC.Fragment,{children:t?(0,PC.jsxs)(PC.Fragment,{children:[!1===w&&(0,PC.jsx)("div",{className:"flex justify-center flex-col items-center py-14 bg-green-700",children:(0,PC.jsxs)("form",{className:"flex flex-col text-xl  justify-center px-6 w-full",onSubmit:g,children:[(0,PC.jsx)("input",{name:"text",autoComplete:"off",className:"border-4 text-blue-600 border-lime-300 w-full bg-green-100 focus:outline-none px-2 py-2  shadow-md shadow-black",value:u,onChange:function(e){return s(e.target.value)},placeholder:"Title...."}),(0,PC.jsx)("br",{}),(0,PC.jsx)("textarea",{autoComplete:"off",className:"border-4 text-blue-600 border-lime-300 w-full bg-green-100 focus:outline-none px-2 py-2 shadow-md shadow-black",name:"text",id:"",cols:"10",rows:"5",value:f,onChange:function(e){return d(e.target.value)},placeholder:"Description...."}),(0,PC.jsx)("br",{}),(0,PC.jsx)("button",{className:"bg-green-600 border-lime-300 border-4 text-yellow-400 p-3 focus:outline-none text-2xl hover:bg-yellow-400 hover:text-green-500 shadow-md shadow-black  add ",value:"submit",children:"ADD"}),(0,PC.jsx)("br",{})]})}),!0===w&&(0,PC.jsxs)("div",{className:"flex justify-center flex-col items-center py-2 bg-green-700",children:[(0,PC.jsxs)("form",{className:"flex flex-col text-xl  justify-center px-6 w-full",onSubmit:function(e){e.preventDefault();var n=h(v);if(null!==_){var r=n[_];if(r.title=u,r.description=f,m(n),t)AC.collection("todos").doc(t.uid).update({todos:n}).then((function(){xN.success("Todo updated successfully",{position:"top-left"})})).catch((function(e){xN.error("Error updating document:",e)}));d(""),s(""),b(!1)}},children:[(0,PC.jsx)("input",{type:"text",autoComplete:"off",value:u,onChange:function(e){return s(e.target.value)},placeholder:"Title",className:"border-4 bg-green-50 h-10 text-blue-600 border-lime-300 w-full  focus:outline-none"})," ",(0,PC.jsx)("br",{}),(0,PC.jsx)("textarea",{autoComplete:"off",className:"border-4 text-blue-600 border-lime-300 w-full bg-green-50 focus:outline-none",name:"text",id:"",cols:"10",rows:"5",value:f,onChange:function(e){return d(e.target.value)},placeholder:"Description...."}),(0,PC.jsx)("br",{}),(0,PC.jsx)("button",{className:"bg-yellow-400 border-lime-300 border-4 text-green-700 p-3 focus:outline-none text-2xl focus:bg-green-500 focus:text-yellow-400 ",value:"submit",children:"UPDATE"}),(0,PC.jsx)("br",{})]}),(0,PC.jsx)("br",{})]}),(0,PC.jsx)("div",{className:"w-full px-4 py-8",children:v.map((function(e,n){return(0,PC.jsx)("div",{children:(0,PC.jsx)(BC,{deleteFunc:function(){return function(e){if(t&&t.uid){var n=AC.collection("todos").doc(t.uid);n.get().then((function(t){if(t.exists){var r=(t.data().todos||[]).filter((function(t){return t.id!==e}));xN.error("Todo deleted successfully",{position:"top-left"}),n.update({todos:r}).then((function(){m(r)})).catch((function(e){xN.error("Error updating document:",e)}))}else xN.error("Document does not exist.")})).catch((function(e){xN.error("Error getting document:",e)}))}else console.error("User not authenticated or missing UID.")}(e.id)},title:e.title,description:e.description,del:e.id,editFunc:E,index:n,item:e,edit:w,createdAt:e.createdAt},e.id)},e.id)}))})]}):(0,PC.jsx)(PC.Fragment,{children:(0,PC.jsx)("div",{children:y("/login")})})})},EN=function(){var e=l((0,r.useState)(""),2),t=e[0],n=e[1],i=l((0,r.useState)(""),2),a=i[0],o=i[1],u=be(),s=function(){var e=Nt(Tt().mark((function e(n){return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,e.next=4,NC.signInWithEmailAndPassword(t,a);case 4:xN.info("Login successfully",{position:"top-left"}),u("/home"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),xN.error(" ".concat(e.t0.message),{position:"top-left"});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return(0,PC.jsxs)("div",{className:"w-full  flex justify-center items-center flex-col bg-green-100 h-screen sm:h-full p-[30px] sm:p-[97px]",children:[(0,PC.jsx)("h1",{className:" text-2xl sm:text-4xl animate-bounce",children:"Please Login!!"}),(0,PC.jsxs)("form",{className:"w-full h-full px-6 xl:px-80 py-14",onSubmit:s,children:[(0,PC.jsx)("div",{className:"w-full h-10",children:(0,PC.jsx)("input",{autoComplete:"off",value:t,type:"email",placeholder:"Your Email",className:"w-full h-10 p-2 focus:outline-none bg-transparent border-b-4 text-2xl border-green-900 text-yellow-400",onChange:function(e){return n(e.target.value)}})}),(0,PC.jsx)("br",{}),(0,PC.jsx)("div",{children:(0,PC.jsx)("input",{autoComplete:"off",value:a,type:"password",placeholder:"Your Password",className:"w-full h-10 p-2 focus:outline-none bg-transparent border-b-4 text-2xl border-green-900 text-yellow-400",onChange:function(e){return o(e.target.value)}})}),(0,PC.jsx)("div",{className:"flex justify-center items-center py-14",children:(0,PC.jsx)("button",{type:"submit",className:"bg-green-800 px-10 py-2 text-yellow-500 text-2xl login",children:"Login"})})]})]})},SN=function(){var e=l((0,r.useState)(""),2),t=e[0],n=e[1],i=l((0,r.useState)(""),2),a=i[0],o=i[1],u=be(),s=function(){var e=Nt(Tt().mark((function e(n){return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,e.next=4,NC.createUserWithEmailAndPassword(t,a);case 4:xN.info("Signup successfully",{position:"top-left"}),u("/home"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),xN.error(" ".concat(e.t0.message),{position:"top-left"});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return(0,PC.jsxs)("div",{className:"w-full  flex justify-center items-center flex-col bg-green-100 p-[30px] sm:p-[97px] h-screen sm:h-full",children:[(0,PC.jsx)("h1",{className:"text-2xl sm:text-4xl animate-bounce",children:"Please Signup here!!"}),(0,PC.jsxs)("form",{className:"w-full h-full xl:px-80 px-6 py-14",onSubmit:s,children:[(0,PC.jsx)("div",{className:"w-full h-10",children:(0,PC.jsx)("input",{autoComplete:"off",value:t,type:"email",placeholder:"Your Email",className:"w-full h-10 p-2 focus:outline-none bg-transparent border-b-4 text-2xl border-green-900 text-yellow-400",onChange:function(e){return n(e.target.value)}})}),(0,PC.jsx)("br",{}),(0,PC.jsx)("div",{children:(0,PC.jsx)("input",{autoComplete:"off",value:a,type:"password",placeholder:"Your Password",className:"w-full h-10 p-2 focus:outline-none bg-transparent border-b-4 text-2xl border-green-900 text-yellow-400",onChange:function(e){return o(e.target.value)}})}),(0,PC.jsx)("div",{className:"flex justify-center items-center py-14",children:(0,PC.jsx)("button",{type:"submit",className:"bg-green-800 px-10 py-2 text-yellow-500 signup text-2xl ",children:"Signup"})})]})]})},TN=function(){return(0,PC.jsxs)("div",{className:"flex  justify-center items-center flex-col py-4",children:[(0,PC.jsx)("h1",{className:"text-2xl sm:text-4xl font-bold my-8 animate-bounce",children:"Write your daily goals here....."}),(0,PC.jsx)("img",{src:"https://www.weareteachers.com/wp-content/uploads/1-21-800x800.jpg",alt:"",className:"w-64 mb-4 shadow-2xl"}),(0,PC.jsx)("h1",{className:"text-4xl font-bold ",children:"SET GOALS"}),(0,PC.jsx)("h1",{className:"text-4xl font-bold my-4",children:"CRUSH THEM"}),(0,PC.jsx)("h1",{className:"text-4xl font-bold",children:"REPEAT"}),(0,PC.jsx)("div",{className:"flex sm:justify-end sm:items-end w-full sm:mr-24 mt-5  items-center justify-center",children:"By Aastha Kalra"})]})};var CN=function(){var e=l((0,r.useState)(null),2),t=e[0],n=e[1];return(0,r.useEffect)((function(){NC.onAuthStateChanged((function(e){n(e||null)}))})),(0,PC.jsxs)("div",{className:"overflow:hidden",children:[(0,PC.jsx)(hN,{}),(0,PC.jsxs)(Ke,{children:[(0,PC.jsx)(RC,{user:t}),(0,PC.jsxs)(Me,{children:[(0,PC.jsx)(Oe,{exact:!0,path:"/",element:(0,PC.jsx)(TN,{})}),(0,PC.jsx)(Oe,{exact:!0,path:"/home",element:(0,PC.jsx)(IN,{user:t})}),(0,PC.jsx)(Oe,{exact:!0,path:"/login",element:(0,PC.jsx)(EN,{})}),(0,PC.jsx)(Oe,{exact:!0,path:"/signup",element:(0,PC.jsx)(SN,{})})]})]})]})},NN=function(e){e&&e instanceof Function&&n.e(787).then(n.bind(n,787)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),r(e),i(e),a(e),o(e)}))};a.createRoot(document.getElementById("root")).render((0,PC.jsx)(CN,{})),function(){var e="".concat("","/sw.js");navigator.serviceWorker.register(e).then((function(e){console.warn("response",e)}))}(),NN()}()}();
//# sourceMappingURL=main.72c8e079.js.map